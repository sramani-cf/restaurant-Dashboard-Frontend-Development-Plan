(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19460,e=>{"use strict";e.s(["default",()=>es],19460);var t=e.i(43476),s=e.i(71645);let a=[{id:"table-1",number:"1",capacity:2,x:100,y:150,width:80,height:80,shape:"round",status:"available",diningAreaId:"main-dining",isCombinable:!1,estimatedTurnoverTime:90},{id:"table-2",number:"2",capacity:4,x:200,y:150,width:120,height:80,shape:"rectangular",status:"occupied",diningAreaId:"main-dining",isCombinable:!0,estimatedTurnoverTime:120},{id:"table-3",number:"3",capacity:4,x:350,y:150,width:120,height:80,shape:"rectangular",status:"reserved",diningAreaId:"main-dining",isCombinable:!0,estimatedTurnoverTime:120},{id:"table-4",number:"4",capacity:6,x:100,y:300,width:140,height:100,shape:"rectangular",status:"cleaning",diningAreaId:"main-dining",isCombinable:!1,estimatedTurnoverTime:150},{id:"table-5",number:"5",capacity:2,x:500,y:100,width:80,height:80,shape:"round",status:"available",diningAreaId:"patio",isCombinable:!1,estimatedTurnoverTime:90}],i=[{id:"main-dining",name:"Main Dining Room",floor:1,capacity:60,isActive:!0,tables:a.filter(e=>"main-dining"===e.diningAreaId),layout:{width:800,height:600}},{id:"patio",name:"Outdoor Patio",floor:1,capacity:24,isActive:!0,tables:a.filter(e=>"patio"===e.diningAreaId),layout:{width:600,height:400}},{id:"private-dining",name:"Private Dining Room",floor:2,capacity:16,isActive:!0,tables:[],layout:{width:400,height:300}}],l=[{id:"guest-1",firstName:"John",lastName:"Smith",phone:"+1234567890",email:"john.smith@email.com",dateOfBirth:"1985-06-15",preferences:{seatingPreference:"booth",dietaryRestrictions:["gluten-free"],favoriteItems:["Caesar Salad","Grilled Salmon"]},visitHistory:[],totalVisits:12,totalSpent:1250,averageSpend:104.17,lastVisit:"2024-01-10",vipStatus:"frequent",createdAt:"2023-01-15T10:00:00Z",updatedAt:"2024-01-10T20:30:00Z"},{id:"guest-2",firstName:"Sarah",lastName:"Johnson",phone:"+1987654321",email:"sarah.j@email.com",anniversary:"2020-03-14",preferences:{seatingPreference:"patio",allergies:["nuts"],ambiance:"quiet"},visitHistory:[],totalVisits:5,totalSpent:425,averageSpend:85,lastVisit:"2024-01-08",vipStatus:"regular",createdAt:"2023-06-20T14:00:00Z",updatedAt:"2024-01-08T19:45:00Z"}],r=[{id:"res-1",guestId:"guest-1",tableId:"table-3",partySize:4,dateTime:"2024-01-20T19:00:00Z",duration:120,status:"confirmed",specialRequests:"Window seat preferred",occasion:"birthday",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z",source:"online",estimatedSpend:200,tags:["birthday","vip"]},{id:"res-2",guestId:"guest-2",partySize:2,dateTime:"2024-01-20T20:00:00Z",duration:90,status:"pending",occasion:"anniversary",createdAt:"2024-01-18T14:30:00Z",updatedAt:"2024-01-18T14:30:00Z",source:"phone",estimatedSpend:150}],n=[{id:"wait-1",guestId:"guest-1",partySize:3,estimatedWaitTime:25,priority:"normal",addedAt:"2024-01-20T18:30:00Z",phoneNumber:"+1234567890",status:"waiting",quotedWaitTime:30},{id:"wait-2",guestId:"guest-2",partySize:2,estimatedWaitTime:15,priority:"vip",addedAt:"2024-01-20T18:45:00Z",phoneNumber:"+1987654321",status:"notified",quotedWaitTime:20}];async function d(){return await new Promise(e=>setTimeout(e,300)),i}async function c(e){return await new Promise(e=>setTimeout(e,200)),e?a.filter(t=>t.diningAreaId===e):a}async function o(e){await new Promise(e=>setTimeout(e,400));let t=[...r];if(e){var s,a;if(e.date&&(t=t.filter(t=>t.dateTime.startsWith(e.date))),(null==(s=e.status)?void 0:s.length)&&(t=t.filter(t=>e.status.includes(t.status))),e.partySize){let{min:s,max:a}=e.partySize;t=t.filter(e=>(!s||!(e.partySize<s))&&(!a||!(e.partySize>a)))}(null==(a=e.source)?void 0:a.length)&&(t=t.filter(t=>e.source.includes(t.source)))}return{data:t,pagination:{page:1,limit:50,total:t.length,totalPages:1}}}async function m(e){await new Promise(e=>setTimeout(e,200));let t=[...n];if(e){var s,a;if((null==(s=e.status)?void 0:s.length)&&(t=t.filter(t=>e.status.includes(t.status))),(null==(a=e.priority)?void 0:a.length)&&(t=t.filter(t=>e.priority.includes(t.priority))),e.partySize){let{min:s,max:a}=e.partySize;t=t.filter(e=>(!s||!(e.partySize<s))&&(!a||!(e.partySize>a)))}}return t}async function u(e){if(await new Promise(e=>setTimeout(e,300)),e){let t=e.toLowerCase();return l.filter(s=>{var a;return s.firstName.toLowerCase().includes(t)||s.lastName.toLowerCase().includes(t)||s.phone.includes(e)||(null==(a=s.email)?void 0:a.toLowerCase().includes(t))})}return l}async function x(){return await new Promise(e=>setTimeout(e,400)),{today:{totalReservations:45,seated:28,pending:12,noShows:3,walkIns:8,averagePartySize:3.2,totalCovers:144},current:{occupiedTables:12,availableTables:8,waitlistSize:6,averageWaitTime:22,nextAvailableSlot:"2024-01-20T21:30:00Z"},forecast:{remainingCapacity:45,expectedTurnover:15,projectedRevenue:2800}}}async function h(e){await new Promise(e=>setTimeout(e,300));let t=[];for(let e=17;e<=22;e++)for(let s=0;s<60;s+=30){let i="".concat(e.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"));t.push({time:i,capacity:80,booked:Math.floor(60*Math.random()),available:Math.floor(20*Math.random()),tables:a.map(e=>({tableId:e.id,status:Math.random()>.7?"reserved":"available"}))})}let s=t.reduce((e,t)=>e+t.booked,0),i=80*t.length;return{date:e,slots:t,totalCapacity:i,totalBooked:s,isFullyBooked:s>=.95*i}}let g=[];function v(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}function p(e){return new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}function f(e){switch(e){case"available":return"#10B981";case"occupied":return"#EF4444";case"reserved":return"#F59E0B";case"cleaning":default:return"#6B7280";case"maintenance":return"#8B5CF6";case"combined":return"#3B82F6"}}function j(e){switch(e){case"confirmed":return"#10B981";case"pending":return"#F59E0B";case"seated":return"#3B82F6";case"completed":default:return"#6B7280";case"cancelled":return"#EF4444";case"no-show":return"#DC2626"}}function b(e){switch(e){case"confirmed":return"Confirmed";case"pending":return"Pending";case"seated":return"Seated";case"completed":return"Completed";case"cancelled":return"Cancelled";case"no-show":return"No Show";default:return"Unknown"}}function N(e){switch(e){case"vip":return"#DC2626";case"high":return"#F59E0B";case"normal":return"#10B981";default:return"#6B7280"}}function y(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}setInterval(()=>{if(g.length>0){let e,t=Math.random();if(t<.4){let t=a[Math.floor(Math.random()*a.length)],s=["available","occupied","reserved","cleaning"];e={type:"table",action:"update",data:{...t,status:s[Math.floor(Math.random()*s.length)]},timestamp:new Date().toISOString()}}else if(t<.7)e={type:"reservation",action:"update",data:{...r[Math.floor(Math.random()*r.length)],status:"seated"},timestamp:new Date().toISOString()};else{let t=n[Math.floor(Math.random()*n.length)];e={type:"waitlist",action:"update",data:{...t,estimatedWaitTime:Math.max(0,t.estimatedWaitTime-5)},timestamp:new Date().toISOString()}}g.forEach(t=>t(e))}},3e4);var w=e.i(67881),S=e.i(70065),C=e.i(94179),T=e.i(14390),k=e.i(2957);function R(e){var a;let{reservation:i,guest:l,table:r,isOpen:n,onClose:d,onUpdate:c}=e,[o,m]=(0,s.useState)(!1);return(0,t.jsx)(k.Modal,{isOpen:n,onClose:d,className:"max-w-2xl",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Reservation Details"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(S.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:l?"".concat(l.firstName," ").concat(l.lastName):"Unknown Guest"}),(0,t.jsx)("p",{className:"text-gray-600",children:(a=i.dateTime,"".concat(p(a)," at ").concat(v(a)))}),(0,t.jsxs)("p",{className:"text-gray-600",children:[i.partySize," guests"]})]}),(0,t.jsx)(C.Badge,{style:{backgroundColor:j(i.status)},children:i.status})]})}),(0,t.jsx)("div",{className:"text-gray-500 text-center py-8",children:"Detailed reservation information would be displayed here"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,t.jsx)(w.Button,{variant:"ghost",onClick:d,children:"Close"}),(0,t.jsx)(w.Button,{onClick:()=>m(!0),children:"Edit"})]})]})})}var B=e.i(95187),I=(0,B.createServerReference)("60da97403df77a32677291ba24e46f04df12a8b480",B.callServer,void 0,B.findSourceMapURL,"updateReservationAction"),A=(0,B.createServerReference)("60914b440cc33feca29dd81bfddf1cf97dbebdba13",B.callServer,void 0,B.findSourceMapURL,"seatReservationAction"),z=(0,B.createServerReference)("6042007cc1c3fa5dfa785c91858b90cbff06afff87",B.callServer,void 0,B.findSourceMapURL,"cancelReservationAction");function D(e){let{reservations:a,guests:i,tables:l,onReservationUpdate:r,className:n=""}=e,[d,c]=(0,s.useState)(null),[o,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)({}),h=(0,s.useMemo)(()=>i.reduce((e,t)=>(e[t.id]=t,e),{}),[i]),g=(0,s.useMemo)(()=>l.reduce((e,t)=>(e[t.id]=t,e),{}),[l]),f=async(e,t,s)=>{x(t=>({...t,[e]:!0}));try{let a;switch(t){case"seat":if(!s)throw Error("Table ID required for seating");a=await A(e,s);break;case"cancel":a=await z(e);break;case"complete":a=await I(e,{status:"completed"});break;case"no-show":a=await I(e,{status:"no-show"})}a.success&&a.data&&r&&r(a.data)}catch(e){console.error("Action ".concat(t," failed:"),e)}finally{x(t=>({...t,[e]:!1}))}},N=[{header:"Time",accessorKey:"dateTime",cell:e=>{let{row:s}=e;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:v(s.original.dateTime)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:p(s.original.dateTime)}),(e=>{if("confirmed"!==e.status&&"pending"!==e.status)return null;let s=function(e){let t=new Date,s=new Date(e.dateTime),a=(t.getTime()-s.getTime())/6e4;return a<-30?"early":a>=-30&&a<=15?"on-time":a>15&&a<=45?"late":"very-late"}(e),a="default",i="";switch(s){case"early":a="secondary",i="Early";break;case"on-time":a="default",i="On Time";break;case"late":a="outline",i="Late";break;case"very-late":a="destructive",i="Very Late"}return(0,t.jsx)(C.Badge,{variant:a,className:"text-xs",children:i})})(s.original)]})}},{header:"Guest",cell:e=>{let{row:s}=e,a=h[s.original.guestId];return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:a?"".concat(a.firstName," ").concat(a.lastName):"Unknown Guest"}),(null==a?void 0:a.phone)&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:a.phone}),(null==a?void 0:a.vipStatus)!=="regular"&&(0,t.jsx)(C.Badge,{variant:"outline",className:"text-xs",children:a.vipStatus.toUpperCase()})]})}},{header:"Party",accessorKey:"partySize",cell:e=>{let{row:s}=e;return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-lg",children:s.original.partySize}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"guests"})]})}},{header:"Table",cell:e=>{let{row:s}=e,a=s.original.tableId?g[s.original.tableId]:null;return(0,t.jsx)("div",{className:"space-y-1",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"font-medium",children:["Table ",a.number]}),(0,t.jsx)(C.Badge,{variant:"outline",className:"text-xs",style:{backgroundColor:j(s.original.status)+"20"},children:b(s.original.status)})]}):(0,t.jsx)("span",{className:"text-gray-500",children:"Not assigned"})})}},{header:"Status",cell:e=>{let{row:s}=e,a=function(e){if("confirmed"!==e.status&&"pending"!==e.status)return!1;let t=new Date,s=new Date(e.dateTime);return t.getTime()>s.getTime()+9e5}(s.original);return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(C.Badge,{style:{backgroundColor:j(s.original.status),color:"white"},children:b(s.original.status)}),a&&(0,t.jsx)(C.Badge,{variant:"destructive",className:"text-xs",children:"LATE"})]})}},{header:"Special Requests",cell:e=>{let{row:s}=e;return(0,t.jsxs)("div",{className:"max-w-xs",children:[s.original.specialRequests&&(0,t.jsx)("div",{className:"text-sm text-gray-600 truncate",title:s.original.specialRequests,children:s.original.specialRequests}),s.original.occasion&&(0,t.jsx)(C.Badge,{variant:"outline",className:"text-xs mt-1",children:s.original.occasion})]})}},{header:"Actions",cell:e=>{let s,{row:a}=e,i=a.original;h[i.guestId];let r=(s=i.partySize,l.filter(e=>"available"===e.status&&e.capacity>=s)),n=u[i.id];return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(w.Button,{size:"sm",variant:"ghost",onClick:()=>{c(i),m(!0)},children:"Details"}),"confirmed"===i.status&&!i.tableId&&r.length>0&&(0,t.jsx)(w.Button,{size:"sm",onClick:()=>f(i.id,"seat",r[0].id),disabled:n,children:n?"Seating...":"Seat at ".concat(r[0].number)}),"seated"===i.status&&(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>f(i.id,"complete"),disabled:n,children:n?"Completing...":"Complete"}),("confirmed"===i.status||"pending"===i.status)&&(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>f(i.id,"no-show"),disabled:n,children:"No Show"}),("confirmed"===i.status||"pending"===i.status)&&(0,t.jsx)(w.Button,{size:"sm",variant:"destructive",onClick:()=>f(i.id,"cancel"),disabled:n,children:n?"Cancelling...":"Cancel"})]})}}],y=(0,s.useMemo)(()=>{let e={};return a.forEach(t=>{let s=p(t.dateTime);e[s]||(e[s]=[]),e[s].push(t)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>new Date(e.dateTime).getTime()-new Date(t.dateTime).getTime())}),e},[a]);return(0,t.jsxs)("div",{className:"space-y-6 ".concat(n),children:[Object.entries(y).map(e=>{let[s,a]=e;return(0,t.jsxs)(S.Card,{className:"overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[a.length," reservations"]}),(0,t.jsxs)("span",{children:[a.reduce((e,t)=>e+t.partySize,0)," total guests"]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)("span",{className:"text-green-600",children:[a.filter(e=>"confirmed"===e.status).length," confirmed"]}),(0,t.jsxs)("span",{className:"text-blue-600",children:[a.filter(e=>"seated"===e.status).length," seated"]}),(0,t.jsxs)("span",{className:"text-gray-600",children:[a.filter(e=>"completed"===e.status).length," completed"]})]})]})]}),(0,t.jsx)(T.DataTable,{columns:N,data:a,searchable:!1,pagination:{pageSize:10}})]},s)}),0===a.length&&(0,t.jsx)(S.Card,{className:"p-8 text-center",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("div",{className:"text-lg font-medium mb-2",children:"No reservations found"}),(0,t.jsx)("div",{className:"text-sm",children:"Create a new reservation to get started."})]})}),d&&(0,t.jsx)(R,{reservation:d,guest:h[d.guestId],table:d.tableId?g[d.tableId]:void 0,isOpen:o,onClose:()=>{m(!1),c(null)},onUpdate:r})]})}var M=(0,B.createServerReference)("40d53966cd22908b34c3a388219981590c16f1b09c",B.callServer,void 0,B.findSourceMapURL,"createReservationAction"),W=e.i(23750);function P(e){let{onGuestSelect:a,placeholder:i="Search guests...",className:l=""}=e,[r,n]=(0,s.useState)(""),[d,c]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[p,f]=(0,s.useState)(-1),j=(0,s.useRef)(null),b=(0,s.useRef)(null);(0,s.useEffect)(()=>{N()},[]),(0,s.useEffect)(()=>{if(r.trim().length>0){let e=function(e,t){let s=t.toLowerCase().trim();return s?e.filter(e=>{var t;return e.firstName.toLowerCase().includes(s)||e.lastName.toLowerCase().includes(s)||e.phone.includes(s)||(null==(t=e.email)?void 0:t.toLowerCase().includes(s))||"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(s)}):e}(d,r);m(e.slice(0,10)),h(e.length>0),f(-1)}else m([]),h(!1),f(-1)},[r,d]);let N=async()=>{try{v(!0);let e=await u();c(e)}catch(e){console.error("Failed to load guests:",e)}finally{v(!1)}},y=e=>{n("".concat(e.firstName," ").concat(e.lastName)),h(!1),a(e)},w=(e,s)=>{if(!s)return e;let a=RegExp("(".concat(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(a).map((e,s)=>a.test(e)?(0,t.jsx)("mark",{className:"bg-yellow-200",children:e},s):e)};return(0,t.jsxs)("div",{className:"relative ".concat(l),children:[(0,t.jsx)(W.Input,{ref:j,type:"text",placeholder:i,value:r,onChange:e=>{n(e.target.value)},onFocus:()=>{r.trim().length>0&&o.length>0&&h(!0)},onBlur:()=>{setTimeout(()=>{h(!1)},200)},onKeyDown:e=>{if(x&&0!==o.length)switch(e.key){case"ArrowDown":e.preventDefault(),f(e=>e<o.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),f(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),p>=0&&p<o.length&&y(o[p]);break;case"Escape":var t;h(!1),f(-1),null==(t=j.current)||t.blur()}},className:"w-full",disabled:g}),g&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-blue-600"})}),x&&(0,t.jsxs)("div",{ref:b,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[o.length>0?(0,t.jsx)("ul",{className:"py-1",children:o.map((e,s)=>{var a,i,l,n;return(0,t.jsx)("li",{className:"px-4 py-3 cursor-pointer transition-colors ".concat(s===p?"bg-blue-50 border-l-2 border-blue-500":"hover:bg-gray-50"),onClick:()=>y(e),children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:w("".concat(e.firstName," ").concat(e.lastName),r)}),"regular"===e.vipStatus?null:(0,t.jsx)(C.Badge,{className:"text-xs ".concat({frequent:"bg-blue-100 text-blue-800",vip:"bg-purple-100 text-purple-800",celebrity:"bg-red-100 text-red-800"}[e.vipStatus]),children:e.vipStatus.toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,t.jsx)("span",{children:w((e=>{let t=e.replace(/\D/g,"");return 10===t.length?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):e})(e.phone),r)}),e.email&&(0,t.jsx)("span",{children:w(e.email,r)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[(0,t.jsxs)("span",{children:[e.totalVisits," visits"]}),(0,t.jsxs)("span",{children:["Avg: $",e.averageSpend.toFixed(0)]}),e.lastVisit&&(0,t.jsxs)("span",{children:["Last: ",new Date(e.lastVisit).toLocaleDateString()]})]}),((null==(a=e.preferences.dietaryRestrictions)?void 0:a.length)||(null==(i=e.preferences.allergies)?void 0:i.length)||e.preferences.seatingPreference)&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.preferences.seatingPreference&&(0,t.jsx)(C.Badge,{variant:"outline",className:"text-xs",children:e.preferences.seatingPreference}),null==(l=e.preferences.dietaryRestrictions)?void 0:l.map(e=>(0,t.jsx)(C.Badge,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700",children:e},e)),null==(n=e.preferences.allergies)?void 0:n.map(e=>(0,t.jsxs)(C.Badge,{variant:"outline",className:"text-xs bg-red-50 text-red-700",children:["⚠️ ",e]},e))]})]})})},e.id)})}):r.length>2?(0,t.jsxs)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:['No guests found matching "',r,'"']}):(0,t.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Type at least 3 characters to search"}),r.length>2&&0===o.length&&(0,t.jsx)("div",{className:"border-t border-gray-200",children:(0,t.jsxs)("button",{type:"button",className:"w-full px-4 py-3 text-sm text-left text-blue-600 hover:bg-blue-50 transition-colors",onClick:()=>{n(""),h(!1)},children:['+ Add "',r,'" as new guest']})})]})]})}function F(e){let{isOpen:a,onClose:i,onSuccess:l,initialDate:r,initialTime:n,className:d=""}=e,[c,o]=(0,s.useState)({partySize:2,dateTime:"",duration:120,source:"phone",specialRequests:"",occasion:"",notes:""}),[m,u]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[v,p]=(0,s.useState)({firstName:"",lastName:"",phone:"",email:""}),[f,j]=(0,s.useState)([]),[b,N]=(0,s.useState)(!1),[y,T]=(0,s.useState)([]),[R,B]=(0,s.useState)(r||""),[I,A]=(0,s.useState)(n||"");(0,s.useEffect)(()=>{if(r&&n){let e="".concat(r,"T").concat(I,":00");o(t=>({...t,dateTime:e}))}},[r,n,I]),(0,s.useEffect)(()=>{R&&z()},[R,c.partySize]);let z=async()=>{try{let e=(await h(R)).slots.filter(e=>e.available>=c.partySize).map(e=>e.time);j(e)}catch(e){console.error("Failed to fetch availability:",e),j(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:17,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:23,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a=[];for(let i=e;i<=t;i++)for(let e=0;e<60&&(i!==t||!(e>0));e+=s){let t="".concat(i.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0"));a.push(t)}return a}())}},D=(e,t)=>{o(s=>({...s,[e]:t})),T([])};(0,s.useEffect)(()=>{R&&I&&D("dateTime","".concat(R,"T").concat(I,":00"))},[R,I]);let F=(e,t)=>{p(s=>({...s,[e]:t}))},E=async e=>{if(e.preventDefault(),(()=>{let e=function(e){let t=[];if((!e.partySize||e.partySize<1||e.partySize>20)&&t.push("Party size must be between 1 and 20"),e.dateTime){let s=new Date(e.dateTime);s<new Date&&t.push("Reservation time cannot be in the past");let a=new Date;a.setDate(a.getDate()+60),s>a&&t.push("Reservations cannot be made more than 60 days in advance")}else t.push("Date and time is required");return e.guest&&((!e.guest.firstName||e.guest.firstName.trim().length<2)&&t.push("First name must be at least 2 characters"),(!e.guest.lastName||e.guest.lastName.trim().length<2)&&t.push("Last name must be at least 2 characters"),e.guest.phone&&/^\+?[\d\s\-\(\)]+$/.test(e.guest.phone)||t.push("Valid phone number is required"),e.guest.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.guest.email)&&t.push("Valid email address is required")),t}({...c,guest:x?v:void 0});return m||x||e.push("Please select a guest or add a new one"),x&&(v.firstName.trim()||e.push("First name is required"),v.lastName.trim()||e.push("Last name is required"),v.phone.trim()||e.push("Phone number is required")),T(e),0===e.length})()){N(!0);try{let e={...c,guestId:null==m?void 0:m.id,guest:x?v:void 0},t=await M(e);t.success?(l&&t.data&&l(t.data),i(),q()):T([t.error||"Failed to create reservation"])}catch(e){T(["An unexpected error occurred. Please try again."]),console.error("Reservation creation error:",e)}finally{N(!1)}}},q=()=>{o({partySize:2,dateTime:"",duration:120,source:"phone",specialRequests:"",occasion:"",notes:""}),u(null),g(!1),p({firstName:"",lastName:"",phone:"",email:""}),B(""),A(""),T([])},L=()=>{q(),i()};return(0,t.jsx)(k.Modal,{isOpen:a,onClose:L,className:"max-w-2xl ".concat(d),children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"New Reservation"}),(0,t.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Information"}),!m&&!x&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(P,{onGuestSelect:e=>{u(e),g(!1),o(t=>({...t,guestId:e.id}))},placeholder:"Search for existing guest..."}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"or "}),(0,t.jsx)(w.Button,{type:"button",variant:"outline",onClick:()=>g(!0),children:"Add New Guest"})]})]}),m&&(0,t.jsx)(S.Card,{className:"p-4 bg-green-50 border-green-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium",children:[m.firstName," ",m.lastName]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[m.phone," • ",m.email]}),(0,t.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,t.jsx)(C.Badge,{variant:"outline",children:m.vipStatus}),(0,t.jsxs)(C.Badge,{variant:"outline",children:[m.totalVisits," visits"]})]})]}),(0,t.jsx)(w.Button,{type:"button",variant:"ghost",onClick:()=>u(null),children:"Change"})]})}),x&&(0,t.jsxs)(S.Card,{className:"p-4 border-blue-200 bg-blue-50",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsx)(W.Input,{label:"First Name",value:v.firstName,onChange:e=>F("firstName",e.target.value),required:!0}),(0,t.jsx)(W.Input,{label:"Last Name",value:v.lastName,onChange:e=>F("lastName",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(W.Input,{label:"Phone Number",type:"tel",value:v.phone,onChange:e=>F("phone",e.target.value),required:!0}),(0,t.jsx)(W.Input,{label:"Email (Optional)",type:"email",value:v.email,onChange:e=>F("email",e.target.value)})]}),(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)(w.Button,{type:"button",variant:"ghost",onClick:()=>g(!1),children:"Cancel"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(W.Input,{label:"Date",type:"date",value:R,onChange:e=>B(e.target.value),min:new Date().toISOString().split("T")[0],required:!0}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),(0,t.jsxs)("select",{value:I,onChange:e=>A(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select time"}),f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(W.Input,{label:"Party Size",type:"number",min:"1",max:"20",value:c.partySize,onChange:e=>D("partySize",parseInt(e.target.value)),required:!0}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),(0,t.jsxs)("select",{value:c.duration,onChange:e=>D("duration",parseInt(e.target.value)),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:90,children:"90 minutes"}),(0,t.jsx)("option",{value:120,children:"2 hours"}),(0,t.jsx)("option",{value:150,children:"2.5 hours"}),(0,t.jsx)("option",{value:180,children:"3 hours"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),(0,t.jsxs)("select",{value:c.source,onChange:e=>D("source",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"phone",children:"Phone"}),(0,t.jsx)("option",{value:"online",children:"Online"}),(0,t.jsx)("option",{value:"walk-in",children:"Walk-in"}),(0,t.jsx)("option",{value:"app",children:"Mobile App"})]})]}),(0,t.jsx)(W.Input,{label:"Special Occasion (Optional)",value:c.occasion||"",onChange:e=>D("occasion",e.target.value),placeholder:"Birthday, Anniversary, etc."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests"}),(0,t.jsx)("textarea",{value:c.specialRequests||"",onChange:e=>D("specialRequests",e.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Window seat, high chair, allergies, etc."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes"}),(0,t.jsx)("textarea",{value:c.notes||"",onChange:e=>D("notes",e.target.value),rows:2,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Staff notes (not visible to guest)"})]}),y.length>0&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsxs)("div",{className:"text-sm text-red-600",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Please fix the following errors:"}),(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1",children:y.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,t.jsx)(w.Button,{type:"button",variant:"ghost",onClick:L,disabled:b,children:"Cancel"}),(0,t.jsx)(w.Button,{type:"submit",disabled:b,className:"min-w-[120px]",children:b?"Creating...":"Create Reservation"})]})]})]})})}function E(e){var s,a;let{filters:i,onFiltersChange:l}=e;return(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(W.Input,{label:"Date",type:"date",value:i.date||"",onChange:e=>l({...i,date:e.target.value})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,t.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md",onChange:e=>l({...i,status:e.target.value?[e.target.value]:void 0}),children:[(0,t.jsx)("option",{value:"",children:"All Statuses"}),(0,t.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"seated",children:"Seated"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,t.jsx)("option",{value:"no-show",children:"No Show"})]})]}),(0,t.jsx)(W.Input,{label:"Min Party Size",type:"number",min:"1",value:(null==(s=i.partySize)?void 0:s.min)||"",onChange:e=>l({...i,partySize:{...i.partySize,min:parseInt(e.target.value)||void 0}})}),(0,t.jsx)(W.Input,{label:"Max Party Size",type:"number",min:"1",value:(null==(a=i.partySize)?void 0:a.max)||"",onChange:e=>l({...i,partySize:{...i.partySize,max:parseInt(e.target.value)||void 0}})})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(w.Button,{variant:"outline",onClick:()=>l({}),children:"Clear Filters"})})]})}function q(e){var a;let{diningArea:i,tables:l,isEditable:r=!1,selectedTableId:n,onTableSelect:d,onTableStatusChange:c,className:o=""}=e,m=(0,s.useRef)(null),[u,x]=(0,s.useState)(null),[h,g]=(0,s.useState)({x:0,y:0}),[v,p]=(0,s.useState)(null),j=(0,s.useCallback)(e=>{d&&d(e)},[d]),b=(0,s.useCallback)((e,t)=>{var s;if(!r)return;e.preventDefault();let a=null==(s=m.current)?void 0:s.getBoundingClientRect();if(!a)return;let i=e.clientX-a.left,l=e.clientY-a.top;x(t.id),g({x:i-t.x,y:l-t.y})},[r]),N=(0,s.useCallback)(e=>{if(!u||!m.current)return;let t=m.current.getBoundingClientRect(),s=e.clientX-t.left-h.x,a=e.clientY-t.top-h.y,i=document.getElementById("table-".concat(u));i&&(i.setAttribute("x",s.toString()),i.setAttribute("y",a.toString()))},[u,h]),T=(0,s.useCallback)(()=>{x(null),g({x:0,y:0})},[]);return(0,t.jsxs)(S.Card,{className:"p-4 ".concat(o),children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(C.Badge,{variant:"outline",className:"text-xs",children:["Floor ",i.floor]}),(0,t.jsxs)(C.Badge,{variant:"outline",className:"text-xs",children:[l.length," Tables"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 mt-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,t.jsx)("span",{children:"Available"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,t.jsx)("span",{children:"Occupied"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),(0,t.jsx)("span",{children:"Reserved"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),(0,t.jsx)("span",{children:"Cleaning"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),(0,t.jsx)("span",{children:"Maintenance"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,t.jsx)("span",{children:"Combined"})]})]})]}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden bg-white",children:(0,t.jsxs)("svg",{ref:m,width:"100%",height:"400",viewBox:"0 0 ".concat(i.layout.width," ").concat(i.layout.height),className:"bg-gray-50",onMouseMove:N,onMouseUp:T,onMouseLeave:T,children:[r&&(()=>{let e=[];for(let s=0;s<=i.layout.width;s+=20)e.push((0,t.jsx)("line",{x1:s,y1:0,x2:s,y2:i.layout.height,stroke:"#E5E7EB",strokeWidth:.5,opacity:.3},"v-".concat(s)));for(let s=0;s<=i.layout.height;s+=20)e.push((0,t.jsx)("line",{x1:0,y1:s,x2:i.layout.width,y2:s,stroke:"#E5E7EB",strokeWidth:.5,opacity:.3},"h-".concat(s)));return e})(),i.layout.backgroundImage&&(0,t.jsx)("image",{href:i.layout.backgroundImage,width:i.layout.width,height:i.layout.height,opacity:.3}),l.map(e=>(0,t.jsxs)("g",{id:"table-".concat(e.id),className:"cursor-pointer ".concat(r?"hover:opacity-80":""),onMouseDown:t=>r&&b(t,e),onClick:()=>j(e),onMouseEnter:()=>p(e.id),onMouseLeave:()=>p(null),children:[(e=>{let{x:s,y:a,width:i,height:l,shape:r}=e;if("round"!==r)return(0,t.jsx)("rect",{x:s,y:a,width:i,height:l,fill:f(e.status),stroke:n===e.id?"#3B82F6":"#374151",strokeWidth:n===e.id?3:1.5,rx:4,opacity:"maintenance"===e.status?.5:1});{let r=Math.min(i,l)/2;return(0,t.jsx)("circle",{cx:s+i/2,cy:a+l/2,r:r,fill:f(e.status),stroke:n===e.id?"#3B82F6":"#374151",strokeWidth:n===e.id?3:1.5,opacity:"maintenance"===e.status?.5:1})}})(e),(e=>{let s=y(e);return(0,t.jsx)("text",{x:s.x,y:s.y,textAnchor:"middle",dominantBaseline:"central",fontSize:"12",fontWeight:"600",fill:"white",className:"pointer-events-none select-none",children:e.number})})(e),v===e.id&&(e=>{let s=y(e);return(0,t.jsxs)("text",{x:s.x,y:s.y+15,textAnchor:"middle",dominantBaseline:"central",fontSize:"10",fill:"white",className:"pointer-events-none select-none",opacity:.8,children:[e.capacity," seats"]})})(e)]},e.id)),n&&l.find(e=>e.id===n)&&(0,t.jsx)("g",{className:"pointer-events-none",children:(()=>{let e=l.find(e=>e.id===n),s=y(e);return(0,t.jsx)("circle",{cx:s.x,cy:s.y,r:Math.max(e.width,e.height)/2+10,fill:"none",stroke:"#3B82F6",strokeWidth:2,strokeDasharray:"5,5",opacity:.7,children:(0,t.jsx)("animateTransform",{attributeName:"transform",type:"rotate",values:"0 ".concat(s.x," ").concat(s.y,";360 ").concat(s.x," ").concat(s.y),dur:"3s",repeatCount:"indefinite"})})})()})]})}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-6 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-green-600",children:l.filter(e=>"available"===e.status).length}),(0,t.jsx)("div",{className:"text-gray-600",children:"Available"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-red-600",children:l.filter(e=>"occupied"===e.status).length}),(0,t.jsx)("div",{className:"text-gray-600",children:"Occupied"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-amber-600",children:l.filter(e=>"reserved"===e.status).length}),(0,t.jsx)("div",{className:"text-gray-600",children:"Reserved"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-gray-600",children:l.filter(e=>"cleaning"===e.status).length}),(0,t.jsx)("div",{className:"text-gray-600",children:"Cleaning"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-purple-600",children:l.filter(e=>"maintenance"===e.status).length}),(0,t.jsx)("div",{className:"text-gray-600",children:"Maintenance"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-blue-600",children:l.filter(e=>"combined"===e.status).length}),(0,t.jsx)("div",{className:"text-gray-600",children:"Combined"})]})]}),n&&c&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Table ",null==(a=l.find(e=>e.id===n))?void 0:a.number," Actions:"]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>c(n,"available"),children:"Set Available"}),(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>c(n,"cleaning"),children:"Start Cleaning"}),(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>c(n,"maintenance"),children:"Maintenance"})]})]})})]})}function L(e){let{diningArea:s,tables:a,onTableUpdate:i}=e;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Floor Plan Editor"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Drag and drop to rearrange tables"})]}),(0,t.jsx)(q,{diningArea:s,tables:a,isEditable:!0,onTableStatusChange:(e,t)=>{let s=a.find(t=>t.id===e);s&&i&&i({...s,status:t})}})]})}var O=(0,B.createServerReference)("4024748d30c4fcef516363c66fa5b418d80eeaf8c7",B.callServer,void 0,B.findSourceMapURL,"addToWaitlistAction");function U(e){let{isOpen:a,onClose:i,onSuccess:l}=e,[r,n]=(0,s.useState)({partySize:2,estimatedWaitTime:30,quotedWaitTime:30}),[d,c]=(0,s.useState)({firstName:"",lastName:"",phone:""}),[o,m]=(0,s.useState)(!1),u=async e=>{e.preventDefault(),m(!0);try{let e=await O({...r,guest:d});e.success&&e.data&&(null==l||l(e.data))}catch(e){console.error("Failed to add to waitlist:",e)}finally{m(!1)}};return(0,t.jsx)(k.Modal,{isOpen:a,onClose:i,className:"max-w-md",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add to Waitlist"}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,t.jsx)(W.Input,{label:"First Name",value:d.firstName,onChange:e=>c(t=>({...t,firstName:e.target.value})),required:!0}),(0,t.jsx)(W.Input,{label:"Last Name",value:d.lastName,onChange:e=>c(t=>({...t,lastName:e.target.value})),required:!0}),(0,t.jsx)(W.Input,{label:"Phone Number",value:d.phone,onChange:e=>c(t=>({...t,phone:e.target.value})),required:!0}),(0,t.jsx)(W.Input,{label:"Party Size",type:"number",min:"1",max:"20",value:r.partySize,onChange:e=>n(t=>({...t,partySize:parseInt(e.target.value)})),required:!0}),(0,t.jsx)(W.Input,{label:"Quoted Wait Time (minutes)",type:"number",min:"5",max:"180",value:r.quotedWaitTime,onChange:e=>n(t=>({...t,quotedWaitTime:parseInt(e.target.value)})),required:!0}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,t.jsx)(w.Button,{variant:"ghost",onClick:i,disabled:o,children:"Cancel"}),(0,t.jsx)(w.Button,{type:"submit",disabled:o,children:o?"Adding...":"Add to Waitlist"})]})]})]})})}var G=(0,B.createServerReference)("604d883b7d27fa43d93da04432e8172984fbefa056",B.callServer,void 0,B.findSourceMapURL,"updateWaitlistEntryAction"),V=(0,B.createServerReference)("60372304174c5128ffdb48de6d0db7514f4ed30799",B.callServer,void 0,B.findSourceMapURL,"seatFromWaitlistAction");function Z(e){let{waitlist:a,guests:i,availableTables:l,onWaitlistUpdate:r,className:n=""}=e,[d,c]=(0,s.useState)(!1),[o,m]=(0,s.useState)({}),u=(0,s.useMemo)(()=>i.reduce((e,t)=>(e[t.id]=t,e),{}),[i]),x=(0,s.useMemo)(()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return e.filter(e=>"waiting"===e.status).map((e,s)=>{let a="vip"===e.priority?.5:"high"===e.priority?.75:1;return{...e,estimatedWaitTime:Math.max(5,Math.round(t/2*(s+1)*a))}})})(a.filter(e=>"waiting"===e.status),90),[a]),h=async(e,t,s)=>{m(t=>({...t,[e]:!0}));try{let a;switch(t){case"notify":a=await G(e,"notified");break;case"seat":if(!s)throw Error("Table ID required for seating");a=await V(e,s);break;case"cancel":a=await G(e,"cancelled");break;case"no-show":a=await G(e,"no-show")}a.success&&a.data&&r&&("waitlistEntry"in a.data?r(a.data.waitlistEntry):r(a.data))}catch(e){console.error("Waitlist action ".concat(t," failed:"),e)}finally{m(t=>({...t,[e]:!1}))}},g=e=>{let t=l.filter(t=>t.capacity>=e.partySize&&"available"===t.status);return 0===t.length?null:t.reduce((t,s)=>{let a=Math.abs(t.capacity-e.partySize);return Math.abs(s.capacity-e.partySize)<a?s:t})},p=x.filter(e=>"waiting"===e.status),f=a.filter(e=>"notified"===e.status),j=p.reduce((e,t)=>e+t.estimatedWaitTime,0),b=p.length>0?Math.round(j/p.length):0;return(0,t.jsxs)("div",{className:"space-y-4 ".concat(n),children:[(0,t.jsxs)(S.Card,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Digital Waitlist"}),(0,t.jsx)(w.Button,{onClick:()=>c(!0),children:"Add Walk-in"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:p.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Waiting"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:f.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Notified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-gray-600",children:[b,"m"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Wait"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:l.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Tables Ready"})]})]})]}),p.length>0&&(0,t.jsxs)(S.Card,{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:"Currently Waiting"}),(0,t.jsx)("div",{className:"space-y-3",children:p.map((e,s)=>{let a=u[e.guestId],i=g(e),l=o[e.id];return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg hover:shadow-sm transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-semibold",children:s+1}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:a?"".concat(a.firstName," ").concat(a.lastName):"Unknown Guest"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:(e=>{switch(e){case"vip":return"👑";case"high":return"⭐";case"normal":default:return"👥";case"low":return"⏳"}})(e.priority)}),(0,t.jsx)(C.Badge,{variant:"outline",style:{borderColor:N(e.priority),color:N(e.priority)},children:e.priority.toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[e.partySize," guests"]}),(0,t.jsx)("span",{children:null==a?void 0:a.phone}),(0,t.jsxs)("span",{children:["Added ",v(e.addedAt)]})]}),e.specialRequests&&(0,t.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Note: ",e.specialRequests]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"font-semibold text-amber-600",children:[e.estimatedWaitTime,"m"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["(quoted ",e.quotedWaitTime,"m)"]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>h(e.id,"notify"),disabled:l,children:l?"Notifying...":"Notify"}),i&&(0,t.jsx)(w.Button,{size:"sm",onClick:()=>h(e.id,"seat",i.id),disabled:l,children:l?"Seating...":"Seat at ".concat(i.number)}),(0,t.jsx)(w.Button,{size:"sm",variant:"ghost",onClick:()=>h(e.id,"cancel"),disabled:l,children:"Remove"})]})]})]},e.id)})})]}),f.length>0&&(0,t.jsxs)(S.Card,{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:"Notified Guests"}),(0,t.jsx)("div",{className:"space-y-3",children:f.map(e=>{let s=u[e.guestId],a=g(e),i=o[e.id],l=Math.floor((Date.now()-new Date(e.notifiedAt).getTime())/6e4);return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-amber-100 text-amber-600 rounded-full",children:"📱"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:s?"".concat(s.firstName," ").concat(s.lastName):"Unknown Guest"}),(0,t.jsx)(C.Badge,{variant:"outline",className:"border-amber-400 text-amber-600",children:"NOTIFIED"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[e.partySize," guests"]}),(0,t.jsxs)("span",{children:["Notified ",l,"m ago"]}),l>10&&(0,t.jsx)(C.Badge,{variant:"destructive",className:"text-xs",children:"Overdue"})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[a&&(0,t.jsx)(w.Button,{size:"sm",onClick:()=>h(e.id,"seat",a.id),disabled:i,children:i?"Seating...":"Seat at ".concat(a.number)}),(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>h(e.id,"no-show"),disabled:i,children:"No Show"})]})]},e.id)})})]}),0===p.length&&0===f.length&&(0,t.jsx)(S.Card,{className:"p-8 text-center",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"📋"}),(0,t.jsx)("div",{className:"text-lg font-medium mb-2",children:"No guests waiting"}),(0,t.jsx)("div",{className:"text-sm",children:"Walk-in guests will appear here when added to the waitlist."})]})}),d&&(0,t.jsx)(U,{isOpen:d,onClose:()=>c(!1),onSuccess:e=>{c(!1),r&&r(e)}})]})}function $(e){var s,a,i,l;let{guest:r,className:n=""}=e;return(0,t.jsxs)(S.Card,{className:"p-6 ".concat(n),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold",children:[r.firstName," ",r.lastName]}),(0,t.jsx)("p",{className:"text-gray-600",children:r.phone}),r.email&&(0,t.jsx)("p",{className:"text-gray-600",children:r.email})]}),(0,t.jsx)(C.Badge,{variant:"outline",children:function(e){switch(e){case"celebrity":return"Celebrity";case"vip":return"VIP";case"frequent":return"Frequent Guest";case"regular":return"Regular";default:return"Guest"}}(r.vipStatus)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:r.totalVisits}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Visits"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",r.totalSpent.toLocaleString()]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Spent"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:["$",r.averageSpend.toFixed(0)]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Average Spend"})]})]}),(r.preferences.seatingPreference||(null==(s=r.preferences.dietaryRestrictions)?void 0:s.length)||(null==(a=r.preferences.allergies)?void 0:a.length))&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Preferences & Notes"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[r.preferences.seatingPreference&&(0,t.jsxs)("div",{children:["Seating: ",r.preferences.seatingPreference]}),(null==(i=r.preferences.dietaryRestrictions)?void 0:i.length)&&(0,t.jsxs)("div",{children:["Dietary: ",r.preferences.dietaryRestrictions.join(", ")]}),(null==(l=r.preferences.allergies)?void 0:l.length)&&(0,t.jsxs)("div",{className:"text-red-600",children:["Allergies: ",r.preferences.allergies.join(", ")]})]})]})]})}var H=e.i(88949);function K(e){let{stats:s,className:a=""}=e,i=s.current.occupiedTables+s.current.availableTables>0?s.current.occupiedTables/(s.current.occupiedTables+s.current.availableTables)*100:0,l=s.today.totalReservations>0?s.today.seated/s.today.totalReservations*100:0,r=s.today.totalReservations>0?s.today.noShows/s.today.totalReservations*100:0;return(0,t.jsxs)("div",{className:"space-y-6 ".concat(a),children:[(0,t.jsxs)(S.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Performance"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(H.StatCard,{title:"Total Reservations",value:s.today.totalReservations,trend:s.today.totalReservations>0?"up":"neutral",className:"text-center"}),(0,t.jsx)(H.StatCard,{title:"Total Covers",value:s.today.totalCovers,subtitle:"".concat(s.today.averagePartySize.toFixed(1)," avg party size"),trend:"up",className:"text-center"}),(0,t.jsx)(H.StatCard,{title:"Seated Today",value:s.today.seated,subtitle:"".concat(l.toFixed(1),"% turnover rate"),trend:l>85?"up":l>70?"neutral":"down",className:"text-center"}),(0,t.jsx)(H.StatCard,{title:"Walk-ins",value:s.today.walkIns,subtitle:"Without reservation",trend:"neutral",className:"text-center"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(S.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Status"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Table Occupancy"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[s.current.occupiedTables," of ",s.current.occupiedTables+s.current.availableTables," tables"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:[i.toFixed(0),"%"]}),(0,t.jsx)("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",title:"".concat(s.current.occupiedTables," occupied, ").concat(s.current.availableTables," available"),children:(0,t.jsx)("div",{className:"h-full transition-all duration-300 ".concat(i>90?"bg-red-500":i>70?"bg-amber-500":"bg-green-500"),style:{width:"".concat(i,"%")}})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Waitlist"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[s.current.averageWaitTime," min average wait"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-amber-600",children:s.current.waitlistSize}),s.current.waitlistSize>10&&(0,t.jsx)(C.Badge,{variant:"destructive",className:"text-xs",children:"HIGH"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Next Available"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Earliest table opening"})]}),(0,t.jsx)("div",{className:"text-lg font-semibold text-green-600",children:s.current.nextAvailableSlot?v(s.current.nextAvailableSlot):"Now"})]})]})]}),(0,t.jsxs)(S.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Issues"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-red-700",children:"No Shows"}),(0,t.jsxs)("div",{className:"text-xs text-red-600",children:[r.toFixed(1),"% of reservations"]})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-red-600",children:s.today.noShows})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-amber-700",children:"Pending"}),(0,t.jsx)("div",{className:"text-xs text-amber-600",children:"Need confirmation"})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-amber-600",children:s.today.pending})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-green-700",children:"Successfully Seated"}),(0,t.jsxs)("div",{className:"text-xs text-green-600",children:[l.toFixed(1),"% success rate"]})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-green-600",children:s.today.seated})]})]})]})]}),(0,t.jsxs)(S.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Forecast"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:s.forecast.remainingCapacity}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Remaining Capacity"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Available covers"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600 mb-2",children:s.forecast.expectedTurnover}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Expected Turnover"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Tables to turn"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600 mb-2",children:["$",s.forecast.projectedRevenue.toLocaleString()]}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Projected Revenue"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Based on bookings"})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Revenue Progress"}),(0,t.jsxs)("span",{className:"text-gray-900 font-medium",children:["$",Math.round(.6*s.forecast.projectedRevenue).toLocaleString()," / $",s.forecast.projectedRevenue.toLocaleString()]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-500",style:{width:"60%"}})}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"60% of projected revenue achieved"})]})]}),(0,t.jsxs)(S.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Insights"}),(0,t.jsxs)("div",{className:"space-y-3",children:[i>90&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsx)("div",{className:"text-red-500",children:"⚠️"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-red-700",children:"High Occupancy Alert"}),(0,t.jsxs)("div",{className:"text-xs text-red-600",children:["Restaurant is at ",i.toFixed(0),"% capacity. Consider managing walk-ins carefully."]})]})]}),s.current.waitlistSize>5&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.jsx)("div",{className:"text-amber-500",children:"📋"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-amber-700",children:"Long Waitlist"}),(0,t.jsxs)("div",{className:"text-xs text-amber-600",children:[s.current.waitlistSize," guests waiting with ",s.current.averageWaitTime," min average wait time."]})]})]}),r>15&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsx)("div",{className:"text-red-500",children:"❌"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-red-700",children:"High No-Show Rate"}),(0,t.jsxs)("div",{className:"text-xs text-red-600",children:[r.toFixed(1),"% no-show rate today. Consider implementing confirmation reminders."]})]})]}),l>90&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)("div",{className:"text-green-500",children:"✅"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-green-700",children:"Excellent Performance"}),(0,t.jsxs)("div",{className:"text-xs text-green-600",children:[l.toFixed(1),"% of reservations were successfully seated. Great job!"]})]})]}),s.today.walkIns>.3*s.today.totalReservations&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)("div",{className:"text-blue-500",children:"👥"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-blue-700",children:"High Walk-in Volume"}),(0,t.jsxs)("div",{className:"text-xs text-blue-600",children:[s.today.walkIns," walk-ins today (",(s.today.walkIns/(s.today.totalReservations+s.today.walkIns)*100).toFixed(0),"% of total guests)."]})]})]})]})]})]})}function Q(e){let{reservations:s,selectedDate:a}=e;return(0,t.jsxs)(S.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reservation Timeline"}),(0,t.jsx)("div",{className:"space-y-2",children:["17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"].map(e=>{let a=s.filter(t=>v(t.dateTime)===e);return(0,t.jsxs)("div",{className:"flex items-center space-x-4 py-2 border-b",children:[(0,t.jsx)("div",{className:"w-16 text-sm font-medium",children:e}),(0,t.jsx)("div",{className:"flex-1",children:0===a.length?(0,t.jsx)("span",{className:"text-gray-400",children:"Available"}):(0,t.jsx)("div",{className:"flex space-x-2",children:a.map(e=>(0,t.jsxs)("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:[e.partySize," guests"]},e.id))})})]},e)})})]})}function J(e){let{reservations:s,selectedDate:a,onDateSelect:i}=e;return(0,t.jsxs)(S.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Calendar View"}),(0,t.jsx)("div",{className:"text-gray-500 text-center py-8",children:"Calendar component would be implemented here with date selection and reservation indicators"})]})}function X(e){let{onReservationCreated:a}=e,[i,l]=(0,s.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reservations & Tables"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage reservations, waitlist, and table assignments"})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(w.Button,{variant:"outline",children:"Export"}),(0,t.jsx)(w.Button,{onClick:()=>l(!0),children:"New Reservation"})]})]}),(0,t.jsx)(F,{isOpen:i,onClose:()=>l(!1),onSuccess:a})]})}var Y=e.i(22235);function _(e){let{activeTab:s,onTabChange:a}=e;return(0,t.jsx)(Y.SimpleTabs,{tabs:[{id:"dashboard",label:"Dashboard"},{id:"reservations",label:"Reservations"},{id:"floor-plan",label:"Floor Plan"},{id:"waitlist",label:"Waitlist"},{id:"guests",label:"Guest Database"}],activeTab:s,onTabChange:a,className:"mb-6"})}function ee(e){let{onCreateReservation:s,onAddWalkIn:a,onExportData:i}=e;return(0,t.jsxs)(S.Card,{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-md font-semibold mb-4",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(w.Button,{className:"w-full justify-start",onClick:s,children:"+ New Reservation"}),(0,t.jsx)(w.Button,{variant:"outline",className:"w-full justify-start",onClick:a,children:"+ Add Walk-in"}),(0,t.jsx)(w.Button,{variant:"outline",className:"w-full justify-start",onClick:i,children:"📊 Export Data"})]})]})}function et(e){let{onUpdate:a}=e,[i,l]=(0,s.useState)([]);return((0,s.useEffect)(()=>{var e;return e=e=>{l(t=>[e,...t.slice(0,4)]),null==a||a(e)},g.push(e),()=>{g=g.filter(t=>t!==e)}},[a]),0===i.length)?null:(0,t.jsxs)(S.Card,{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-md font-semibold mb-2",children:"Live Updates"}),(0,t.jsx)("div",{className:"space-y-2",children:i.map((e,s)=>(0,t.jsxs)("div",{className:"text-sm p-2 bg-blue-50 rounded border-l-2 border-blue-400",children:[(0,t.jsxs)("div",{className:"font-medium",children:[e.type," ",e.action]}),(0,t.jsx)("div",{className:"text-gray-600 text-xs",children:new Date(e.timestamp).toLocaleTimeString()})]},"".concat(e.timestamp,"-").concat(s)))})]})}function es(){let[e,a]=(0,s.useState)("dashboard"),[i,l]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[h,g]=(0,s.useState)([]),[v,p]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[b,N]=(0,s.useState)(null),[y,w]=(0,s.useState)({}),[S,C]=(0,s.useState)(new Date().toISOString().split("T")[0]),[T,k]=(0,s.useState)(""),[R,B]=(0,s.useState)(null),[I,A]=(0,s.useState)(!0),[z,M]=(0,s.useState)(null);(0,s.useEffect)(()=>{W()},[]),(0,s.useEffect)(()=>{P()},[y]);let W=async()=>{try{A(!0),M(null);let[e,t,s,a,i,r]=await Promise.all([o(y),u(),c(),d(),m(),x()]);l(e.data),n(t),g(s),p(a),j(i),N(r),a.length>0&&!T&&k(a[0].id)}catch(e){console.error("Failed to load data:",e),M("Failed to load reservation data. Please try again.")}finally{A(!1)}},P=async()=>{try{let e=await o(y);l(e.data)}catch(e){console.error("Failed to load reservations:",e)}},F=e=>{l(t=>t.map(t=>t.id===e.id?e:t)),x().then(N)},q=e=>{j(t=>t.map(t=>t.id===e.id?e:t))},O=v.find(e=>e.id===T),U=h.filter(e=>e.diningAreaId===T),G=h.filter(e=>"available"===e.status),V=i.filter(e=>e.dateTime.startsWith(S));return I?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-300 border-t-blue-600 mx-auto mb-4"}),(0,t.jsx)("div",{className:"text-gray-600",children:"Loading reservations..."})]})}):z?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-red-600 mb-2",children:"⚠️ Error"}),(0,t.jsx)("div",{className:"text-gray-600 mb-4",children:z}),(0,t.jsx)("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try Again"})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(X,{onReservationCreated:F}),(0,t.jsx)(_,{activeTab:e,onTabChange:e=>{a(e)}}),"dashboard"===e&&b&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsx)(K,{stats:b})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(ee,{onCreateReservation:()=>{},onAddWalkIn:()=>{a("waitlist")}}),(0,t.jsx)(et,{onUpdate:e=>{switch(e.type){case"reservation":"update"===e.action&&F(e.data);break;case"table":"update"===e.action&&g(t=>t.map(t=>t.id===e.data.id?e.data:t));break;case"waitlist":"update"===e.action&&q(e.data)}}})]}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(Q,{reservations:V,selectedDate:S})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(J,{reservations:i,selectedDate:S,onDateSelect:C})})]}),"reservations"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(E,{filters:y,onFiltersChange:w}),(0,t.jsx)(D,{reservations:i,guests:r,tables:h,onReservationUpdate:F})]}),"floor-plan"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Dining Area:"}),(0,t.jsx)("select",{value:T,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:v.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[U.length," tables"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[null==O?void 0:O.capacity," capacity"]})]})]}),O&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsx)(L,{diningArea:O,tables:U,onTableUpdate:e=>{g(t=>t.map(t=>t.id===e.id?e:t))}})}),(0,t.jsx)("div",{className:"space-y-4",children:R&&(0,t.jsx)("div",{className:"text-sm text-gray-600",children:(0,t.jsx)("div",{className:"font-medium mb-2",children:"Selected Table"})})})]})]}),"waitlist"===e&&(0,t.jsx)(Z,{waitlist:f,guests:r,availableTables:G,onWaitlistUpdate:q}),"guests"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("div",{className:"text-lg font-medium mb-2",children:"Guest Database"}),(0,t.jsx)("div",{className:"text-sm",children:"Comprehensive guest management features would be implemented here, including guest profiles, visit history, preferences, and CRM functionality."})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.slice(0,6).map(e=>(0,t.jsx)($,{guest:e},e.id))})]})]})}B.callServer,B.findSourceMapURL}]);