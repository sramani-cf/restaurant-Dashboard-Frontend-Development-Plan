(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41680,e=>{"use strict";e.s(["default",()=>Z],41680);var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(47167),i=e.i(7670),l=e.i(19056);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.twMerge)((0,i.clsx)(t))}let o={getElapsedTime:e=>Math.floor((Date.now()-e.getTime())/1e3),formatElapsedTime:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60;return t||r>0?"".concat(r.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(s.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))},formatTime:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleTimeString("en-US",{hour12:!t,hour:"2-digit",minute:"2-digit",...t?{}:{second:"2-digit"}})}},c={calculateUrgency:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:900;return e>=r?"urgent":e>=t?"warning":"normal"},getUrgencyColor:e=>{switch(e){case"urgent":return"text-red-500 border-red-500 bg-red-500/20";case"warning":return"text-yellow-500 border-yellow-500 bg-yellow-500/20";default:return"text-white border-gray-600 bg-gray-900/50"}},getPriorityColor:e=>{switch(e){case"fire":return"text-red-600 bg-red-600/30 border-red-600";case"rush":return"text-orange-500 bg-orange-500/30 border-orange-500";case"urgent":return"text-yellow-500 bg-yellow-500/30 border-yellow-500";default:return"text-white bg-gray-800/30 border-gray-600"}},getStatusColor:e=>{switch(e){case"ready":return"text-green-500 bg-green-500/20 border-green-500";case"preparing":return"text-blue-500 bg-blue-500/20 border-blue-500";case"completed":return"text-gray-400 bg-gray-400/20 border-gray-400";case"cancelled":return"text-red-400 bg-red-400/20 border-red-400";default:return"text-white bg-gray-800/20 border-gray-600"}}},d={createTicketsFromOrder:e=>{let t=new Map;return e.items.forEach(e=>{t.has(e.station)||t.set(e.station,[]),t.get(e.station).push(e)}),Array.from(t.entries()).map((t,r)=>{let[s,a]=t;return{id:"".concat(e.id,"-").concat(s),orderId:e.id,order:e,station:s,status:e.status,urgency:"normal",elapsedTime:o.getElapsedTime(e.createdAt),cookTime:Math.max(...a.map(e=>e.cookTime)),startTime:e.createdAt,position:r,items:a,isFired:"fire"===e.priority||"rush"===e.priority}})},calculateTotalCookTime:e=>{let t=new Map;return e.forEach(e=>{let r=t.get(e.station)||0;t.set(e.station,Math.max(r,e.cookTime))}),Math.max(...Array.from(t.values()))},getAllergens:e=>{let t=new Set;return e.forEach(e=>{var r;null==(r=e.allergens)||r.forEach(e=>t.add(e)),e.modifiers.forEach(e=>{})}),Array.from(t)},hasHighPriorityAllergens:e=>{let t=["nuts","shellfish","eggs","dairy","gluten"];return d.getAllergens(e).some(e=>t.includes(e.toLowerCase()))},sortTickets:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";return[...e].sort((e,r)=>{if(e.isFired&&!r.isFired)return -1;if(!e.isFired&&r.isFired)return 1;switch(t){case"priority":let s={fire:0,rush:1,urgent:2,normal:3},a=s[e.order.priority],i=s[r.order.priority];if(a!==i)return a-i;break;case"table":if(e.order.tableNumber&&r.order.tableNumber){let t="string"==typeof e.order.tableNumber?parseInt(e.order.tableNumber):e.order.tableNumber,s="string"==typeof r.order.tableNumber?parseInt(r.order.tableNumber):r.order.tableNumber;if(t!==s)return t-s}break;case"server":if(e.order.serverName&&r.order.serverName){let t=e.order.serverName.localeCompare(r.order.serverName);if(0!==t)return t}}return e.startTime.getTime()-r.startTime.getTime()})}},m={getCompletionPercentage:e=>0===e.totalQuantity?0:Math.round(e.completedQuantity/e.totalQuantity*100)},u={playSound:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;try{let r=new Audio;switch(e){case"newOrder":r.src="/sounds/new-order.mp3";break;case"urgent":r.src="/sounds/urgent.mp3";break;case"ready":r.src="/sounds/ready.mp3";break;case"bump":r.src="/sounds/bump.mp3"}r.volume=Math.max(0,Math.min(1,t)),r.play().catch(()=>{})}catch(e){}}},g={shortcuts:{KeyF:"fire-order",KeyB:"bump-ticket",KeyR:"recall-ticket",KeyS:"switch-station",KeyA:"all-day-view",KeyH:"help",Escape:"exit-modal",Space:"toggle-play-pause",ArrowLeft:"previous-ticket",ArrowRight:"next-ticket",ArrowUp:"previous-station",ArrowDown:"next-station"},handleKeyPress:(e,t)=>{let r=e.code||e.key,s=g.shortcuts[r];return!!s&&!!t[s]&&(e.preventDefault(),t[s](),!0)}},h={formatModifiers:e=>e.map(e=>e.value?"".concat(e.name,": ").concat(e.value):e.name).join(", ")},x={debounce:(e,t)=>{let r;return function(){for(var s=arguments.length,a=Array(s),i=0;i<s;i++)a[i]=arguments[i];clearTimeout(r),r=setTimeout(()=>e(...a),t)}}};var p=e.i(95187),b=(0,p.createServerReference)("40ec2fff4e95cd113e92ae237679821c84f117fa79",p.callServer,void 0,p.findSourceMapURL,"bumpTicket"),y=(0,p.createServerReference)("40d4ac634a2b4e85aa0700987c312269e94009d30f",p.callServer,void 0,p.findSourceMapURL,"recallTicket"),f=(0,p.createServerReference)("409f6b3900b971c76f4bf00ae1e3591795aab142ab",p.callServer,void 0,p.findSourceMapURL,"fireTicket"),v=(0,p.createServerReference)("60377f8c5f870cb7effb0ad818dbe92c66db40386b",p.callServer,void 0,p.findSourceMapURL,"changeTicketPriority");function j(e){let{ticket:s,config:a,onBump:i,onRecall:l,onFire:d,onPriorityChange:m,className:u}=e,[g,x]=(0,r.useState)(s.elapsedTime),[p,j]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=setInterval(()=>{x(o.getElapsedTime(s.startTime))},1e3);return()=>clearInterval(e)},[s.startTime]);let S=c.calculateUrgency(g);c.getUrgencyColor(S);let T=c.getPriorityColor(s.order.priority);c.getStatusColor(s.status);let A=(0,r.useCallback)(async()=>{j(!0),C("bump");try{await b(s.id),i(s.id)}catch(e){console.error("Failed to bump ticket:",e)}finally{j(!1),C(null)}},[s.id,i]),E=(0,r.useCallback)(async()=>{j(!0),C("recall");try{await y(s.id),l(s.id)}catch(e){console.error("Failed to recall ticket:",e)}finally{j(!1),C(null)}},[s.id,l]),D=(0,r.useCallback)(async()=>{j(!0),C("fire");try{await f(s.id),d(s.id)}catch(e){console.error("Failed to fire ticket:",e)}finally{j(!1),C(null)}},[s.id,d]),M=(0,r.useCallback)(async e=>{j(!0),C("priority");try{await v(s.id,e),m(s.id,e)}catch(e){console.error("Failed to change priority:",e)}finally{j(!1),C(null)}},[s.id,m]),I=o.formatElapsedTime(g,g>=3600);return(0,t.jsxs)("div",{className:n("kds-ticket relative","bg-gray-900 border-2 rounded-lg p-4","transition-all duration-300","urgent"===S&&"kds-urgent","warning"===S&&"kds-warning","normal"===S&&"kds-ticket-normal",s.isFired&&"ring-2 ring-red-500",s.isRecalled&&"ring-2 ring-yellow-500","completed"===s.status&&"opacity-75",p&&"pointer-events-none",u),"data-ticket-id":s.id,"data-urgency":S,tabIndex:0,role:"button","aria-label":"Order ".concat(s.order.displayNumber," for ").concat(a.showTable&&s.order.tableNumber?"table ".concat(s.order.tableNumber):s.order.customer.name||"customer"),children:[p&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)(N,{}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:["bump"===k&&"Completing...","recall"===k&&"Recalling...","fire"===k&&"Firing...","priority"===k&&"Updating..."]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white kds-text-high-contrast",children:s.order.displayNumber}),"normal"!==s.order.priority&&(0,t.jsx)("div",{className:n("px-2 py-1 text-xs font-bold rounded uppercase tracking-wide",T),children:s.order.priority}),s.isFired&&(0,t.jsx)("div",{className:"text-red-500 animate-pulse",title:"FIRED ORDER",children:"ðŸ”¥"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:n("text-lg font-mono font-bold","urgent"===S?"text-red-400":"warning"===S?"text-yellow-400":"text-white"),children:I}),a.showTimer&&(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["Target: ",s.cookTime,"min"]})]})]}),(0,t.jsxs)("div",{className:"mb-3 space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[a.showCustomer&&s.order.customer.name&&(0,t.jsxs)("div",{className:"text-gray-300 truncate",children:["Customer: ",(0,t.jsx)("span",{className:"text-white",children:s.order.customer.name})]}),a.showTable&&s.order.tableNumber&&(0,t.jsxs)("div",{className:"text-gray-300 flex-shrink-0",children:["Table: ",(0,t.jsx)("span",{className:"text-white font-semibold",children:s.order.tableNumber})]})]}),a.showServer&&s.order.serverName&&(0,t.jsxs)("div",{className:"text-sm text-gray-300",children:["Server: ",(0,t.jsx)("span",{className:"text-white",children:s.order.serverName})]}),a.showSource&&(0,t.jsxs)("div",{className:"text-sm text-gray-300",children:["Source: ",(0,t.jsx)("span",{className:"text-white capitalize",children:s.order.source})]})]}),(0,t.jsx)("div",{className:"space-y-2 mb-4",children:s.items.map((e,r)=>(0,t.jsx)("div",{className:"border-t border-gray-700 pt-2 first:border-t-0 first:pt-0",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-semibold text-white kds-text-kitchen",children:[e.quantity,"x ",e.name]}),e.isRush&&(0,t.jsx)("span",{className:"text-xs bg-red-600 text-white px-1 py-0.5 rounded font-bold",children:"RUSH"})]}),e.modifiers.length>0&&(0,t.jsx)("div",{className:"text-sm text-yellow-200 mt-1 pl-4",children:h.formatModifiers(e.modifiers)}),e.specialInstructions&&(0,t.jsxs)("div",{className:"text-sm text-cyan-200 mt-1 pl-4 font-medium",children:["Note: ",e.specialInstructions]}),a.showAllergies&&e.allergens&&e.allergens.length>0&&(0,t.jsxs)("div",{className:"text-sm text-red-300 mt-1 pl-4 font-bold",children:["âš ï¸ Allergens: ",e.allergens.join(", ")]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 ml-2 flex-shrink-0",children:[e.cookTime,"min"]})]})},"".concat(e.id,"-").concat(r)))}),s.order.specialInstructions&&(0,t.jsxs)("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-500 rounded p-2 mb-4",children:[(0,t.jsx)("div",{className:"text-xs text-blue-300 font-semibold mb-1",children:"SPECIAL INSTRUCTIONS:"}),(0,t.jsx)("div",{className:"text-sm text-white",children:s.order.specialInstructions})]}),a.showAllergies&&s.order.allergenWarnings.length>0&&(0,t.jsxs)("div",{className:"bg-red-900 bg-opacity-30 border border-red-500 rounded p-2 mb-4",children:[(0,t.jsx)("div",{className:"text-xs text-red-300 font-bold mb-1",children:"âš ï¸ ALLERGEN WARNINGS:"}),(0,t.jsx)("div",{className:"text-sm text-red-200 font-semibold",children:s.order.allergenWarnings.join(", ").toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:["completed"!==s.status&&(0,t.jsx)("button",{onClick:A,disabled:p,className:n("kds-button flex-1 bg-green-600 hover:bg-green-500","text-white font-bold py-3 px-4 rounded","disabled:opacity-50 disabled:cursor-not-allowed","focus:outline-none focus:ring-2 focus:ring-green-400","active:transform active:scale-95"),"aria-label":"Complete this order",children:"âœ“ BUMP"}),"completed"===s.status&&(0,t.jsx)("button",{onClick:E,disabled:p,className:n("kds-button flex-1 bg-yellow-600 hover:bg-yellow-500","text-white font-bold py-3 px-4 rounded","disabled:opacity-50 disabled:cursor-not-allowed","focus:outline-none focus:ring-2 focus:ring-yellow-400","active:transform active:scale-95"),"aria-label":"Recall this completed order",children:"â†º RECALL"}),!s.isFired&&"completed"!==s.status&&(0,t.jsx)("button",{onClick:D,disabled:p,className:n("kds-button bg-red-600 hover:bg-red-500","text-white font-bold py-3 px-3 rounded","disabled:opacity-50 disabled:cursor-not-allowed","focus:outline-none focus:ring-2 focus:ring-red-400","active:transform active:scale-95"),"aria-label":"Mark as urgent (fire)",title:"Fire Order (Mark as Urgent)",children:"ðŸ”¥"}),(0,t.jsx)(w,{currentPriority:s.order.priority,onPriorityChange:M,disabled:p})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-gray-700 text-xs text-gray-400",children:[(0,t.jsxs)("div",{children:["Started: ",o.formatTime(s.startTime)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[s.completedTime&&(0,t.jsxs)("div",{children:["Completed: ",o.formatTime(s.completedTime)]}),(0,t.jsx)("div",{className:n("w-2 h-2 rounded-full","completed"===s.status?"bg-green-500":"preparing"===s.status?"bg-blue-500":"bg-gray-500")})]})]})]})}function w(e){let{currentPriority:s,onPriorityChange:a,disabled:i}=e,[l,o]=(0,r.useState)(!1),c=[{value:"normal",label:"Normal",color:"bg-gray-600"},{value:"urgent",label:"Urgent",color:"bg-yellow-600"},{value:"rush",label:"Rush",color:"bg-orange-600"},{value:"fire",label:"Fire",color:"bg-red-600"}],d=c.find(e=>e.value===s);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>o(!l),disabled:i,className:n("kds-button px-3 py-3 rounded text-white font-medium text-sm",(null==d?void 0:d.color)||"bg-gray-600","hover:opacity-80 disabled:opacity-50","focus:outline-none focus:ring-2 focus:ring-blue-400"),"aria-label":"Change priority from ".concat(s),title:"Change Priority",children:"âš¡"}),l&&(0,t.jsx)("div",{className:"absolute bottom-full right-0 mb-2 bg-gray-800 border border-gray-600 rounded shadow-lg z-20",children:c.map(e=>(0,t.jsxs)("button",{onClick:()=>{a(e.value),o(!1)},className:n("w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700","flex items-center gap-2",e.value===s&&"bg-gray-700"),children:[(0,t.jsx)("div",{className:n("w-2 h-2 rounded-full",e.color)}),e.label,e.value===s&&" âœ“"]},e.value))})]})}function N(){return(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-white rounded-full animate-spin"})}function k(e){let{station:s,tickets:a,config:i,onBump:l,onRecall:o,onFire:c,onPriorityChange:m,className:u,showHeader:g=!0,autoScroll:h=!0}=e,[x,p]=(0,r.useState)(i.sortBy),[b,y]=(0,r.useState)(null),f=(0,r.useRef)(null),v=(0,r.useRef)(a.length),w=a.filter(e=>i.stations.includes(e.station)).filter(e=>i.showCompleted||"completed"!==e.status),N=d.sortTickets(w,x);(0,r.useEffect)(()=>{if(h&&i.autoScroll&&N.length>v.current){let e=f.current;e&&e.scrollTo({top:0,behavior:"smooth"})}v.current=N.length},[N.length,h,i.autoScroll]);let k=(0,r.useCallback)(e=>{if(!b)return;let t=N.findIndex(e=>e.id===b),r=t;switch(e.key){case"ArrowUp":e.preventDefault(),r=Math.max(0,t-1);break;case"ArrowDown":e.preventDefault(),r=Math.min(N.length-1,t+1);break;case"ArrowLeft":e.preventDefault(),r=Math.max(0,t-i.maxTicketsPerColumn);break;case"ArrowRight":e.preventDefault(),r=Math.min(N.length-1,t+i.maxTicketsPerColumn);break;case"Enter":case" ":e.preventDefault(),l(b);break;case"f":case"F":e.preventDefault(),c(b);break;case"r":case"R":e.preventDefault(),o(b);break;case"Escape":e.preventDefault(),y(null)}r!==t&&N[r]&&y(N[r].id)},[b,N,i.maxTicketsPerColumn,l,c,o]);(0,r.useEffect)(()=>(document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)),[k]);let A={total:N.length,pending:N.filter(e=>"pending"===e.status).length,preparing:N.filter(e=>"preparing"===e.status).length,ready:N.filter(e=>"ready"===e.status).length,completed:N.filter(e=>"completed"===e.status).length,urgent:N.filter(e=>"urgent"===e.urgency).length,overCapacity:N.length>s.maxCapacity},E=[],D=Math.ceil(N.length/i.columns);for(let e=0;e<i.columns;e++){let t=e*D,r=Math.min(t+D,N.length),s=N.slice(t,r);(s.length>0||0===e)&&E.push(s)}return(0,t.jsxs)("div",{className:n("kds-station-view h-full flex flex-col",A.overCapacity&&"ring-2 ring-red-500",u),"data-station":s.id,"data-ticket-count":N.length,children:[g&&(0,t.jsx)(C,{station:s,metrics:A,config:i,sortBy:x,onSortChange:p}),(0,t.jsx)("div",{ref:f,className:n("flex-1 kds-ticket-grid overflow-y-auto",i.autoScroll&&"kds-auto-scroll","kds-ticket-grid-".concat(i.columns)),style:{gridTemplateColumns:"repeat(".concat(i.columns,", 1fr)")},children:E.map((e,r)=>(0,t.jsxs)("div",{className:"space-y-4","data-column":r,children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-400 font-medium",children:["Column ",r+1]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.length," tickets"]})]}),e.map(e=>(0,t.jsx)(j,{ticket:e,config:i,onBump:l,onRecall:o,onFire:c,onPriorityChange:m,className:n(b===e.id&&"ring-2 ring-blue-500","cursor-pointer"),onClick:()=>y(e.id)},e.id)),0===e.length&&0===r&&(0,t.jsx)(T,{station:s}),e.length<i.maxTicketsPerColumn&&(0,t.jsx)("div",{className:"flex-1"})]},r))}),(0,t.jsx)(S,{station:s,metrics:A,config:i,ticketCount:N.length})]})}function C(e){let{station:r,metrics:s,config:a,sortBy:i,onSortChange:l}=e,o=Math.round(s.total/r.maxCapacity*100);return(0,t.jsxs)("div",{className:"kds-no-print bg-gray-900 border-b border-gray-700 p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:r.color}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white kds-text-high-contrast",children:r.displayName}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:[s.total,"/",r.maxCapacity," orders",o>100&&(0,t.jsx)("span",{className:"ml-2 text-red-400 font-bold",children:"OVER CAPACITY"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[s.urgent>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-red-400 font-bold",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,t.jsxs)("span",{children:[s.urgent," urgent"]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,t.jsx)("span",{className:"text-blue-400",children:s.preparing})," preparing â€¢"," ",(0,t.jsx)("span",{className:"text-green-400",children:s.ready})," ready"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Sort by:"}),(0,t.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm text-white",children:[(0,t.jsx)("option",{value:"time",children:"Time"}),(0,t.jsx)("option",{value:"priority",children:"Priority"}),(0,t.jsx)("option",{value:"table",children:"Table"}),(0,t.jsx)("option",{value:"server",children:"Server"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-16 bg-gray-700 rounded-full h-2",children:(0,t.jsx)("div",{className:n("h-full rounded-full transition-all duration-500",o>100?"bg-red-500":o>80?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,o),"%")}})}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 min-w-[3rem]",children:[o,"%"]})]})]})]})}function S(e){let{station:r,metrics:s,config:a,ticketCount:i}=e;return(0,t.jsxs)("div",{className:"kds-no-print bg-gray-900 border-t border-gray-700 p-2 flex items-center justify-between text-sm text-gray-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{children:["Average time: ",r.averageCookTime,"min"]}),(0,t.jsxs)("div",{children:["Capacity: ",i,"/",r.maxCapacity]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{children:["Last updated: ",new Date().toLocaleTimeString()]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:n("w-2 h-2 rounded-full",s.total>0?"bg-green-500":"bg-gray-500")}),(0,t.jsxs)("span",{children:["Station ",r.isActive?"Active":"Inactive"]})]})]})]})}function T(e){let{station:r}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",role:"img","aria-label":"Empty state",children:r.icon}),(0,t.jsxs)("div",{className:"text-xl font-bold text-gray-300 mb-2",children:["No orders for ",r.displayName]}),(0,t.jsx)("div",{className:"text-gray-500 max-w-md",children:"New orders will appear here automatically. The station is ready and waiting for incoming tickets."}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-gray-400",children:["Capacity: 0/",r.maxCapacity," â€¢ Average time: ",r.averageCookTime," minutes"]})]})}function A(e){let{stations:r,tickets:s,config:a,onBump:i,onRecall:l,onFire:o,onPriorityChange:c,className:d}=e;return(0,t.jsx)("div",{className:n("kds-multi-station-view grid gap-4",d),children:r.map(e=>{let n=s.filter(t=>t.station===e.id);return(0,t.jsx)(k,{station:e,tickets:n,config:{...a,stations:[e.id],columns:Math.max(1,Math.floor(a.columns/r.length))},onBump:i,onRecall:l,onFire:o,onPriorityChange:c,showHeader:r.length>1},e.id)})})}let E={grill:{id:"grill",name:"grill",displayName:"Grill",color:"#dc2626",icon:"ðŸ”¥",position:1,isActive:!0,maxCapacity:12,averageCookTime:8,specialInstructions:["Check internal temperature","Let meat rest before plating","Clean grill between orders"]},fryer:{id:"fryer",name:"fryer",displayName:"Fryer",color:"#d97706",icon:"ðŸŸ",position:2,isActive:!0,maxCapacity:10,averageCookTime:5,specialInstructions:["Preheat oil to correct temperature","Do not overcrowd basket","Drain properly before plating"]},salad:{id:"salad",name:"salad",displayName:"Salad",color:"#059669",icon:"ðŸ¥—",position:3,isActive:!0,maxCapacity:15,averageCookTime:3,specialInstructions:["Check produce freshness","Use separate cutting boards","Keep ingredients cold"]},expo:{id:"expo",name:"expo",displayName:"Expo",color:"#7c3aed",icon:"ðŸ½ï¸",position:4,isActive:!0,maxCapacity:20,averageCookTime:2,specialInstructions:["Check order completeness","Verify special requests","Ensure proper presentation"]},pantry:{id:"pantry",name:"pantry",displayName:"Pantry",color:"#0369a1",icon:"ðŸ¥ª",position:5,isActive:!0,maxCapacity:8,averageCookTime:4,specialInstructions:["Check sandwich construction","Toast bread evenly","Use proper portion sizes"]},dessert:{id:"dessert",name:"dessert",displayName:"Dessert",color:"#be185d",icon:"ðŸ°",position:6,isActive:!0,maxCapacity:6,averageCookTime:6,specialInstructions:["Check dessert temperature","Garnish according to recipe","Handle with care"]},beverage:{id:"beverage",name:"beverage",displayName:"Beverage",color:"#0891b2",icon:"ðŸ¥¤",position:7,isActive:!0,maxCapacity:25,averageCookTime:1,specialInstructions:["Use correct glass size","Check ice levels","Garnish appropriately"]}},D={burger:"grill",cheeseburger:"grill",steak:"grill","chicken breast":"grill","grilled chicken":"grill",fish:"grill",salmon:"grill","hot dog":"grill",sausage:"grill","grilled vegetables":"grill","french fries":"fryer",fries:"fryer","onion rings":"fryer","fried chicken":"fryer","chicken wings":"fryer","fish and chips":"fryer","mozzarella sticks":"fryer",nachos:"fryer",tempura:"fryer","caesar salad":"salad","house salad":"salad","greek salad":"salad","cobb salad":"salad","garden salad":"salad","mixed greens":"salad","fruit salad":"salad",sandwich:"pantry","club sandwich":"pantry",wrap:"pantry",panini:"pantry",sub:"pantry",bagel:"pantry",toast:"pantry","cold appetizer":"pantry",cake:"dessert",pie:"dessert","ice cream":"dessert",cheesecake:"dessert",brownie:"dessert",cookies:"dessert",pudding:"dessert",soda:"beverage",coffee:"beverage",tea:"beverage",juice:"beverage",smoothie:"beverage",milkshake:"beverage",cocktail:"beverage",beer:"beverage",wine:"beverage",water:"beverage"},M={appetizers:"fryer",salads:"salad",soups:"pantry",entrees:"grill",mains:"grill",burgers:"grill",sandwiches:"pantry",sides:"fryer",desserts:"dessert",beverages:"beverage",drinks:"beverage","hot drinks":"beverage","cold drinks":"beverage"},I=[{id:"all-stations",name:"All Stations",stations:["grill","fryer","salad","expo","pantry","dessert","beverage"],columns:4,showTimer:!0,showCustomer:!0,showServer:!0,showTable:!0,showSource:!0,showAllergies:!0,sortBy:"time",maxTicketsPerColumn:10,autoScroll:!0,soundAlerts:!0,colorCoding:!0},{id:"hot-stations",name:"Hot Stations",stations:["grill","fryer"],columns:2,showTimer:!0,showCustomer:!1,showServer:!1,showTable:!0,showSource:!1,showAllergies:!0,sortBy:"priority",maxTicketsPerColumn:12,autoScroll:!0,soundAlerts:!0,colorCoding:!0},{id:"cold-stations",name:"Cold Stations",stations:["salad","pantry","dessert"],columns:3,showTimer:!0,showCustomer:!1,showServer:!1,showTable:!0,showSource:!1,showAllergies:!0,sortBy:"time",maxTicketsPerColumn:8,autoScroll:!0,soundAlerts:!1,colorCoding:!0},{id:"expo-view",name:"Expo",stations:["expo"],columns:1,showTimer:!0,showCustomer:!0,showServer:!0,showTable:!0,showSource:!0,showAllergies:!0,sortBy:"table",maxTicketsPerColumn:20,autoScroll:!0,soundAlerts:!0,colorCoding:!0},{id:"grill-only",name:"Grill Station",stations:["grill"],columns:1,showTimer:!0,showCustomer:!1,showServer:!1,showTable:!0,showSource:!1,showAllergies:!0,sortBy:"priority",maxTicketsPerColumn:15,autoScroll:!0,soundAlerts:!0,colorCoding:!0}],R={routeItemToStation:e=>{let t=e.name.toLowerCase().trim();if(D[t])return D[t];for(let[e,r]of Object.entries(D))if(t.includes(e))return r;let r=e.category.toLowerCase().trim();if(M[r])return M[r];for(let[e,t]of Object.entries(M))if(r.includes(e))return t;return"expo"},getActiveStations:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return Object.values(e).filter(e=>e.isActive).sort((e,t)=>e.position-t.position)},getStation:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return t[e]||E.expo},canAcceptOrder:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,s=r[e];return!!s&&!!s.isActive&&t<s.maxCapacity},getOverCapacityStations:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return Object.entries(e).filter(e=>{let[r,s]=e,a=t[r];return a&&s>a.maxCapacity}).map(e=>{let[t]=e;return t})},getStationLoad:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,s=r[e];return s?Math.min(100,Math.round(t/s.maxCapacity*100)):0},getRecommendedView:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,r=R.getOverCapacityStations(e,t);return 0===r.length?"all-stations":r.every(e=>["grill","fryer"].includes(e))?"hot-stations":r.every(e=>["salad","pantry","dessert"].includes(e))?"cold-stations":"all-stations"},validateStation:e=>{let t=[];return e.id||t.push("Station ID is required"),e.name||t.push("Station name is required"),e.displayName||t.push("Display name is required"),e.color||t.push("Color is required"),"number"!=typeof e.position&&t.push("Position must be a number"),("number"!=typeof e.maxCapacity||e.maxCapacity<1)&&t.push("Max capacity must be a positive number"),("number"!=typeof e.averageCookTime||e.averageCookTime<0)&&t.push("Average cook time must be a non-negative number"),t},createCustomStation:(e,t)=>({...E[e]||E.expo,...t,id:e}),filterStations:(e,t)=>Object.values(e).filter(e=>(void 0===t.active||e.isActive===t.active)&&(void 0===t.maxCapacity||!(e.maxCapacity<t.maxCapacity))&&(void 0===t.averageCookTime||!(e.averageCookTime>t.averageCookTime)))};function P(e){let{station:r,isActive:s,ticketCount:a,onClick:i,compact:l=!1}=e,o=a>r.maxCapacity,c=Math.round(a/r.maxCapacity*100);return(0,t.jsxs)("button",{onClick:i,className:n("kds-button relative flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition-all","focus:outline-none focus:ring-2 focus:ring-blue-500",s?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700",o&&"ring-2 ring-red-500",l?"px-3 py-1":"px-4 py-2"),role:"tab","aria-selected":s,"aria-label":"".concat(r.displayName," station - ").concat(a," orders"),style:{borderBottom:s?"3px solid ".concat(r.color):"none"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:l?"text-sm":"text-base",children:r.icon}),(0,t.jsx)("span",{className:n("font-medium",l?"text-sm":"text-base"),children:l?r.name.substring(0,4):r.displayName})]}),a>0&&(0,t.jsx)("div",{className:n("absolute -top-2 -right-2 min-w-[1.5rem] h-6 rounded-full flex items-center justify-center text-xs font-bold",o?"bg-red-500 text-white animate-pulse":a>.8*r.maxCapacity?"bg-yellow-500 text-black":"bg-green-500 text-white"),children:a>99?"99+":a}),!l&&(0,t.jsx)("div",{className:"w-full h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:n("h-full transition-all duration-500",c>100?"bg-red-500":c>80?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,c),"%")}})})]})}function O(e){let{status:r,compact:s=!1}=e,a={connected:{color:"bg-green-500",text:"Connected",icon:"ðŸŸ¢"},disconnected:{color:"bg-red-500 animate-pulse",text:"Disconnected",icon:"ðŸ”´"},reconnecting:{color:"bg-yellow-500 animate-pulse",text:"Reconnecting...",icon:"ðŸŸ¡"}}[r];return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:n("w-2 h-2 rounded-full",a.color)}),!s&&(0,t.jsx)("span",{className:n("text-xs","connected"===r?"text-green-400":"disconnected"===r?"text-red-400":"text-yellow-400"),children:a.text})]})}function U(e){let{label:r,value:s,color:a="text-white"}=e;return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:n("text-lg font-bold",a),children:s}),(0,t.jsx)("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:r})]})}function L(e){let{icon:r,label:s,onClick:a,compact:i=!1,disabled:l=!1}=e;return(0,t.jsxs)("button",{onClick:a,disabled:l,className:n("kds-button flex flex-col items-center gap-1 px-3 py-2 rounded-lg","bg-gray-800 text-gray-300 hover:bg-gray-700","focus:outline-none focus:ring-2 focus:ring-blue-500","disabled:opacity-50 disabled:cursor-not-allowed","transition-all duration-150",i&&"px-2 py-1"),title:s,"aria-label":s,children:[(0,t.jsx)("span",{className:i?"text-sm":"text-base",children:r}),!i&&(0,t.jsx)("span",{className:"text-xs font-medium",children:s})]})}function F(e){let{alerts:r,onDismiss:s,className:a}=e;return 0===r.length?null:(0,t.jsx)("div",{className:n("kds-alert-banner space-y-2",a),children:r.map(e=>(0,t.jsxs)("div",{className:n("flex items-center justify-between px-4 py-2 rounded-lg","error"===e.type&&"bg-red-900 border border-red-500 text-red-100","warning"===e.type&&"bg-yellow-900 border border-yellow-500 text-yellow-100","info"===e.type&&"bg-blue-900 border border-blue-500 text-blue-100"),role:"alert",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm",children:["error"===e.type&&"âŒ","warning"===e.type&&"âš ï¸","info"===e.type&&"â„¹ï¸"]}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.message})]}),e.dismissible&&s&&(0,t.jsx)("button",{onClick:()=>s(e.id),className:"text-xs hover:opacity-75 ml-4","aria-label":"Dismiss alert",children:"âœ•"})]},e.id))})}let Q=function(e){let{currentStation:s,currentView:a,stationViews:i,metrics:l,stations:c=E,onStationChange:d,onViewChange:m,onSettingsOpen:u,onAllDayToggle:g,onRefresh:h,className:x,showMetrics:p=!0,showClock:b=!0,compactMode:y=!1}=e,[f,v]=(0,r.useState)(new Date),[j,w]=(0,r.useState)("connected");(0,r.useEffect)(()=>{let e=setInterval(()=>{v(new Date)},1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{.05>Math.random()&&"connected"===j&&(w("disconnected"),setTimeout(()=>w("reconnecting"),2e3),setTimeout(()=>w("connected"),5e3))},3e4);return()=>clearInterval(e)},[j]);let N=Object.values(c).filter(e=>e.isActive),k=s?c[s]:null;return(0,t.jsxs)("header",{className:n("kds-header bg-gray-900 border-b-2 border-gray-700","flex items-center justify-between px-6 py-4",y?"h-16":"h-20",x),role:"banner",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-2xl",role:"img","aria-label":"Kitchen Display System",children:"ðŸ½ï¸"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-white kds-text-high-contrast",children:"Kitchen Display"}),!y&&(0,t.jsx)("p",{className:"text-sm text-gray-400",children:k?k.displayName:"All Stations"})]})]}),p&&!y&&(0,t.jsxs)("div",{className:"flex items-center gap-4 pl-6 border-l border-gray-700",children:[(0,t.jsx)(U,{label:"Active",value:l.totalActiveTickets,color:"text-blue-400"}),(0,t.jsx)(U,{label:"Avg Time",value:"".concat(Math.round(l.averageTicketTime),"m"),color:"text-green-400"}),(0,t.jsx)(U,{label:"Longest",value:"".concat(Math.round(l.longestWaitTime),"m"),color:l.longestWaitTime>20?"text-red-400":"text-yellow-400"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",role:"tablist","aria-label":"Kitchen stations",children:[N.map(e=>{var r;return(0,t.jsx)(P,{station:e,isActive:s===e.id,ticketCount:(null==(r=l.stationMetrics.find(t=>t.stationId===e.id))?void 0:r.pendingOrders)||0,onClick:()=>d(e.id),compact:y},e.id)}),(0,t.jsx)("button",{onClick:()=>m("all-stations"),className:n("kds-button px-4 py-2 rounded-lg font-medium transition-all","all-stations"===a?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"),role:"tab","aria-selected":"all-stations"===a,"aria-label":"All stations view",children:"All"})]}),i.length>1&&(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)("select",{value:a||"",onChange:e=>m(e.target.value),className:"bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm text-white focus:ring-2 focus:ring-blue-500","aria-label":"Select view configuration",children:i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(O,{status:j,compact:y}),b&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-lg font-mono font-bold text-white",children:o.formatTime(f,!1)}),!y&&(0,t.jsx)("div",{className:"text-xs text-gray-400",children:f.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pl-4 border-l border-gray-700",children:[g&&(0,t.jsx)(L,{icon:"ðŸ“Š",label:"All Day",onClick:g,compact:y}),h&&(0,t.jsx)(L,{icon:"ðŸ”„",label:"Refresh",onClick:h,compact:y}),(0,t.jsx)(L,{icon:"âš™ï¸",label:"Settings",onClick:u,compact:y})]})]})]})};function B(e){let{groupedItems:r,stations:s,showModifiers:a,onItemClick:i}=e;return(0,t.jsx)("div",{className:"p-4 space-y-6",children:Object.entries(r).map(e=>{let[r,l]=e,n=s[r];return(0,t.jsxs)("div",{className:"space-y-3",children:[n&&"all"!==r&&(0,t.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:n.color}}),(0,t.jsx)("h3",{className:"text-lg font-bold text-white",children:n.displayName}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["(",l.length," items)"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(e=>(0,t.jsx)(K,{item:e,station:s[e.station],showModifiers:a,onClick:()=>null==i?void 0:i(e)},"".concat(e.itemId,"-").concat(e.station)))})]},r)})})}function W(e){let{items:r,stations:s,showModifiers:a,onItemClick:i}=e;return(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm text-white",children:[(0,t.jsx)("thead",{className:"bg-gray-800 border-b border-gray-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Item"}),(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Station"}),(0,t.jsx)("th",{className:"text-center p-3 font-medium",children:"Total"}),(0,t.jsx)("th",{className:"text-center p-3 font-medium",children:"Completed"}),(0,t.jsx)("th",{className:"text-center p-3 font-medium",children:"Pending"}),(0,t.jsx)("th",{className:"text-center p-3 font-medium",children:"Progress"}),a&&(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Modifiers"}),(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Allergens"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-700",children:r.map(e=>{let r=s[e.station],l=m.getCompletionPercentage(e);return(0,t.jsxs)("tr",{className:n("hover:bg-gray-800 transition-colors",i&&"cursor-pointer"),onClick:()=>null==i?void 0:i(e),children:[(0,t.jsxs)("td",{className:"p-3",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["Avg time: ",e.averageCookTime,"min"]})]}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:(null==r?void 0:r.color)||"#6b7280"}}),(0,t.jsx)("span",{children:(null==r?void 0:r.displayName)||e.station})]})}),(0,t.jsx)("td",{className:"p-3 text-center font-bold",children:e.totalQuantity}),(0,t.jsx)("td",{className:"p-3 text-center text-green-400",children:e.completedQuantity}),(0,t.jsx)("td",{className:"p-3 text-center text-blue-400",children:e.pendingQuantity}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex-1 bg-gray-700 rounded-full h-2",children:(0,t.jsx)("div",{className:n("h-full rounded-full transition-all duration-300",100===l?"bg-green-500":l>=50?"bg-blue-500":"bg-gray-400"),style:{width:"".concat(l,"%")}})}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 min-w-[3rem] text-right",children:[l,"%"]})]})}),a&&(0,t.jsx)("td",{className:"p-3 text-xs text-gray-400",children:Object.entries(e.modifiers).length>0?(0,t.jsx)("div",{className:"max-w-[200px] truncate",children:Object.entries(e.modifiers).map(e=>{let[t,r]=e;return"".concat(t," (").concat(r,")")}).join(", ")}):(0,t.jsx)("span",{className:"text-gray-500",children:"None"})}),(0,t.jsx)("td",{className:"p-3 text-xs",children:e.allergens.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.allergens.map(e=>(0,t.jsx)("span",{className:"bg-red-900 text-red-200 px-1 py-0.5 rounded text-xs font-medium",children:e},e))}):(0,t.jsx)("span",{className:"text-gray-500",children:"None"})})]},"".concat(e.itemId,"-").concat(e.station))})})]})})}function K(e){let{item:r,station:s,showModifiers:a,onClick:i}=e,l=m.getCompletionPercentage(r),o=100===l;return(0,t.jsxs)("div",{className:n("bg-gray-900 border-2 border-gray-700 rounded-lg p-4 space-y-3","transition-all duration-200",i&&"cursor-pointer hover:border-gray-600",o&&"opacity-75 border-green-700"),onClick:i,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-bold text-white text-lg kds-text-kitchen",children:r.name}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-1",children:s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:s.color}}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:s.displayName})]})})]}),o&&(0,t.jsx)("div",{className:"text-green-400 text-xl",children:"âœ“"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:r.totalQuantity}),(0,t.jsx)("div",{className:"text-xs text-gray-400 uppercase",children:"Total"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-400",children:r.completedQuantity}),(0,t.jsx)("div",{className:"text-xs text-gray-400 uppercase",children:"Done"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:r.pendingQuantity}),(0,t.jsx)("div",{className:"text-xs text-gray-400 uppercase",children:"Pending"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Progress"}),(0,t.jsxs)("span",{className:"text-white font-medium",children:[l,"%"]})]}),(0,t.jsx)("div",{className:"bg-gray-700 rounded-full h-2",children:(0,t.jsx)("div",{className:n("h-full rounded-full transition-all duration-500",100===l?"bg-green-500":l>=50?"bg-blue-500":"bg-gray-400"),style:{width:"".concat(l,"%")}})})]}),a&&Object.keys(r.modifiers).length>0&&(0,t.jsxs)("div",{className:"pt-2 border-t border-gray-700",children:[(0,t.jsx)("div",{className:"text-xs text-gray-400 mb-1 uppercase",children:"Modifiers:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:Object.entries(r.modifiers).map(e=>{let[r,s]=e;return(0,t.jsxs)("span",{className:"bg-gray-800 text-gray-300 px-2 py-1 rounded text-xs",children:[r," (",s,")"]},r)})})]}),r.allergens.length>0&&(0,t.jsxs)("div",{className:"pt-2 border-t border-gray-700",children:[(0,t.jsx)("div",{className:"text-xs text-red-300 mb-1 uppercase font-bold",children:"âš ï¸ Allergens:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:r.allergens.map(e=>(0,t.jsx)("span",{className:"bg-red-900 text-red-200 px-2 py-1 rounded text-xs font-medium",children:e},e))})]}),(0,t.jsxs)("div",{className:"pt-2 border-t border-gray-700 text-xs text-gray-400 flex justify-between",children:[(0,t.jsxs)("span",{children:["Cook time: ",r.averageCookTime,"min"]}),(0,t.jsx)("span",{children:r.pendingQuantity>0?"".concat(r.pendingQuantity," to go"):"All complete"})]})]})}let q=function(e){let{allDayView:s,stations:a=E,onRefresh:i,onItemClick:l,className:o,groupByStation:c=!0,showCompleted:d=!0,showModifiers:u=!0,sortBy:g="quantity"}=e,[h,x]=(0,r.useState)(""),[p,b]=(0,r.useState)("all"),[y,f]=(0,r.useState)("grid"),v=[...s.items.filter(e=>(!!d||0!==e.pendingQuantity)&&("all"===p||e.station===p)&&(!h||!!e.name.toLowerCase().includes(h.toLowerCase())))].sort((e,t)=>{switch(g){case"name":return e.name.localeCompare(t.name);case"quantity":return t.totalQuantity-e.totalQuantity;case"station":return e.station.localeCompare(t.station);case"completion":return m.getCompletionPercentage(e)-m.getCompletionPercentage(t);default:return 0}}),j=c?v.reduce((e,t)=>(e[t.station]||(e[t.station]=[]),e[t.station].push(t),e),{}):{all:v},w={totalItems:s.items.length,totalQuantity:s.items.reduce((e,t)=>e+t.totalQuantity,0),completedQuantity:s.items.reduce((e,t)=>e+t.completedQuantity,0),pendingQuantity:s.items.reduce((e,t)=>e+t.pendingQuantity,0)},N=w.totalQuantity>0?Math.round(w.completedQuantity/w.totalQuantity*100):0;return(0,t.jsxs)("div",{className:n("kds-all-day-view h-full flex flex-col",o),children:[(0,t.jsxs)("div",{className:"bg-gray-900 border-b border-gray-700 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white kds-text-high-contrast",children:"All Day View"}),(0,t.jsxs)("p",{className:"text-gray-400",children:["Total orders: ",s.totalOrders," â€¢ Completed: ",s.completedOrders]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-white",children:[N,"% Complete"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:[w.completedQuantity," of ",w.totalQuantity," items"]})]}),(0,t.jsx)("button",{onClick:i,className:"kds-button bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg",children:"ðŸ”„ Refresh"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,t.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,t.jsx)("input",{type:"text",placeholder:"Search items...",value:h,onChange:e=>x(e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})}),(0,t.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,t.jsx)("option",{value:"all",children:"All Stations"}),Object.values(a).map(e=>(0,t.jsx)("option",{value:e.id,children:e.displayName},e.id))]}),(0,t.jsxs)("select",{value:g,onChange:e=>setSortBy(e.target.value),className:"bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,t.jsx)("option",{value:"quantity",children:"By Quantity"}),(0,t.jsx)("option",{value:"name",children:"By Name"}),(0,t.jsx)("option",{value:"station",children:"By Station"}),(0,t.jsx)("option",{value:"completion",children:"By Completion"})]}),(0,t.jsxs)("div",{className:"flex items-center border border-gray-600 rounded overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>f("grid"),className:n("px-3 py-2 text-sm font-medium","grid"===y?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"),children:"Grid"}),(0,t.jsx)("button",{onClick:()=>f("table"),className:n("px-3 py-2 text-sm font-medium","table"===y?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"),children:"Table"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",checked:d,onChange:e=>setShowCompleted(e.target.checked),className:"rounded"}),"Show Completed"]})]})]}),(0,t.jsx)("div",{className:"bg-gray-800 p-3 border-b border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex-1 bg-gray-700 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-full rounded-full transition-all duration-500",style:{width:"".concat(N,"%")}})}),(0,t.jsxs)("div",{className:"text-sm text-gray-300 min-w-[120px] text-right",children:[w.completedQuantity," / ",w.totalQuantity," items"]})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:"grid"===y?(0,t.jsx)(B,{groupedItems:j,stations:a,showModifiers:u,onItemClick:l}):(0,t.jsx)(W,{items:v,stations:a,showModifiers:u,onItemClick:l})}),(0,t.jsxs)("div",{className:"bg-gray-900 border-t border-gray-700 p-3 flex items-center justify-between text-sm text-gray-400",children:[(0,t.jsxs)("div",{children:["Showing ",v.length," of ",s.items.length," items"]}),(0,t.jsxs)("div",{children:["Last updated: ",s.lastUpdated.toLocaleTimeString()]})]})]})};new Date().toISOString();var V=e.i(99749);let _=[{id:"order-001",orderNumber:"001",displayNumber:"#001",status:"preparing",priority:"normal",source:"dine-in",customer:{name:"John Doe",phone:"555-0123"},items:[{id:"item-001",name:"Cheeseburger",quantity:1,price:12.99,category:"burgers",station:"grill",cookTime:8,modifiers:[{id:"mod-1",name:"No Pickles",price:0},{id:"mod-2",name:"Extra Cheese",price:1.5}],allergens:["dairy","gluten"]},{id:"item-002",name:"French Fries",quantity:1,price:4.99,category:"sides",station:"fryer",cookTime:5,modifiers:[],allergens:[]}],totalAmount:17.98,tax:1.44,createdAt:new Date(Date.now()-48e4),allergenWarnings:["dairy","gluten"],tableNumber:"12",serverName:"Alice"},{id:"order-002",orderNumber:"002",displayNumber:"#002",status:"preparing",priority:"urgent",source:"takeout",customer:{name:"Jane Smith",phone:"555-0456"},items:[{id:"item-003",name:"Caesar Salad",quantity:1,price:9.99,category:"salads",station:"salad",cookTime:3,modifiers:[{id:"mod-3",name:"Add Chicken",price:4}],allergens:["dairy"],specialInstructions:"Light dressing"}],totalAmount:13.99,tax:1.12,createdAt:new Date(Date.now()-72e4),allergenWarnings:["dairy"],specialInstructions:"Customer is waiting"},{id:"order-003",orderNumber:"003",displayNumber:"#003",status:"preparing",priority:"fire",source:"delivery",customer:{name:"Bob Johnson",phone:"555-0789"},items:[{id:"item-004",name:"Grilled Salmon",quantity:1,price:18.99,category:"entrees",station:"grill",cookTime:10,modifiers:[],allergens:["fish"],isRush:!0},{id:"item-005",name:"Steamed Vegetables",quantity:1,price:5.99,category:"sides",station:"grill",cookTime:6,modifiers:[],allergens:[]}],totalAmount:24.98,tax:2,createdAt:new Date(Date.now()-96e4),allergenWarnings:["fish"],specialInstructions:"VIP customer - priority order"}],H={baseUrl:"http://localhost:3000/api",timeout:1e4,retryAttempts:3,retryDelay:1e3},z={url:a.default.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/kds",reconnectInterval:5e3,maxReconnectAttempts:10,heartbeatInterval:3e4},G=new class{get(e){return this.orders.get(e)||this.tickets.get(e)}set(e,t,r){switch(r){case"order":this.orders.set(e,t);break;case"ticket":this.tickets.set(e,t);break;case"metrics":this.metrics=t}this.lastUpdate=new Date}getAll(e){return Array.from(("orders"===e?this.orders:this.tickets).values())}clear(){this.orders.clear(),this.tickets.clear(),this.metrics=null,this.lastUpdate=new Date}isStale(){return Date.now()-this.lastUpdate.getTime()>this.maxAge}constructor(){(0,V._)(this,"orders",new Map),(0,V._)(this,"tickets",new Map),(0,V._)(this,"metrics",null),(0,V._)(this,"lastUpdate",new Date),(0,V._)(this,"maxAge",3e5)}},J=new class{async fetchWithRetry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{let r=new AbortController,s=setTimeout(()=>r.abort(),H.timeout),a=await fetch(e,{...t,signal:r.signal});if(clearTimeout(s),!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));return await a.json()}catch(s){if(r<H.retryAttempts)return await new Promise(e=>setTimeout(e,H.retryDelay*r)),this.fetchWithRetry(e,t,r+1);throw s}}async get(e){let t="".concat(H.baseUrl).concat(e);return this.fetchWithRetry(t)}async post(e,t){let r="".concat(H.baseUrl).concat(e);return this.fetchWithRetry(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async put(e,t){let r="".concat(H.baseUrl).concat(e);return this.fetchWithRetry(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async delete(e){let t="".concat(H.baseUrl).concat(e);return this.fetchWithRetry(t,{method:"DELETE"})}},Y=new class{connect(){try{this.ws=new WebSocket(z.url),this.ws.onopen=()=>{console.log("KDS WebSocket connected"),this.reconnectAttempts=0,this.startHeartbeat()},this.ws.onmessage=e=>{try{let t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("Error parsing WebSocket message:",e)}},this.ws.onclose=()=>{console.log("KDS WebSocket disconnected"),this.stopHeartbeat(),this.reconnect()},this.ws.onerror=e=>{console.error("KDS WebSocket error:",e)}}catch(e){console.error("Error connecting to WebSocket:",e),this.reconnect()}}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.stopHeartbeat()}reconnect(){if(this.reconnectAttempts>=z.maxReconnectAttempts)return void console.error("Max WebSocket reconnection attempts reached");this.reconnectAttempts++,setTimeout(()=>{console.log("Attempting to reconnect WebSocket (".concat(this.reconnectAttempts,"/").concat(z.maxReconnectAttempts,")")),this.connect()},z.reconnectInterval)}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{var e;(null==(e=this.ws)?void 0:e.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping"}))},z.heartbeatInterval)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}handleMessage(e){(this.listeners.get(e.type)||[]).forEach(t=>t(e.data))}subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),()=>{let r=this.listeners.get(e);if(r){let e=r.indexOf(t);e>-1&&r.splice(e,1)}}}constructor(){(0,V._)(this,"ws",null),(0,V._)(this,"reconnectAttempts",0),(0,V._)(this,"heartbeatInterval",null),(0,V._)(this,"listeners",new Map)}},X={init:()=>{Y.connect()},cleanup:()=>{Y.disconnect(),G.clear()},fetchOrders:async e=>{try{let t=_;return e&&(t=t.filter(t=>{if(e.stationId&&!t.items.some(t=>t.station===e.stationId)||e.status&&!e.status.includes(t.status)||e.priority&&!e.priority.includes(t.priority)||e.source&&!e.source.includes(t.source))return!1;if(e.timeRange){let r=t.createdAt.getTime();if(r<e.timeRange.start.getTime()||r>e.timeRange.end.getTime())return!1}return!0})),t.forEach(e=>G.set(e.id,e,"order")),t}catch(e){throw console.error("Error fetching orders:",e),e}},fetchTickets:async e=>{try{let t=await X.fetchOrders(),r=[];return t.forEach(t=>{let s=d.createTicketsFromOrder(t).filter(t=>e.includes(t.station));r.push(...s)}),r.forEach(e=>{e.elapsedTime=o.getElapsedTime(e.startTime),e.urgency=e.elapsedTime>=900?"urgent":e.elapsedTime>=600?"warning":"normal"}),r.forEach(e=>G.set(e.id,e,"ticket")),d.sortTickets(r)}catch(e){throw console.error("Error fetching tickets:",e),e}},fetchMetrics:async()=>{try{let e={totalActiveTickets:(await X.fetchOrders()).filter(e=>"completed"!==e.status&&"cancelled"!==e.status).length,averageTicketTime:8.5,longestWaitTime:16,stationMetrics:Object.values(E).map(e=>({stationId:e.id,averageTicketTime:e.averageCookTime,completedOrders:Math.floor(50*Math.random()),pendingOrders:Math.floor(10*Math.random()),overdueOrders:Math.floor(3*Math.random()),efficiency:Math.floor(30*Math.random())+70,lastHourThroughput:Math.floor(20*Math.random())+10})),ordersBySource:{"dine-in":45,takeout:23,delivery:18,online:12,phone:8,pos:5},ordersByPriority:{normal:85,urgent:12,rush:5,fire:2},lastUpdated:new Date};return G.set("metrics",e,"metrics"),e}catch(e){throw console.error("Error fetching metrics:",e),e}},generateAllDayView:async e=>{try{let t=await X.fetchOrders(),r=t.reduce((t,r)=>(r.items.forEach(s=>{if(e.includes(s.station)){let e="".concat(s.name,"-").concat(s.station);t[e]||(t[e]={itemId:s.id,name:s.name,station:s.station,totalQuantity:0,completedQuantity:0,pendingQuantity:0,averageCookTime:s.cookTime,modifiers:{},allergens:s.allergens||[]}),t[e].totalQuantity+=s.quantity,"completed"===r.status?t[e].completedQuantity+=s.quantity:t[e].pendingQuantity+=s.quantity,s.modifiers.forEach(r=>{t[e].modifiers[r.name]=(t[e].modifiers[r.name]||0)+s.quantity})}}),t),{});return{id:"all-day-"+Date.now(),name:"All Day View",stations:e,items:Object.values(r),totalOrders:t.length,completedOrders:t.filter(e=>"completed"===e.status).length,lastUpdated:new Date}}catch(e){throw console.error("Error generating all day view:",e),e}},bumpTicket:async e=>{try{await J.post("/kds/tickets/".concat(e,"/bump"),{});let t=G.get(e);t&&(t.status="completed",t.completedTime=new Date,G.set(e,t,"ticket"))}catch(e){throw console.error("Error bumping ticket:",e),e}},recallTicket:async e=>{try{await J.post("/kds/tickets/".concat(e,"/recall"),{});let t=G.get(e);t&&(t.status="preparing",t.isRecalled=!0,t.completedTime=void 0,G.set(e,t,"ticket"))}catch(e){throw console.error("Error recalling ticket:",e),e}},fireTicket:async e=>{try{await J.post("/kds/tickets/".concat(e,"/fire"),{});let t=G.get(e);t&&(t.isFired=!0,t.order.priority="fire",G.set(e,t,"ticket"))}catch(e){throw console.error("Error firing ticket:",e),e}},changePriority:async(e,t)=>{try{await J.put("/kds/tickets/".concat(e,"/priority"),{priority:t});let r=G.get(e);r&&(r.order.priority=t,G.set(e,r,"ticket"))}catch(e){throw console.error("Error changing ticket priority:",e),e}},subscribe:(e,t)=>Y.subscribe(e,t),getCached:e=>G.get(e),isCacheStale:()=>G.isStale()};function Z(){let[e,a]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),[p,b]=(0,r.useState)("all-stations"),[y,f]=(0,r.useState)(null),[v,j]=(0,r.useState)(!1),[w]=(0,r.useState)(I),[N]=(0,r.useState)(E),[C,S]=(0,r.useState)([]),[T,D]=(0,r.useState)(!1),[M,P]=(0,r.useState)(new Date),O=(0,s.useRouter)(),U=(0,s.useSearchParams)(),{subscribe:L}=(X.init(),window.addEventListener("beforeunload",()=>{X.cleanup()}),{subscribe:X.subscribe,disconnect:X.cleanup}),B=w.find(e=>e.id===p)||w[0],W=R.getActiveStations(N),K=(0,r.useCallback)(async()=>{try{h(null);let e=B.stations,t=await X.fetchTickets(e);a(t);let r=await X.fetchMetrics();if(l(r),v){let t=await X.generateAllDayView(e);o(t)}P(new Date),S(e=>e.filter(e=>"connection-error"!==e.id))}catch(t){let e=t instanceof Error?t.message:"Failed to fetch data";h(e),S(t=>[...t.filter(e=>"connection-error"!==e.id),{id:"connection-error",type:"error",message:"Connection error: ".concat(e),dismissible:!0}])}finally{d(!1)}},[B.stations,v]),V=(0,r.useCallback)(x.debounce(K,500),[K]),_=(0,r.useCallback)(async e=>{try{await X.bumpTicket(e),u.playSound("bump",.3),V()}catch(e){console.error("Failed to bump ticket:",e)}},[V]),H=(0,r.useCallback)(async e=>{try{await X.recallTicket(e),u.playSound("urgent",.3),V()}catch(e){console.error("Failed to recall ticket:",e)}},[V]),z=(0,r.useCallback)(async e=>{try{await X.fireTicket(e),u.playSound("urgent",.5),V()}catch(e){console.error("Failed to fire ticket:",e)}},[V]),G=(0,r.useCallback)(async(e,t)=>{try{await X.changePriority(e,t),V()}catch(e){console.error("Failed to change priority:",e)}},[V]),J=(0,r.useCallback)(e=>{f(e);let t=w.find(t=>1===t.stations.length&&t.stations[0]===e);t?b(t.id):b("all-stations")},[w]),Y=(0,r.useCallback)(e=>{b(e);let t=w.find(t=>t.id===e);t&&1===t.stations.length?f(t.stations[0]):f(null)},[w]),Z=(0,r.useCallback)(()=>{j(e=>!e)},[]),et=(0,r.useCallback)(()=>{D(!0)},[]),er=(0,r.useCallback)(e=>{S(t=>t.filter(t=>t.id!==e))},[]),es=(0,r.useCallback)(t=>{g.handleKeyPress(t,{"fire-order":()=>{let t=e.find(e=>"urgent"===e.urgency)||e[0];t&&z(t.id)},"all-day-view":Z,help:()=>{let e=document.getElementById("keyboard-hints");e&&(e.style.opacity="1",setTimeout(()=>{e.style.opacity="0"},5e3))},"switch-station":()=>{let e=(W.findIndex(e=>e.id===y)+1)%W.length;J(W[e].id)}})&&t.preventDefault()},[e,y,W,z,Z,J]);if((0,r.useEffect)(()=>{let e=U.get("view"),t=U.get("station"),r="true"===U.get("allday");e&&w.find(t=>t.id===e)&&b(e),t&&N[t]&&f(t),r&&j(!0),K()},[]),(0,r.useEffect)(()=>{let e=setInterval(K,5e3);return()=>clearInterval(e)},[K]),(0,r.useEffect)(()=>{let e=L("new_order",e=>{u.playSound("newOrder",.4),S(t=>[...t,{id:"new-order-".concat(Date.now()),type:"info",message:"New order received: ".concat(e.orderNumber),dismissible:!0}]),V()}),t=L("ticket_update",()=>{V()}),r=L("system_alert",e=>{S(t=>[...t,{id:"system-alert-".concat(Date.now()),type:e.type||"warning",message:e.message,dismissible:!0}])});return()=>{e(),t(),r()}},[L,V]),(0,r.useEffect)(()=>(document.addEventListener("keydown",es),()=>document.removeEventListener("keydown",es)),[es]),(0,r.useEffect)(()=>{let e=new URLSearchParams;"all-stations"!==p&&e.set("view",p),y&&e.set("station",y),v&&e.set("allday","true");let t="/kds".concat(e.toString()?"?".concat(e.toString()):"");O.replace(t,{scroll:!1})},[p,y,v,O]),c&&!e.length)return(0,t.jsx)("div",{children:"Loading KDS..."});if(m&&!e.length)throw Error(m);return i?(0,t.jsxs)("div",{className:"h-full flex flex-col bg-black text-white",children:[C.length>0&&(0,t.jsx)(F,{alerts:C,onDismiss:er,className:"p-4"}),(0,t.jsx)(Q,{currentStation:y||void 0,currentView:p,stationViews:w,metrics:i,stations:N,onStationChange:J,onViewChange:Y,onSettingsOpen:et,onAllDayToggle:Z,onRefresh:K}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:v?n?(0,t.jsx)(q,{allDayView:n,stations:N,onRefresh:K}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“Š"}),(0,t.jsx)("div",{className:"text-xl font-bold mb-2",children:"Generating All Day View..."}),(0,t.jsx)("div",{className:"text-gray-400",children:"This may take a moment"})]})}):y?(0,t.jsx)(k,{station:N[y],tickets:e.filter(e=>e.station===y),config:B,onBump:_,onRecall:H,onFire:z,onPriorityChange:G}):(0,t.jsx)(A,{stations:W.filter(e=>B.stations.includes(e.id)),tickets:e,config:B,onBump:_,onRecall:H,onFire:z,onPriorityChange:G})}),T&&(0,t.jsx)($,{onClose:()=>D(!1),stations:N,stationViews:w}),(0,t.jsx)(ee,{})]}):(0,t.jsx)("div",{children:"Loading metrics..."})}function $(e){let{onClose:r,stations:s,stationViews:a}=e;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-6 max-w-2xl w-full m-4 max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"KDS Settings"}),(0,t.jsx)("button",{onClick:r,className:"kds-button bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded",children:"âœ• Close"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"Display Settings"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0}),"Show timer on tickets"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0}),"Show customer names"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0}),"Show table numbers"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0}),"Show allergen warnings"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"Sound Alerts"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0}),"New order alerts"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-gray-300",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0}),"Urgent order alerts"]})]}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{className:"block text-gray-300 mb-2",children:"Volume"}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",defaultValue:"50",className:"w-full"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"Stations"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.values(s).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{className:"text-white",children:e.displayName})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:e.isActive}),(0,t.jsx)("span",{className:"text-gray-300",children:"Active"})]})]},e.id))})]})]})]})})}function ee(){let[e,s]=(0,r.useState)(!1);return e?(0,t.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-900 border-2 border-red-500 rounded-lg p-4 space-y-2",children:[(0,t.jsx)("div",{className:"text-xs text-red-200 font-bold",children:"Emergency Actions"}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("button",{onClick:async()=>{confirm("Stop all orders? This action cannot be undone.")&&console.log("EMERGENCY STOP ACTIVATED")},className:"kds-button bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded text-xs",children:"ðŸ›‘ STOP ALL"}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"kds-button bg-yellow-600 hover:bg-yellow-500 text-white px-3 py-1 rounded text-xs",children:"ðŸ”„ RESET"}),(0,t.jsx)("button",{onClick:()=>s(!1),className:"kds-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs",children:"Cancel"})]})]}):(0,t.jsx)("button",{onClick:()=>s(!0),className:"fixed bottom-4 right-4 bg-red-600 hover:bg-red-500 text-white px-3 py-2 rounded text-xs",children:"Emergency"})}}]);