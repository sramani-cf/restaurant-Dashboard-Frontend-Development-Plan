(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70550,e=>{"use strict";e.s(["DashboardContent",()=>e6],70550);var t=e.i(43476),s=e.i(71645),a=e.i(95187),r=(0,a.createServerReference)("00f7231f9c37fb4c63ead199dd1ab052387ae6f856",a.callServer,void 0,a.findSourceMapURL,"revalidateLiveData"),l=(0,a.createServerReference)("40d8417e0b1fc0fb1626c8e8fb8f687638b2e261ac",a.callServer,void 0,a.findSourceMapURL,"getDashboardData"),n=e.i(70065),i=e.i(94179),c=e.i(71428),d=e.i(1851),o=e.i(77241);function m(e){return(0,o.constructFrom)(e,Date.now())}var x=e.i(50516);function u(e,t){return(0,x.isSameDay)((0,o.constructFrom)((null==t?void 0:t.in)||e,e),m((null==t?void 0:t.in)||e))}var h=e.i(95727);function f(e,t,s){return(0,h.addDays)(e,-t,s)}function g(e,t){return(0,x.isSameDay)((0,o.constructFrom)((null==t?void 0:t.in)||e,e),f(m((null==t?void 0:t.in)||e),1))}var j=e.i(55545),v=e.i(55024),y=e.i(99151),N=e.i(45110),p=e.i(81092);function b(e,t){let s=(0,p.toDate)(e)-(0,p.toDate)(t);return s<0?-1:s>0?1:s}var w=e.i(34662),M=e.i(20062);function k(e,t){let s=(0,p.toDate)(e,null==t?void 0:t.in);return s.setHours(23,59,59,999),s}var C=e.i(39978);function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"".concat(e.toFixed(t),"%")}function T(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString()}function R(e){var t;return u(e)?"Today at ".concat((0,d.format)(e,"h:mm a")):g(e)?"Yesterday at ".concat((0,d.format)(e,"h:mm a")):(t={addSuffix:!0},function(e,t,s){var a,r;let l,n=(0,v.getDefaultOptions)(),i=null!=(r=null!=(a=null==s?void 0:s.locale)?a:n.locale)?r:j.defaultLocale,c=b(e,t);if(isNaN(c))throw RangeError("Invalid time value");let d=Object.assign({},s,{addSuffix:null==s?void 0:s.addSuffix,comparison:c}),[o,m]=(0,N.normalizeDates)(null==s?void 0:s.in,...c>0?[t,e]:[e,t]),x=function(e,t,s){var a;return(a=void 0,e=>{let t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})(((0,p.toDate)(e)-(0,p.toDate)(t))/1e3)}(m,o),u=Math.round((x-((0,y.getTimezoneOffsetInMilliseconds)(m)-(0,y.getTimezoneOffsetInMilliseconds)(o))/1e3)/60);if(u<2)if(null==s?void 0:s.includeSeconds)if(x<5)return i.formatDistance("lessThanXSeconds",5,d);else if(x<10)return i.formatDistance("lessThanXSeconds",10,d);else if(x<20)return i.formatDistance("lessThanXSeconds",20,d);else if(x<40)return i.formatDistance("halfAMinute",0,d);else if(x<60)return i.formatDistance("lessThanXMinutes",1,d);else return i.formatDistance("xMinutes",1,d);else if(0===u)return i.formatDistance("lessThanXMinutes",1,d);else return i.formatDistance("xMinutes",u,d);if(u<45)return i.formatDistance("xMinutes",u,d);if(u<90)return i.formatDistance("aboutXHours",1,d);if(u<w.minutesInDay){let e=Math.round(u/60);return i.formatDistance("aboutXHours",e,d)}if(u<2520)return i.formatDistance("xDays",1,d);else if(u<w.minutesInMonth){let e=Math.round(u/w.minutesInDay);return i.formatDistance("xDays",e,d)}else if(u<2*w.minutesInMonth)return l=Math.round(u/w.minutesInMonth),i.formatDistance("aboutXMonths",l,d);if((l=function(e,t,s){let[a,r,l]=(0,N.normalizeDates)(void 0,e,e,t),n=b(r,l),i=Math.abs((0,M.differenceInCalendarMonths)(r,l));if(i<1)return 0;1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*i);let c=b(r,l)===-n;(function(e,t){let s=(0,p.toDate)(e,void 0);return+k(s,void 0)==+(0,C.endOfMonth)(s,t)})(a)&&1===i&&1===b(a,l)&&(c=!1);let d=n*(i-c);return 0===d?0:d}(m,o))<12){let e=Math.round(u/w.minutesInMonth);return i.formatDistance("xMonths",e,d)}{let e=l%12,t=Math.trunc(l/12);return e<3?i.formatDistance("aboutXYears",t,d):e<9?i.formatDistance("overXYears",t,d):i.formatDistance("almostXYears",t+1,d)}}(e,m(e),t))}function O(e){return({pending:"bg-yellow-100 text-yellow-800",preparing:"bg-blue-100 text-blue-800",ready:"bg-green-100 text-green-800",served:"bg-gray-100 text-gray-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-red-100 text-red-800",confirmed:"bg-blue-100 text-blue-800",seated:"bg-green-100 text-green-800",no_show:"bg-red-100 text-red-800",excellent:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",average:"bg-yellow-100 text-yellow-800",poor:"bg-red-100 text-red-800"})[e.toLowerCase()]||"bg-gray-100 text-gray-800"}e.i(7670),e.i(19056);let A={primary:"#3b82f6",secondary:"#10b981",tertiary:"#f59e0b"};var I=e.i(98740),L=e.i(49550),F=e.i(80108),B=e.i(75254);let U=(0,B.default)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);var z=e.i(49411),W=e.i(17170);function Y(e){let{title:s,value:a,change:r,icon:l,target:d,isLoading:o}=e;if(o)return(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.Skeleton,{className:"h-4 w-24"}),(0,t.jsx)(c.Skeleton,{className:"h-4 w-4"})]}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)(c.Skeleton,{className:"h-6 w-16 mb-2"}),(0,t.jsx)(c.Skeleton,{className:"h-4 w-20"})]})]});let m=function(e){switch(e){case"increase":return"text-emerald-600";case"decrease":return"text-red-600";default:return"text-gray-600"}}(r.type),x=function(e){switch(e){case"increase":return"↗";case"decrease":return"↘";default:return"→"}}(r.type),u=!d||"decrease"===r.type;return(0,t.jsxs)(n.Card,{className:"relative overflow-hidden",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-gray-600",children:s}),(0,t.jsx)("div",{className:"text-gray-400",children:l})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:a}),(0,t.jsxs)("div",{className:"flex items-center text-sm ".concat(m),children:[(0,t.jsx)("span",{className:"mr-1",children:x}),(0,t.jsxs)("span",{children:[D(r.value)," vs last period"]})]})]}),d&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Target"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"number"==typeof d&&d<100?D(d):S(d)}),(0,t.jsx)(i.Badge,{variant:u?"success":"warning",className:"text-xs",children:u?"On Track":"Off Track"})]})]})})]})}function E(e){let{data:s,isLoading:a}=e;if(a||!s)return(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:Array.from({length:6}).map((e,s)=>(0,t.jsx)(Y,{title:"",value:"",change:{value:0,type:"neutral"},icon:(0,t.jsx)(c.Skeleton,{className:"h-4 w-4"}),isLoading:!0},s))});let r=[{title:"Total Revenue",value:S(s.totalRevenue.current),change:{value:s.totalRevenue.change,type:s.totalRevenue.changeType},icon:(0,t.jsx)(L.default,{className:"h-4 w-4"})},{title:"Guest Count",value:s.guestCount.current.toLocaleString(),change:{value:s.guestCount.change,type:s.guestCount.changeType},icon:(0,t.jsx)(I.default,{className:"h-4 w-4"})},{title:"Avg Order Value",value:S(s.averageOrderValue.current),change:{value:s.averageOrderValue.change,type:s.averageOrderValue.changeType},icon:(0,t.jsx)(F.default,{className:"h-4 w-4"})},{title:"Prime Cost",value:D(s.primeCost.current),change:{value:s.primeCost.change,type:s.primeCost.changeType},icon:(0,t.jsx)(W.default,{className:"h-4 w-4"}),target:s.primeCost.target},{title:"Labor Cost",value:D(s.laborCost.current),change:{value:s.laborCost.change,type:s.laborCost.changeType},icon:(0,t.jsx)(z.default,{className:"h-4 w-4"}),target:s.laborCost.target},{title:"Food Cost",value:D(s.foodCost.current),change:{value:s.foodCost.change,type:s.foodCost.changeType},icon:(0,t.jsx)(U,{className:"h-4 w-4"}),target:s.foodCost.target}];return(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:r.map((e,s)=>(0,t.jsx)(Y,{title:e.title,value:e.value,change:e.change,icon:e.icon,target:e.target},s))})}var H=e.i(29228),K=e.i(55706),P=e.i(85183),X=e.i(93230),G=e.i(72526),V=e.i(34239),q=e.i(31195),Z=e.i(9694),$=e.i(75225),J=e.i(25949),_=e.i(33369),Q=["axis"],ee=(0,s.forwardRef)((e,t)=>s.createElement(_.CartesianChart,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Q,tooltipPayloadSearcher:J.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),et=e.i(237),es=e.i(1725),ea=e.i(67881);function er(e,t){var s;let a,r,l=()=>(0,o.constructFrom)(null==t?void 0:t.in,NaN),n=null!=(s=null==t?void 0:t.additionalDigits)?s:2,i=function(e){let t,s={},a=e.split(el.dateTimeDelimiter);if(a.length>2)return s;if(/:/.test(a[0])?t=a[0]:(s.date=a[0],t=a[1],el.timeZoneDelimiter.test(s.date)&&(s.date=e.split(el.timeZoneDelimiter)[0],t=e.substr(s.date.length,e.length))),t){let e=el.timezone.exec(t);e?(s.time=t.replace(e[1],""),s.timezone=e[1]):s.time=t}return s}(e);if(i.date){let e=function(e,t){let s=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(s);if(!a)return{year:NaN,restDateString:""};let r=a[1]?parseInt(a[1]):null,l=a[2]?parseInt(a[2]):null;return{year:null===l?r:100*l,restDateString:e.slice((a[1]||a[2]).length)}}(i.date,n);a=function(e,t){var s,a,r,l,n,i,c;if(null===t)return new Date(NaN);let d=e.match(en);if(!d)return new Date(NaN);let o=!!d[4],m=ed(d[1]),x=ed(d[2])-1,u=ed(d[3]),h=ed(d[4]),f=ed(d[5])-1;if(o){return(s=h,a=f,s>=1&&s<=53&&a>=0&&a<=6)?function(e,t,s){let a=new Date(0);a.setUTCFullYear(e,0,4);let r=a.getUTCDay()||7;return a.setUTCDate(a.getUTCDate()+((t-1)*7+s+1-r)),a}(t,h,f):new Date(NaN)}{let e=new Date(0);return(r=t,l=x,n=u,l>=0&&l<=11&&n>=1&&n<=(em[l]||(ex(r)?29:28))&&(i=t,(c=m)>=1&&c<=(ex(i)?366:365)))?(e.setUTCFullYear(t,x,Math.max(m,u)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return l();let c=+a,d=0;if(i.time&&isNaN(d=function(e){var t,s,a;let r=e.match(ei);if(!r)return NaN;let l=eo(r[1]),n=eo(r[2]),i=eo(r[3]);return(t=l,s=n,a=i,24===t?0===s&&0===a:a>=0&&a<60&&s>=0&&s<60&&t>=0&&t<25)?l*w.millisecondsInHour+n*w.millisecondsInMinute+1e3*i:NaN}(i.time)))return l();if(i.timezone){if(isNaN(r=function(e){var t;if("Z"===e)return 0;let s=e.match(ec);if(!s)return 0;let a="+"===s[1]?-1:1,r=parseInt(s[2]),l=s[3]&&parseInt(s[3])||0;return(t=l)>=0&&t<=59?a*(r*w.millisecondsInHour+l*w.millisecondsInMinute):NaN}(i.timezone)))return l()}else{let e=new Date(c+d),s=(0,p.toDate)(0,null==t?void 0:t.in);return s.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),s.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),s}return(0,p.toDate)(c+d+r,null==t?void 0:t.in)}let el={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},en=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ei=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ec=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ed(e){return e?parseInt(e):1}function eo(e){return e&&parseFloat(e.replace(",","."))||0}let em=[31,null,31,30,31,30,31,31,30,31,30,31];function ex(e){return e%400==0||e%4==0&&e%100!=0}var eu=e.i(23123),eh=e.i(2040);let ef=(0,B.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function eg(e){let{active:s,payload:a,label:r}=e;if(s&&a&&a.length){let e=er(r||"");return(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-2",children:(0,d.format)(e,"MMM d, yyyy")}),a.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.name})]}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"revenue"===e.dataKey||"averageOrderValue"===e.dataKey?S(e.value):T(e.value)})]},s))]})}return null}function ej(){return(0,t.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"space-y-4 w-full",children:[(0,t.jsx)(c.Skeleton,{className:"h-4 w-full"}),(0,t.jsx)(c.Skeleton,{className:"h-4 w-full"}),(0,t.jsx)(c.Skeleton,{className:"h-4 w-3/4"}),(0,t.jsx)(c.Skeleton,{className:"h-4 w-full"}),(0,t.jsx)(c.Skeleton,{className:"h-4 w-5/6"})]})})}function ev(e){let{data:a,isLoading:r,className:l}=e,[i,o]=(0,s.useState)("line"),[m,x]=(0,s.useState)("30d");if(r||!a)return(0,t.jsxs)(n.Card,{className:l,children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eu.default,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)(n.CardTitle,{children:"Sales Trend"})]}),(0,t.jsx)(c.Skeleton,{className:"h-8 w-32"})]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)(ej,{})})]});let u=a.slice(-("7d"===m?7:"30d"===m?30:90)),h=u.reduce((e,t)=>e+t.revenue,0),f=u.reduce((e,t)=>e+t.orders,0),g=u.reduce((e,t)=>e+t.guests,0);return(0,t.jsxs)(n.Card,{className:l,children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eu.default,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)(n.CardTitle,{children:"Sales Trend"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsx)("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[{value:"7d",label:"7D"},{value:"30d",label:"30D"},{value:"90d",label:"90D"}].map(e=>(0,t.jsx)(ea.Button,{variant:m===e.value?"default":"ghost",size:"sm",onClick:()=>x(e.value),className:"text-xs",children:e.label},e.value))}),(0,t.jsx)("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[{value:"line",icon:ef,label:"Line"},{value:"bar",icon:eh.default,label:"Bar"},{value:"area",icon:eu.default,label:"Area"},{value:"composed",icon:ef,label:"Mixed"}].map(e=>(0,t.jsxs)(ea.Button,{variant:i===e.value?"default":"ghost",size:"sm",onClick:()=>o(e.value),className:"text-xs",children:[(0,t.jsx)(e.icon,{className:"h-3 w-3 mr-1"}),e.label]},e.value))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:S(h)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Total Revenue"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:T(f)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Orders"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:T(g)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Guests"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:S(h/f)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Avg Order"})]})]})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(q.ResponsiveContainer,{width:"100%",height:"100%",children:(()=>{let e={data:u,margin:{top:5,right:30,left:20,bottom:5}};switch(i){case"bar":return(0,t.jsxs)(Z.BarChart,{...e,children:[(0,t.jsx)(G.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,t.jsx)(P.XAxis,{dataKey:"date",tickFormatter:e=>(0,d.format)(er(e),"MMM d"),className:"text-sm"}),(0,t.jsx)(X.YAxis,{yAxisId:"revenue",tickFormatter:S,className:"text-sm"}),(0,t.jsx)(X.YAxis,{yAxisId:"orders",orientation:"right",tickFormatter:T,className:"text-sm"}),(0,t.jsx)(V.Tooltip,{content:(0,t.jsx)(eg,{})}),(0,t.jsx)($.Bar,{yAxisId:"revenue",dataKey:"revenue",fill:A.primary,name:"Revenue",radius:[2,2,0,0]}),(0,t.jsx)($.Bar,{yAxisId:"orders",dataKey:"orders",fill:A.secondary,name:"Orders",radius:[2,2,0,0]})]});case"area":return(0,t.jsxs)(es.AreaChart,{...e,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:A.primary,stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:A.primary,stopOpacity:0})]})}),(0,t.jsx)(G.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,t.jsx)(P.XAxis,{dataKey:"date",tickFormatter:e=>(0,d.format)(er(e),"MMM d"),className:"text-sm"}),(0,t.jsx)(X.YAxis,{tickFormatter:S,className:"text-sm"}),(0,t.jsx)(V.Tooltip,{content:(0,t.jsx)(eg,{})}),(0,t.jsx)(et.Area,{type:"monotone",dataKey:"revenue",stroke:A.primary,fillOpacity:1,fill:"url(#revenueGradient)",name:"Revenue",strokeWidth:2})]});case"composed":return(0,t.jsxs)(ee,{...e,children:[(0,t.jsx)(G.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,t.jsx)(P.XAxis,{dataKey:"date",tickFormatter:e=>(0,d.format)(er(e),"MMM d"),className:"text-sm"}),(0,t.jsx)(X.YAxis,{yAxisId:"revenue",tickFormatter:S,className:"text-sm"}),(0,t.jsx)(X.YAxis,{yAxisId:"orders",orientation:"right",tickFormatter:T,className:"text-sm"}),(0,t.jsx)(V.Tooltip,{content:(0,t.jsx)(eg,{})}),(0,t.jsx)($.Bar,{yAxisId:"revenue",dataKey:"revenue",fill:A.primary,fillOpacity:.6,name:"Revenue",radius:[2,2,0,0]}),(0,t.jsx)(K.Line,{yAxisId:"orders",type:"monotone",dataKey:"orders",stroke:A.secondary,strokeWidth:3,dot:{fill:A.secondary,strokeWidth:2},name:"Orders"})]});default:return(0,t.jsxs)(H.LineChart,{...e,children:[(0,t.jsx)(G.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,t.jsx)(P.XAxis,{dataKey:"date",tickFormatter:e=>(0,d.format)(er(e),"MMM d"),className:"text-sm"}),(0,t.jsx)(X.YAxis,{yAxisId:"revenue",tickFormatter:S,className:"text-sm"}),(0,t.jsx)(X.YAxis,{yAxisId:"orders",orientation:"right",tickFormatter:T,className:"text-sm"}),(0,t.jsx)(V.Tooltip,{content:(0,t.jsx)(eg,{})}),(0,t.jsx)(K.Line,{yAxisId:"revenue",type:"monotone",dataKey:"revenue",stroke:A.primary,strokeWidth:3,dot:{fill:A.primary,strokeWidth:2},name:"Revenue"}),(0,t.jsx)(K.Line,{yAxisId:"orders",type:"monotone",dataKey:"orders",stroke:A.secondary,strokeWidth:3,dot:{fill:A.secondary,strokeWidth:2},name:"Orders"}),(0,t.jsx)(K.Line,{yAxisId:"orders",type:"monotone",dataKey:"guests",stroke:A.tertiary,strokeWidth:2,dot:{fill:A.tertiary,strokeWidth:2},name:"Guests"})]})}})()})})})]})}var ey=e.i(11023);let eN=s.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,ey.cn)("relative overflow-hidden",a),...l,children:(0,t.jsx)("div",{className:"h-full w-full overflow-auto",children:r})})});eN.displayName="ScrollArea";var ep=e.i(63620),eb=e.i(55607);let ew=(0,B.default)("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);var eM=e.i(9657),ek=e.i(63906),eC=e.i(61277),eS=e.i(46753);function eD(e){let{order:s,isLoading:a}=e;if(a)return(0,t.jsx)(n.Card,{className:"mb-3",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(c.Skeleton,{className:"h-4 w-20"}),(0,t.jsx)(c.Skeleton,{className:"h-6 w-16"})]}),(0,t.jsx)(c.Skeleton,{className:"h-3 w-full"}),(0,t.jsx)(c.Skeleton,{className:"h-3 w-3/4"})]})})});let r=O(s.status),l=s.estimatedTime<=5&&"preparing"===s.status;return(0,t.jsx)(n.Card,{className:"mb-3 transition-all hover:shadow-md ".concat(l?"ring-2 ring-red-200":""),children:(0,t.jsxs)(n.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ew,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-sm",children:s.orderNumber})]}),s.table&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,t.jsx)(eb.default,{className:"h-3 w-3"}),s.table]})]}),(0,t.jsx)(i.Badge,{className:r,children:s.status.replace("_"," ")})]}),s.customerName&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(eS.default,{className:"h-3 w-3 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:s.customerName})]}),(0,t.jsxs)("div",{className:"space-y-1 mb-3",children:[s.items.slice(0,2).map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-600",children:[e.quantity,"x ",e.name]}),(0,t.jsx)("span",{className:"font-medium",children:S(e.price*e.quantity)})]},s)),s.items.length>2&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["+",s.items.length-2," more items"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,t.jsx)(z.default,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:R(s.timeOrdered)})]}),(0,t.jsxs)("div",{className:"font-semibold",children:["Total: ",S(s.total)]})]}),l&&(0,t.jsxs)("div",{className:"mt-2 p-2 bg-red-50 rounded-md flex items-center gap-2 text-red-700",children:[(0,t.jsx)(eM.default,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"text-xs font-medium",children:["Urgent - Est. ",s.estimatedTime,"min"]})]})]})})}function eT(e){let{reservation:s,isLoading:a}=e;if(a)return(0,t.jsx)(n.Card,{className:"mb-3",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(c.Skeleton,{className:"h-4 w-24"}),(0,t.jsx)(c.Skeleton,{className:"h-6 w-16"})]}),(0,t.jsx)(c.Skeleton,{className:"h-3 w-full"}),(0,t.jsx)(c.Skeleton,{className:"h-3 w-1/2"})]})})});let r=O(s.status),l=new Date(s.reservationTime)>new Date&&new Date(s.reservationTime).getTime()-new Date().getTime()<36e5;return(0,t.jsx)(n.Card,{className:"mb-3 transition-all hover:shadow-md ".concat(l?"ring-2 ring-blue-200":""),children:(0,t.jsxs)(n.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.default,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-semibold text-sm",children:s.customerName})]}),(0,t.jsx)(i.Badge,{className:r,children:s.status.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(eC.default,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:R(s.reservationTime)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(I.default,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[s.partySize," guests"]})]}),s.table&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(eb.default,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:s.table})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(ep.default,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:s.phoneNumber})]})]}),s.specialRequests&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 bg-gray-50 p-2 rounded",children:[(0,t.jsx)("strong",{children:"Note:"})," ",s.specialRequests]}),l&&(0,t.jsxs)("div",{className:"mt-2 p-2 bg-blue-50 rounded-md flex items-center gap-2 text-blue-700",children:[(0,t.jsx)(eM.default,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Arriving soon"})]})]})})}function eR(e){let{title:s}=e;return(0,t.jsxs)(n.Card,{className:"h-full",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(c.Skeleton,{className:"h-4 w-4"}),s]}),(0,t.jsx)(c.Skeleton,{className:"h-8 w-8"})]})}),(0,t.jsx)(n.CardContent,{className:"p-0",children:(0,t.jsx)(eN,{className:"h-96 px-4",children:Array.from({length:3}).map((e,s)=>(0,t.jsx)(n.Card,{className:"mb-3",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(c.Skeleton,{className:"h-4 w-20"}),(0,t.jsx)(c.Skeleton,{className:"h-6 w-16"})]}),(0,t.jsx)(c.Skeleton,{className:"h-3 w-full"}),(0,t.jsx)(c.Skeleton,{className:"h-3 w-3/4"})]})})},s))})})]})}function eO(e){let{orders:a,isLoading:r,onRefresh:l}=e,[c,d]=(0,s.useState)(!1),o=async()=>{d(!0),null==l||l(),setTimeout(()=>d(!1),1e3)};return r?(0,t.jsx)(eR,{title:"Live Orders"}):(0,t.jsxs)(n.Card,{className:"h-full",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(F.default,{className:"h-4 w-4 text-blue-600"}),"Live Orders",a&&a.length>0&&(0,t.jsx)(i.Badge,{variant:"secondary",className:"ml-2",children:a.length})]}),(0,t.jsx)(ea.Button,{variant:"ghost",size:"sm",onClick:o,disabled:c,className:"h-8 w-8 p-0",children:(0,t.jsx)(ek.default,{className:"h-4 w-4 ".concat(c?"animate-spin":"")})})]})}),(0,t.jsx)(n.CardContent,{className:"p-0",children:(0,t.jsx)(eN,{className:"h-96 px-4",children:a&&a.length>0?a.map(e=>(0,t.jsx)(eD,{order:e},e.id)):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(F.default,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),(0,t.jsx)("p",{className:"text-sm",children:"No active orders"})]})})})]})}function eA(e){let{reservations:a,isLoading:r,onRefresh:l}=e,[c,d]=(0,s.useState)(!1),o=async()=>{d(!0),null==l||l(),setTimeout(()=>d(!1),1e3)};return r?(0,t.jsx)(eR,{title:"Reservations"}):(0,t.jsxs)(n.Card,{className:"h-full",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(eC.default,{className:"h-4 w-4 text-green-600"}),"Reservations",a&&a.length>0&&(0,t.jsx)(i.Badge,{variant:"secondary",className:"ml-2",children:a.length})]}),(0,t.jsx)(ea.Button,{variant:"ghost",size:"sm",onClick:o,disabled:c,className:"h-8 w-8 p-0",children:(0,t.jsx)(ek.default,{className:"h-4 w-4 ".concat(c?"animate-spin":"")})})]})}),(0,t.jsx)(n.CardContent,{className:"p-0",children:(0,t.jsx)(eN,{className:"h-96 px-4",children:a&&a.length>0?a.map(e=>(0,t.jsx)(eT,{reservation:e},e.id)):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(eC.default,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),(0,t.jsx)("p",{className:"text-sm",children:"No upcoming reservations"})]})})})]})}function eI(e){let{orders:s,reservations:a,isLoading:r,onRefresh:l}=e;return(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsx)(eO,{orders:s,isLoading:r,onRefresh:l}),(0,t.jsx)(eA,{reservations:a,isLoading:r,onRefresh:l})]})}var eL=e.i(18566),eF=e.i(13592),eB=e.i(85890),eU=e.i(14522),ez=e.i(7935),eW=e.i(8199),eY=e.i(33331);function eE(e,t,s){return(0,eY.addWeeks)(e,-t,s)}var eH=e.i(88594);function eK(e,t,s){return(0,eH.addMonths)(e,-t,s)}function eP(){let e=new Date;return[{key:"today",label:"Today",dateRange:{from:(0,eB.startOfDay)(e),to:k(e)},description:(0,d.format)(e,"MMM d, yyyy")},{key:"yesterday",label:"Yesterday",dateRange:{from:(0,eB.startOfDay)(f(e,1)),to:k(f(e,1))},description:(0,d.format)(f(e,1),"MMM d, yyyy")},{key:"last7Days",label:"Last 7 Days",dateRange:{from:(0,eB.startOfDay)(f(e,6)),to:k(e)},description:"".concat((0,d.format)(f(e,6),"MMM d")," - ").concat((0,d.format)(e,"MMM d"))},{key:"thisWeek",label:"This Week",dateRange:{from:(0,eU.startOfWeek)(e,{weekStartsOn:1}),to:(0,ez.endOfWeek)(e,{weekStartsOn:1})},description:"".concat((0,d.format)((0,eU.startOfWeek)(e,{weekStartsOn:1}),"MMM d")," - ").concat((0,d.format)((0,ez.endOfWeek)(e,{weekStartsOn:1}),"MMM d"))},{key:"lastWeek",label:"Last Week",dateRange:{from:(0,eU.startOfWeek)(eE(e,1),{weekStartsOn:1}),to:(0,ez.endOfWeek)(eE(e,1),{weekStartsOn:1})},description:"".concat((0,d.format)((0,eU.startOfWeek)(eE(e,1),{weekStartsOn:1}),"MMM d")," - ").concat((0,d.format)((0,ez.endOfWeek)(eE(e,1),{weekStartsOn:1}),"MMM d"))},{key:"last30Days",label:"Last 30 Days",dateRange:{from:(0,eB.startOfDay)(f(e,29)),to:k(e)},description:"".concat((0,d.format)(f(e,29),"MMM d")," - ").concat((0,d.format)(e,"MMM d"))},{key:"thisMonth",label:"This Month",dateRange:{from:(0,eW.startOfMonth)(e),to:(0,C.endOfMonth)(e)},description:(0,d.format)(e,"MMMM yyyy")},{key:"lastMonth",label:"Last Month",dateRange:{from:(0,eW.startOfMonth)(eK(e,1)),to:(0,C.endOfMonth)(eK(e,1))},description:(0,d.format)(eK(e,1),"MMMM yyyy")},{key:"last90Days",label:"Last 90 Days",dateRange:{from:(0,eB.startOfDay)(f(e,89)),to:k(e)},description:"".concat((0,d.format)(f(e,89),"MMM d")," - ").concat((0,d.format)(e,"MMM d"))}]}function eX(e){var a,r;let{value:l,onChange:c,onRefresh:o,isLoading:m,className:x}=e,h=(0,eL.useRouter)(),f=(0,eL.useSearchParams)(),[j,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=f.get("from"),t=f.get("to");if(e&&t&&!l){let s=new Date(e),a=new Date(t);isNaN(s.getTime())||isNaN(a.getTime())||null==c||c({from:s,to:a})}},[f,l,c]);let y=e=>{null==c||c(e);let t=new URLSearchParams(f.toString());(null==e?void 0:e.from)&&(null==e?void 0:e.to)?(t.set("from",e.from.toISOString()),t.set("to",e.to.toISOString())):(t.delete("from"),t.delete("to")),h.push("?".concat(t.toString()),{scroll:!1}),v(!1)},N=e=>{y(e.dateRange)},p=eP(),b=function(e){if(!(null==e?void 0:e.from)||!(null==e?void 0:e.to))return null;for(let t of eP())if(t.dateRange.from.getTime()===e.from.getTime()&&t.dateRange.to.getTime()===e.to.getTime())return t.key;return null}(l);return(0,t.jsx)(n.Card,{className:x,children:(0,t.jsxs)(n.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eC.default,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date Range:"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eF.DateRangePicker,{value:l,onChange:y,placeholder:"Select date range",className:"w-auto"}),l&&(0,t.jsx)(ea.Button,{variant:"ghost",size:"sm",onClick:()=>{y(void 0)},className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:o&&(0,t.jsxs)(ea.Button,{variant:"outline",size:"sm",onClick:o,disabled:m,className:"flex items-center gap-2",children:[(0,t.jsx)(ek.default,{className:"h-3 w-3 ".concat(m?"animate-spin":"")}),"Refresh"]})})]}),l&&(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,t.jsx)(z.default,{className:"h-3 w-3 text-blue-500"}),(0,t.jsx)("span",{className:"text-sm text-blue-600 font-medium",children:(null==(r=l)?void 0:r.from)?r.to?u(r.from)&&u(r.to)?"Today":g(r.from)&&g(r.to)?"Yesterday":r.from.getTime()===r.to.getTime()?(0,d.format)(r.from,"MMM d, yyyy"):r.from.getFullYear()===r.to.getFullYear()?r.from.getMonth()===r.to.getMonth()?"".concat((0,d.format)(r.from,"MMM d")," - ").concat((0,d.format)(r.to,"d, yyyy")):"".concat((0,d.format)(r.from,"MMM d")," - ").concat((0,d.format)(r.to,"MMM d, yyyy")):"".concat((0,d.format)(r.from,"MMM d, yyyy")," - ").concat((0,d.format)(r.to,"MMM d, yyyy")):(0,d.format)(r.from,"MMM d, yyyy"):"Select date range"}),b&&(0,t.jsx)(i.Badge,{variant:"secondary",className:"text-xs",children:null==(a=p.find(e=>e.key===b))?void 0:a.label})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-2",children:"Quick Select:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:p.slice(0,6).map(e=>(0,t.jsx)(ea.Button,{variant:b===e.key?"default":"outline",size:"sm",onClick:()=>N(e),className:"text-xs",children:e.label},e.key))})]}),j&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:p.slice(6).map(e=>(0,t.jsx)(ea.Button,{variant:b===e.key?"default":"outline",size:"sm",onClick:()=>N(e),className:"text-xs",children:e.label},e.key))})}),p.length>6&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(ea.Button,{variant:"ghost",size:"sm",onClick:()=>v(!j),className:"text-xs text-gray-500",children:j?"Show Less":"More Options"})})]})})}var eG=e.i(19036),eV=e.i(81947);let eq=(0,B.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var eZ=e.i(11598);let e$=(0,B.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),eJ=(0,B.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var e_=e.i(3446);let eQ=(0,B.default)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);function e0(e){var a;let{config:r,onConfigChange:l,isConnected:n,lastUpdate:c,className:d}=e,[o,m]=(0,s.useState)(!1),x=e=>{l({...r,...e})};return(0,t.jsxs)("div",{className:d,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:n?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(eq,{className:"h-4 w-4"}),r.enabled&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Live"})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,t.jsx)(eZ.default,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Offline"})]})}),(0,t.jsx)(i.Badge,{variant:r.enabled?"default":"secondary",className:"text-xs",children:r.enabled?"Active":"Paused"}),r.enabled&&(0,t.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:(a=r.interval)<6e4?"".concat(a/1e3,"s"):a<36e5?"".concat(a/6e4,"m"):"".concat(a/36e5,"h")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Updated ",(e=>{if(!e)return"Never";let t=new Date().getTime()-e.getTime();if(t<6e4)return"Just now";if(t<36e5){let e=Math.floor(t/6e4);return"".concat(e,"m ago")}{let e=Math.floor(t/36e5);return"".concat(e,"h ago")}})(c)]}),(0,t.jsx)(ea.Button,{variant:"ghost",size:"sm",onClick:()=>x({enabled:!r.enabled}),className:"h-8 w-8 p-0",children:r.enabled?(0,t.jsx)(e$,{className:"h-3 w-3"}):(0,t.jsx)(eJ,{className:"h-3 w-3"})}),(0,t.jsx)(ea.Button,{variant:"ghost",size:"sm",onClick:()=>m(!o),className:"h-8 w-8 p-0",children:(0,t.jsx)(e_.default,{className:"h-3 w-3"})})]})]}),o&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Auto Refresh"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Automatically update data"})]}),(0,t.jsx)(eG.Switch,{checked:r.autoRefresh,onCheckedChange:e=>x({autoRefresh:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-sm font-medium flex items-center gap-1",children:[r.notifications?(0,t.jsx)(eM.default,{className:"h-3 w-3"}):(0,t.jsx)(eQ,{className:"h-3 w-3"}),"Notifications"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Alert on important updates"})]}),(0,t.jsx)(eG.Switch,{checked:r.notifications,onCheckedChange:e=>x({notifications:e})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-2",children:"Refresh Interval"}),(0,t.jsx)("div",{className:"flex gap-2",children:[{value:1e4,label:"10s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:3e5,label:"5m"}].map(e=>(0,t.jsx)(ea.Button,{variant:r.interval===e.value?"default":"outline",size:"sm",onClick:()=>x({interval:e.value}),className:"text-xs",children:e.label},e.value))})]})]})]})}function e1(e){let{isConnected:s,onRetry:a,className:r}=e;return s?null:(0,t.jsxs)(eV.Alert,{className:r,children:[(0,t.jsx)(eZ.default,{className:"h-4 w-4"}),(0,t.jsxs)(eV.AlertDescription,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Connection lost. Real-time updates are paused."}),a&&(0,t.jsxs)(ea.Button,{variant:"outline",size:"sm",onClick:a,className:"ml-2",children:[(0,t.jsx)(ek.default,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}var e2=e.i(94248);e.i(23750),e.i(79664),e.i(14390),e.i(2957),e.i(88949);var e4=e.i(22235);e.i(44405);let e3=(0,B.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var e5=e.i(76886);function e6(e){let{initialData:a,initialDateRange:c}=e,[o,m]=(0,s.useState)(a),[x,u]=(0,s.useState)(c),[h,f]=(0,s.useState)(!1),[g,j]=(0,s.useState)(null),{isEnabled:v,isConnected:y,lastUpdate:N,toggle:p,forceUpdate:b,config:w,updateConfig:M}=function(){let{interval:e=3e4,enabled:t=!0,onUpdate:a,onError:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[l,n]=(0,s.useState)(()=>{{let e=localStorage.getItem("dashboard-realtime-config");if(e)try{return{...JSON.parse(e),enabled:t}}catch(e){}}return{enabled:t,interval:e,autoRefresh:!0,notifications:!0,syncData:!0}}),[i,c]=(0,s.useState)(!1),[d,o]=(0,s.useState)(null),m=(0,s.useRef)(null),x=(0,s.useRef)(0);(0,s.useEffect)(()=>{localStorage.setItem("dashboard-realtime-config",JSON.stringify(l))},[l]);let u=(0,s.useCallback)(async()=>{try{await (null==a?void 0:a()),c(!0),o(new Date),x.current=0}catch(e){console.error("Real-time update failed:",e),x.current++,x.current>=3&&(c(!1),null==r||r(e instanceof Error?e:Error("Update failed")))}},[a,r]);(0,s.useEffect)(()=>{if(l.enabled&&l.autoRefresh)return u(),m.current=setInterval(u,l.interval),()=>{m.current&&(clearInterval(m.current),m.current=null)};m.current&&(clearInterval(m.current),m.current=null),c(!1)},[l.enabled,l.autoRefresh,l.interval,u]),(0,s.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState?m.current&&(clearInterval(m.current),m.current=null):"visible"===document.visibilityState&&l.enabled&&l.autoRefresh&&(u(),m.current=setInterval(u,l.interval))};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[l.enabled,l.autoRefresh,l.interval,u]);let h=(0,s.useCallback)(()=>{n(e=>({...e,enabled:!e.enabled}))},[]),f=(0,s.useCallback)(()=>{u()},[u]),g=(0,s.useCallback)(e=>{n(t=>({...t,...e}))},[]);return{isEnabled:l.enabled,isConnected:i,lastUpdate:d,toggle:h,forceUpdate:f,config:l,updateConfig:g}}({interval:3e4,enabled:!0,onUpdate:(0,s.useCallback)(async()=>{try{j(null);let e=await l(x);m(e)}catch(e){throw console.error("Failed to update dashboard data:",e),e}},[x]),onError:(0,s.useCallback)(e=>{j(e.message)},[])}),k=(0,s.useCallback)(async()=>{f(!0),j(null);try{let e=await l(x);m(e),await r()}catch(e){j(e instanceof Error?e.message:"Failed to refresh data"),console.error("Dashboard refresh failed:",e)}finally{f(!1)}},[x]),C=(0,s.useCallback)(async e=>{u(e),f(!0),j(null);try{let t=await l(e);m(t)}catch(e){j(e instanceof Error?e.message:"Failed to update data for date range"),console.error("Date range update failed:",e)}finally{f(!1)}},[]),S=o.kpis.totalRevenue.current,D=o.kpis.guestCount.current,T=o.liveOrders.filter(e=>["pending","preparing","ready"].includes(e.status)).length;return o.liveReservations.filter(e=>"confirmed"===e.status).length,(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsx)(e2.PageHeader,{title:(null==x?void 0:x.from)&&(null==x?void 0:x.to)?"Dashboard - ".concat(function(e,t){let s=(0,d.format)(e,"MMM d"),a=(0,d.format)(t,"MMM d, yyyy");return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()?"".concat((0,d.format)(e,"MMM d")," - ").concat((0,d.format)(t,"d, yyyy")):"".concat(s," - ").concat(a)}(x.from,x.to)):"Restaurant Dashboard",description:"Real-time analytics and operational insights",icon:(0,t.jsx)(e3,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(L.default,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)("span",{className:"font-medium",children:S.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(I.default,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)("span",{className:"font-medium",children:[D," guests"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(z.default,{className:"h-4 w-4 text-orange-600"}),(0,t.jsxs)(i.Badge,{variant:"secondary",children:[T," active orders"]})]})]})]}),g&&(0,t.jsx)(e1,{isConnected:!1,onRetry:k,className:"border-red-200 bg-red-50"}),(0,t.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,t.jsx)(eX,{value:x,onChange:C,onRefresh:k,isLoading:h}),(0,t.jsx)(e0,{config:w,onConfigChange:M,isConnected:y,lastUpdate:N})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Performance Indicators"}),(0,t.jsx)(E,{data:o.kpis,isLoading:h})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sales Analytics"}),(0,t.jsx)(ev,{data:o.salesTrend,isLoading:h,className:"w-full"})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Live Operations"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Badge,{variant:"outline",className:"text-xs",children:[o.liveOrders.length," orders"]}),(0,t.jsxs)(i.Badge,{variant:"outline",className:"text-xs",children:[o.liveReservations.length," reservations"]})]})]}),(0,t.jsx)(eI,{orders:o.liveOrders,reservations:o.liveReservations,isLoading:h,onRefresh:b})]}),(0,t.jsx)("section",{children:(0,t.jsxs)(e4.Tabs,{defaultValue:"products",className:"w-full",children:[(0,t.jsxs)(e4.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(e4.TabsTrigger,{value:"products",className:"flex items-center gap-2",children:[(0,t.jsx)(e5.default,{className:"h-4 w-4"}),"Top Products"]}),(0,t.jsxs)(e4.TabsTrigger,{value:"staff",className:"flex items-center gap-2",children:[(0,t.jsx)(I.default,{className:"h-4 w-4"}),"Staff Performance"]})]}),(0,t.jsx)(e4.TabsContent,{value:"products",className:"mt-4",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(e5.default,{className:"h-5 w-5 text-yellow-600"}),"Top Selling Products"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:o.topProducts.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full text-sm font-medium",children:s+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.category})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-medium",children:[e.quantitySold," sold"]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.revenue.toLocaleString("en-US",{style:"currency",currency:"USD"})})]})]},e.id))})})]})}),(0,t.jsx)(e4.TabsContent,{value:"staff",className:"mt-4",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(I.default,{className:"h-5 w-5 text-green-600"}),"Staff Performance"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:o.staffPerformance.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-green-100 text-green-600 rounded-full text-sm font-medium",children:s+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-medium",children:e.salesAmount.toLocaleString("en-US",{style:"currency",currency:"USD"})}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.ordersProcessed," orders • ",e.hoursWorked,"h"]})]})]},e.id))})})]})})]})})]})]})}}]);