(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4565,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(75254).default)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]])},89860,e=>{"use strict";function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function s(e,t){return"".concat(e.toFixed(2)," ").concat(t)}e.s(["formatCurrency",()=>t,"formatQuantity",()=>s])},75925,e=>{"use strict";e.s(["InventoryDashboard",()=>b],75925);var t=e.i(43476),s=e.i(71645),a=e.i(72459),r=e.i(82458),l=e.i(49411),i=e.i(73488),n=e.i(23429),c=e.i(4565),o=e.i(3908),d=e.i(84207),m=e.i(87942),x=e.i(67881),u=e.i(94179),h=e.i(44405),g=e.i(89860),v=e.i(42090);function p(e){let{item:p,onClick:f,compact:b=!1,className:j}=e,[y,N]=(0,s.useState)(!1),w=p.currentStock<=0?{status:"out-of-stock",color:"bg-red-100 text-red-800 border-red-300",label:"Out of Stock",icon:r.default,iconColor:"text-red-500"}:p.currentStock<=p.minimumStock?{status:"low-stock",color:"bg-orange-100 text-orange-800 border-orange-300",label:"Low Stock",icon:r.default,iconColor:"text-orange-500"}:p.maximumStock&&p.currentStock>=p.maximumStock?{status:"overstock",color:"bg-purple-100 text-purple-800 border-purple-300",label:"Overstock",icon:a.default,iconColor:"text-purple-500"}:{status:"normal",color:"bg-green-100 text-green-800 border-green-300",label:"In Stock",icon:a.default,iconColor:"text-green-500"},k=p.maximumStock?p.currentStock/p.maximumStock*100:p.minimumStock>0?Math.min(p.currentStock/(2*p.minimumStock)*100,100):50,S=w.icon;return(0,t.jsxs)("div",{className:(0,v.cn)("bg-white rounded-lg border border-gray-200 transition-all duration-200 hover:shadow-md group",b?"p-4":"p-6",f&&"cursor-pointer hover:border-blue-300",j),onClick:f,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate group-hover:text-blue-600",children:p.name}),p.description&&!b&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:p.description})]}),(0,t.jsx)(h.Dropdown,{trigger:(0,t.jsx)(x.Button,{variant:"ghost",size:"sm",className:(0,v.cn)("opacity-0 group-hover:opacity-100 transition-opacity",y&&"opacity-100"),onClick:e=>e.stopPropagation(),children:(0,t.jsx)(i.default,{className:"h-4 w-4"})}),items:[{icon:m.default,label:"View Details",onClick:()=>console.log("View details:",p.id)},{icon:n.default,label:"Edit Item",onClick:()=>console.log("Edit item:",p.id)},{icon:c.default,label:"Transfer Stock",onClick:()=>console.log("Transfer stock:",p.id)},{icon:d.default,label:"Scan Barcode",onClick:()=>console.log("Scan barcode:",p.id)}]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[p.sku&&(0,t.jsx)(u.Badge,{variant:"secondary",className:"text-xs",children:p.sku}),p.supplierName&&(0,t.jsx)("span",{className:"text-xs text-gray-500 truncate",children:p.supplierName})]})]}),(0,t.jsx)("div",{className:"ml-3 flex-shrink-0",children:(0,t.jsx)("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(a.default,{className:"h-6 w-6 text-gray-400"})})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(S,{className:(0,v.cn)("h-4 w-4",w.iconColor)}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,g.formatQuantity)(p.currentStock,"units")})]}),(0,t.jsx)(u.Badge,{variant:"secondary",className:(0,v.cn)("text-xs border",w.color),children:w.label})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:(0,v.cn)("h-2 rounded-full transition-all",k<=25?"bg-red-500":k<=50?"bg-orange-500":"bg-green-500"),style:{width:"".concat(Math.max(5,Math.min(100,k)),"%")}})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["Min: ",(0,g.formatQuantity)(p.minimumStock,"units")]}),p.maximumStock&&(0,t.jsxs)("span",{children:["Max: ",(0,g.formatQuantity)(p.maximumStock,"units")]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(0,g.formatCurrency)(p.costPrice)}),p.averageCost&&p.averageCost!==p.costPrice&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Avg: ",(0,g.formatCurrency)(p.averageCost)]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[p.isPerishable&&p.shelfLife&&p.shelfLife<=3&&(0,t.jsxs)(u.Badge,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300 text-xs",children:[(0,t.jsx)(l.default,{className:"h-3 w-3 mr-1"}),"Expiring"]}),p.isPerishable&&(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full",title:"Perishable item"})]})]}),!b&&(0,t.jsxs)("div",{className:(0,v.cn)("flex items-center space-x-2 pt-3 border-t border-gray-100 transition-opacity",y?"opacity-100":"opacity-0"),children:[(0,t.jsxs)(x.Button,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:e=>{e.stopPropagation(),console.log("Quick adjust stock:",p.id)},children:[(0,t.jsx)(o.default,{className:"h-3 w-3 mr-1"}),"Adjust"]}),(0,t.jsxs)(x.Button,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:e=>{e.stopPropagation(),console.log("Quick transfer:",p.id)},children:[(0,t.jsx)(c.default,{className:"h-3 w-3 mr-1"}),"Transfer"]}),(0,t.jsx)(x.Button,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",onClick:e=>{e.stopPropagation(),console.log("Quick scan:",p.id)},children:(0,t.jsx)(d.default,{className:"h-3 w-3"})})]}),b&&(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Updated ",new Date(p.updatedAt).toLocaleDateString()]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(x.Button,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0",onClick:e=>{e.stopPropagation(),console.log("Mobile adjust:",p.id)},children:(0,t.jsx)(o.default,{className:"h-3 w-3"})}),(0,t.jsx)(x.Button,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0",onClick:e=>{e.stopPropagation(),console.log("Mobile transfer:",p.id)},children:(0,t.jsx)(c.default,{className:"h-3 w-3"})})]})]})]}),y&&(0,t.jsx)("div",{className:"absolute inset-0 bg-blue-50 bg-opacity-50 rounded-lg pointer-events-none sm:hidden"})]})}var f=e.i(90472);function b(e){let{initialData:a,initialFilters:r,view:l="grid",onItemSelect:i,className:n}=e,[c,o]=(0,s.useState)(a||{data:[],total:0,page:1,limit:50}),[d,m]=(0,s.useState)(!a);return((0,s.useEffect)(()=>{(async()=>{if(!a){m(!0);try{let e=await (0,f.getInventoryItems)(r);o(e)}catch(e){console.error("Failed to fetch inventory data:",e)}finally{m(!1)}}})()},[r,a]),d)?(0,t.jsx)("div",{className:n,children:(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6",children:[1,2,3,4,5,6,7,8].map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 animate-pulse",children:[(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded mb-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-2/3"})]})]},e))})}):0===c.data.length?(0,t.jsx)("div",{className:"".concat(n," flex items-center justify-center min-h-96"),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("span",{className:"text-gray-400 text-xl",children:"ðŸ“¦"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters or add new inventory items."})]})}):(0,t.jsxs)("div",{className:n,children:[(0,t.jsx)("div",{className:"grid"===l?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6":"space-y-4 p-6",children:c.data.map(e=>(0,t.jsx)(p,{item:e,onClick:()=>null==i?void 0:i(e),compact:"cards"===l},e.id))}),c.total>c.data.length&&(0,t.jsx)("div",{className:"p-6 text-center",children:(0,t.jsxs)("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:["Load more items (",c.total-c.data.length," remaining)"]})})]})}},14896,e=>{"use strict";e.s(["InventoryMetricsCards",()=>x]);var t=e.i(43476),s=e.i(71645),a=e.i(23123),r=e.i(91393),l=e.i(72459),i=e.i(82458),n=e.i(12329),c=e.i(49550),o=e.i(88949),d=e.i(89860),m=e.i(90472);function x(e){var x,u,h,g;let{initialMetrics:v,className:p}=e,[f,b]=(0,s.useState)(v||null),[j,y]=(0,s.useState)(!v);if((0,s.useEffect)(()=>{let e=async()=>{try{let e=await (0,m.getInventoryMetrics)();b(e)}catch(e){console.error("Failed to fetch metrics:",e)}finally{y(!1)}};v||e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[v]),j||!f)return(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 ".concat(p),children:[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-16"})]}),(0,t.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded-full"})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"})})]},e))});f.lowStockItems,f.outOfStockItems,f.totalItems;let N=(x=f.lowStockItems,u=f.outOfStockItems,f.totalItems,u>0?"".concat(u," out of stock"):x>0?"".concat(x," low stock"):"Stock levels good"),w=(h=f.turnoverRate)>=8?{icon:a.default,color:"text-green-600",label:"Excellent"}:h>=4?{icon:a.default,color:"text-blue-600",label:"Good"}:h>=2?{icon:r.default,color:"text-orange-600",label:"Slow"}:{icon:r.default,color:"text-red-600",label:"Poor"},k=(g=f.wasteValue)>1e3?{icon:a.default,color:"text-red-600",trend:"+15%"}:g>500?{icon:a.default,color:"text-orange-600",trend:"+5%"}:{icon:r.default,color:"text-green-600",trend:"-8%"};return(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 ".concat(p),children:[(0,t.jsx)(o.StatCard,{title:"Total Value",value:(0,d.formatCurrency)(f.totalValue),icon:(0,t.jsx)(c.default,{className:"h-4 w-4"}),subtitle:"".concat(f.totalItems," items"),trend:{value:2.3,direction:"up",period:"last week"},className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200"}),(0,t.jsx)(o.StatCard,{title:"Stock Status",value:"".concat(f.totalItems-f.lowStockItems," of ").concat(f.totalItems),icon:(0,t.jsx)(l.default,{className:"h-4 w-4"}),subtitle:N,className:"bg-gradient-to-r from-green-50 to-green-100 border-green-200"}),(0,t.jsx)(o.StatCard,{title:"Expiring Soon",value:f.expiringItems.toString(),icon:(0,t.jsx)(i.default,{className:"h-4 w-4"}),subtitle:"Items expiring in 3 days",className:"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200"}),(0,t.jsx)(o.StatCard,{title:"Weekly Waste",value:(0,d.formatCurrency)(f.wasteValue),icon:(0,t.jsx)(n.default,{className:"h-4 w-4"}),subtitle:"This week's total",trend:{value:8,direction:k.color.includes("green")?"down":"up",period:"last week"},className:"bg-gradient-to-r from-red-50 to-red-100 border-red-200"}),(0,t.jsxs)("div",{className:"lg:col-span-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Turnover Rate"}),(0,t.jsxs)("div",{className:"flex items-baseline",children:[(0,t.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[f.turnoverRate.toFixed(1),"x"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 ml-1",children:"annually"})]})]}),s.default.createElement(w.icon,{className:"h-5 w-5 ".concat(w.color)})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("p",{className:"text-xs ".concat(w.color),children:[w.label," turnover rate"]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Days to Turn"}),(0,t.jsxs)("div",{className:"flex items-baseline",children:[(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:Math.round(f.averageDaysToTurnover)}),(0,t.jsx)("p",{className:"text-sm text-gray-500 ml-1",children:"days"})]})]})}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Average inventory cycle"})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-orange-600",children:f.lowStockItems})]}),(0,t.jsx)(l.default,{className:"h-5 w-5 text-orange-500"})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Items need reordering"})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-red-600",children:f.outOfStockItems})]}),(0,t.jsx)(i.default,{className:"h-5 w-5 text-red-500"})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Items unavailable"})})]})]})]})}},71214,e=>{"use strict";e.s(["InventoryFilters",()=>u]);var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(54943),l=e.i(13692),i=e.i(41947),n=e.i(72459),c=e.i(23750),o=e.i(67881),d=e.i(94179),m=e.i(42090),x=e.i(90472);function u(e){var u,h,g,v,p,f;let{initialFilters:b,onFiltersChange:j,className:y}=e,N=(0,a.useRouter)(),w=(0,a.useSearchParams)(),[k,S]=(0,s.useState)(b||{}),[C,I]=(0,s.useState)([]),[E,A]=(0,s.useState)([]),[B,P]=(0,s.useState)([]),[M,D]=(0,s.useState)(!1),[O,T]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let[e,t,s]=await Promise.all([(0,x.getProductCategories)(),(0,x.getSuppliers)(),(0,x.getLocations)()]);I(e),A(t.data),P(s)}catch(e){console.error("Failed to load filter data:",e)}finally{T(!1)}})()},[]),(0,s.useEffect)(()=>{let e=new URLSearchParams(w.toString());["search","category","supplier","location","status","lowStock","outOfStock","expiring"].forEach(t=>{e.delete(t)}),Object.entries(k).forEach(t=>{let[s,a]=t;null!=a&&""!==a&&("boolean"==typeof a?a&&e.set(s,"true"):"categoryId"===s?e.set("category",a.toString()):"supplierId"===s?e.set("supplier",a.toString()):"locationId"===s?e.set("location",a.toString()):e.set(s,a.toString()))}),N.push("?".concat(e.toString()),{scroll:!1}),null==j||j(k)},[k,N,w,j]);let F=(e,t)=>{S(s=>({...s,[e]:t}))},z=e=>{S(t=>{let s={...t};return delete s[e],s})},R=()=>Object.entries(k).filter(e=>{let[t,s]=e;return"search"===t?s&&""!==s.trim():null!=s&&""!==s}).length,U=[{key:"lowStock",label:"Low Stock",icon:n.default,color:"bg-orange-100 text-orange-800 border-orange-300"},{key:"outOfStock",label:"Out of Stock",icon:n.default,color:"bg-red-100 text-red-800 border-red-300"},{key:"expiring",label:"Expiring Soon",icon:n.default,color:"bg-yellow-100 text-yellow-800 border-yellow-300"}];return O?(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 ".concat(y),children:(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse flex-1"},e))})}):(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 ".concat(y),children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(r.default,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)(c.Input,{type:"search",placeholder:"Search items, SKUs, barcodes...",value:k.search||"",onChange:e=>F("search",e.target.value),className:"pl-10"})]}),(0,t.jsxs)("select",{value:k.categoryId||"",onChange:e=>F("categoryId",e.target.value||void 0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Categories"}),C.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("select",{value:k.supplierId||"",onChange:e=>F("supplierId",e.target.value||void 0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Suppliers"}),E.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("select",{value:k.locationId||"",onChange:e=>F("locationId",e.target.value||void 0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Locations"}),B.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)(o.Button,{variant:"outline",onClick:()=>D(!M),className:"flex items-center",children:[(0,t.jsx)(l.default,{className:"h-4 w-4 mr-1"}),"Filters",R()>0&&(0,t.jsx)(d.Badge,{variant:"secondary",className:"ml-2 px-1.5 py-0.5 text-xs",children:R()})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:U.map(e=>{let s=k[e.key],a=e.icon;return(0,t.jsxs)("button",{onClick:()=>F(e.key,!s),className:(0,m.cn)("flex items-center px-3 py-1.5 rounded-full text-sm font-medium border transition-colors",s?e.color:"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"),children:[(0,t.jsx)(a,{className:"h-3 w-3 mr-1"}),e.label]},e.key)})}),M&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsxs)("select",{value:k.status||"",onChange:e=>F("status",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"}),(0,t.jsx)("option",{value:"discontinued",children:"Discontinued"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(c.Input,{type:"number",placeholder:"Min",value:(null==(u=k.priceRange)?void 0:u[0])||"",onChange:e=>{var t;let s=e.target.value?parseFloat(e.target.value):void 0,a=null==(t=k.priceRange)?void 0:t[1];F("priceRange",void 0!==s||void 0!==a?[s,a]:void 0)},className:"flex-1"}),(0,t.jsx)(c.Input,{type:"number",placeholder:"Max",value:(null==(h=k.priceRange)?void 0:h[1])||"",onChange:e=>{var t;let s=e.target.value?parseFloat(e.target.value):void 0,a=null==(t=k.priceRange)?void 0:t[0];F("priceRange",void 0!==a||void 0!==s?[a,s]:void 0)},className:"flex-1"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),(0,t.jsx)(c.Input,{placeholder:"Enter tags...",value:(null==(g=k.tags)?void 0:g.join(", "))||"",onChange:e=>{let t=e.target.value.split(",").map(e=>e.trim()).filter(Boolean);F("tags",t.length>0?t:void 0)}})]})]})}),R()>0&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 mr-2",children:"Active filters:"}),k.search&&(0,t.jsxs)(d.Badge,{variant:"secondary",className:"flex items-center",children:['Search: "',k.search,'"',(0,t.jsx)(i.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>z("search")})]}),k.categoryId&&(0,t.jsxs)(d.Badge,{variant:"secondary",className:"flex items-center",children:[null==(v=C.find(e=>e.id===k.categoryId))?void 0:v.name,(0,t.jsx)(i.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>z("categoryId")})]}),k.supplierId&&(0,t.jsxs)(d.Badge,{variant:"secondary",className:"flex items-center",children:[null==(p=E.find(e=>e.id===k.supplierId))?void 0:p.name,(0,t.jsx)(i.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>z("supplierId")})]}),k.locationId&&(0,t.jsxs)(d.Badge,{variant:"secondary",className:"flex items-center",children:[null==(f=B.find(e=>e.id===k.locationId))?void 0:f.name,(0,t.jsx)(i.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>z("locationId")})]}),Object.entries(k).map(e=>{let[s,a]=e;return"lowStock"===s&&a?(0,t.jsxs)(d.Badge,{variant:"secondary",className:"flex items-center",children:["Low Stock",(0,t.jsx)(i.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>z(s)})]},s):null})]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>{S({})},className:"text-gray-500 hover:text-gray-700",children:"Clear all"})]})})]})})}},60252,e=>{"use strict";e.s(["InventoryTable",()=>b]);var t=e.i(43476),s=e.i(71645),a=e.i(73488),r=e.i(23429),l=e.i(12329),i=e.i(72459),n=e.i(82458),c=e.i(23123),o=e.i(91393),d=e.i(84207),m=e.i(4565),x=e.i(3908),u=e.i(67881),h=e.i(94179),g=e.i(44405),v=e.i(89860),p=e.i(90472),f=e.i(42090);function b(e){let{initialData:b,initialFilters:j,onItemSelect:y,className:N}=e,[w,k]=(0,s.useState)(b||{data:[],total:0,page:1,limit:50}),[S,C]=(0,s.useState)(!b),[I,E]=(0,s.useState)(new Set),[A,B]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(!b){C(!0);try{let e=await (0,p.getInventoryItems)(j);k(e)}catch(e){console.error("Failed to fetch inventory data:",e)}finally{C(!1)}}})()},[j,b]);let P=e=>{B(t=>({key:e,direction:(null==t?void 0:t.key)===e&&"asc"===t.direction?"desc":"asc"}))};return S?(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 ".concat(N),children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"h-16 bg-gray-200 rounded"},e))})]})})}):(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 ".concat(N),children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Inventory Items"}),(0,t.jsxs)(h.Badge,{variant:"secondary",children:[w.total," items"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[I.size>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[I.size," selected"]}),(0,t.jsxs)(u.Button,{size:"sm",variant:"outline",children:[(0,t.jsx)(m.default,{className:"h-4 w-4 mr-1"}),"Transfer"]}),(0,t.jsxs)(u.Button,{size:"sm",variant:"outline",children:[(0,t.jsx)(i.default,{className:"h-4 w-4 mr-1"}),"Adjust Stock"]})]}),(0,t.jsxs)(u.Button,{size:"sm",children:[(0,t.jsx)(x.default,{className:"h-4 w-4 mr-1"}),"Add Item"]})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:I.size===w.data.length&&w.data.length>0,onChange:()=>{I.size===w.data.length?E(new Set):E(new Set(w.data.map(e=>e.id)))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,t.jsxs)("button",{onClick:()=>P("name"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,t.jsx)("span",{children:"Item"}),(null==A?void 0:A.key)==="name"&&("asc"===A.direction?(0,t.jsx)(c.default,{className:"h-3 w-3"}):(0,t.jsx)(o.default,{className:"h-3 w-3"}))]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU / Barcode"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,t.jsxs)("button",{onClick:()=>P("currentStock"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,t.jsx)("span",{children:"Stock Level"}),(null==A?void 0:A.key)==="currentStock"&&("asc"===A.direction?(0,t.jsx)(c.default,{className:"h-3 w-3"}):(0,t.jsx)(o.default,{className:"h-3 w-3"}))]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,t.jsxs)("button",{onClick:()=>P("costPrice"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,t.jsx)("span",{children:"Cost Price"}),(null==A?void 0:A.key)==="costPrice"&&("asc"===A.direction?(0,t.jsx)(c.default,{className:"h-3 w-3"}):(0,t.jsx)(o.default,{className:"h-3 w-3"}))]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),(0,t.jsx)("th",{className:"relative px-6 py-3",children:(0,t.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.data.map(e=>{let s=e.currentStock<=0?{status:"out-of-stock",color:"bg-red-100 text-red-800 border-red-300",label:"Out of Stock"}:e.currentStock<=e.minimumStock?{status:"low-stock",color:"bg-orange-100 text-orange-800 border-orange-300",label:"Low Stock"}:e.maximumStock&&e.currentStock>=e.maximumStock?{status:"overstock",color:"bg-purple-100 text-purple-800 border-purple-300",label:"Overstock"}:{status:"normal",color:"bg-green-100 text-green-800 border-green-300",label:"In Stock"},c=e.maximumStock?e.currentStock/e.maximumStock*100:e.minimumStock>0?Math.min(e.currentStock/(2*e.minimumStock)*100,100):50;return(0,t.jsxs)("tr",{className:(0,f.cn)("hover:bg-gray-50 transition-colors",I.has(e.id)&&"bg-blue-50"),onClick:()=>null==y?void 0:y(e),children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("input",{type:"checkbox",checked:I.has(e.id),onChange:t=>{var s;t.stopPropagation(),s=e.id,E(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"h-12 w-12 flex-shrink-0",children:(0,t.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,t.jsx)(i.default,{className:"h-6 w-6 text-gray-400"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-blue-600",children:e.name}),e.description&&(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[e.supplierName&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.supplierName}),e.isPerishable&&(0,t.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:"Perishable"})]})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,t.jsxs)("div",{children:[e.sku&&(0,t.jsx)("div",{className:"font-medium",children:e.sku}),e.barcode&&(0,t.jsx)("div",{className:"text-xs text-gray-500 font-mono",children:e.barcode})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,v.formatQuantity)(e.currentStock,"units")}),e.currentStock<=e.minimumStock&&(0,t.jsx)(n.default,{className:"h-4 w-4 text-orange-500"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:(0,f.cn)("h-2 rounded-full transition-all",c<=25?"bg-red-500":c<=50?"bg-orange-500":"bg-green-500"),style:{width:"".concat(Math.max(5,Math.min(100,c)),"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Min: ",(0,v.formatQuantity)(e.minimumStock,"units"),e.maximumStock&&" | Max: ".concat((0,v.formatQuantity)(e.maximumStock,"units"))]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:(0,v.formatCurrency)(e.costPrice)}),e.averageCost&&e.averageCost!==e.costPrice&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Avg: ",(0,v.formatCurrency)(e.averageCost)]})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)(h.Badge,{variant:"secondary",className:(0,f.cn)("text-xs border",s.color),children:s.label})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.updatedAt).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4 text-right text-sm font-medium",children:(0,t.jsx)(g.Dropdown,{trigger:(0,t.jsxs)(u.Button,{variant:"ghost",size:"sm",children:[(0,t.jsx)(a.default,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Open menu"})]}),items:[{icon:r.default,label:"Edit Item",onClick:()=>console.log("Edit item:",e.id)},{icon:d.default,label:"Scan Barcode",onClick:()=>console.log("Scan barcode:",e.id)},{icon:m.default,label:"Transfer Stock",onClick:()=>console.log("Transfer stock:",e.id)},{icon:x.default,label:"Adjust Stock",onClick:()=>console.log("Adjust stock:",e.id)},{type:"separator"},{icon:l.default,label:"Delete Item",onClick:()=>console.log("Delete item:",e.id),className:"text-red-600"}]})})]},e.id)})})]})}),0===w.data.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(i.default,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No inventory items"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Get started by adding your first inventory item."}),(0,t.jsxs)(u.Button,{size:"sm",children:[(0,t.jsx)(x.default,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),w.total>w.limit&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(w.page-1)*w.limit+1," to ",Math.min(w.page*w.limit,w.total)," of ",w.total," items"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.Button,{variant:"outline",size:"sm",disabled:1===w.page,children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",w.page," of ",Math.ceil(w.total/w.limit)]}),(0,t.jsx)(u.Button,{variant:"outline",size:"sm",disabled:w.page>=Math.ceil(w.total/w.limit),children:"Next"})]})]})})]})}},36300,e=>{"use strict";e.s(["QuickActions",()=>u]);var t=e.i(43476),s=e.i(71645),a=e.i(3908),r=e.i(89053),l=e.i(36284),i=e.i(84207),n=e.i(73488),c=e.i(98740),o=e.i(12329),d=e.i(2040),m=e.i(67881),x=e.i(44405);function u(e){let{className:u}=e,[h,g]=(0,s.useState)(!1),v=[{icon:a.default,label:"Add Item",action:()=>{g(!0),console.log("Add new inventory item")},variant:"default"},{icon:r.default,label:"Create PO",action:()=>console.log("Create purchase order"),variant:"outline"},{icon:i.default,label:"Scan",action:()=>console.log("Open barcode scanner"),variant:"outline"}],p=[{icon:c.default,label:"Add Supplier",onClick:()=>console.log("Add supplier")},{icon:l.default,label:"Start Stock Count",onClick:()=>console.log("Start stock count")},{icon:o.default,label:"Log Waste",onClick:()=>console.log("Log waste")},{type:"separator"},{icon:d.default,label:"View Reports",onClick:()=>console.log("View reports")}];return(0,t.jsxs)("div",{className:"flex items-center space-x-2 ".concat(u),children:[v.map(e=>{let s=e.icon;return(0,t.jsxs)(m.Button,{variant:e.variant,size:"sm",onClick:e.action,disabled:h,className:"flex items-center",children:[(0,t.jsx)(s,{className:"h-4 w-4 mr-1"}),e.label]},e.label)}),(0,t.jsx)(x.Dropdown,{trigger:(0,t.jsxs)(m.Button,{variant:"outline",size:"sm",className:"px-2",children:[(0,t.jsx)(n.default,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More actions"})]}),items:p})]})}},89921,e=>{"use strict";e.s(["MobileBarcodeFAB",()=>w],89921);var t=e.i(43476),s=e.i(71645),a=e.i(84207),r=e.i(72459),l=e.i(3908),i=e.i(4565),n=e.i(41947),c=e.i(67881),o=e.i(17603),d=e.i(75254);let m=(0,d.default)("flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]),x=(0,d.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var u=e.i(78745),h=e.i(82458),g=e.i(94179),v=e.i(23750),p=e.i(99749);class f{static detectFormat(e){let t=e.trim();return this.FORMATS.UPC_A.test(t)?"UPC-A":this.FORMATS.UPC_E.test(t)?"UPC-E":this.FORMATS.EAN_13.test(t)?"EAN-13":this.FORMATS.EAN_8.test(t)?"EAN-8":this.FORMATS.CODE_39.test(t)?"CODE-39":this.FORMATS.CODABAR.test(t)?"CODABAR":this.FORMATS.ITF.test(t)?"ITF":this.FORMATS.CODE_128.test(t)?"CODE-128":"UNKNOWN"}static validateBarcode(e){let t=e.trim(),s=this.detectFormat(t);if("UNKNOWN"===s)return{isValid:!1,format:s,error:"Unknown barcode format"};if("UPC-A"===s){let e=this.validateUPCAChecksum(t);return{isValid:e,format:s,error:e?void 0:"Invalid UPC-A checksum"}}if("EAN-13"===s){let e=this.validateEAN13Checksum(t);return{isValid:e,format:s,error:e?void 0:"Invalid EAN-13 checksum"}}return{isValid:!0,format:s}}static validateUPCAChecksum(e){if(12!==e.length)return!1;let t=e.split("").map(Number),s=t[11],a=0;for(let e=0;e<11;e++)a+=t[e]*(e%2==0?1:3);return s===(10-a%10)%10}static validateEAN13Checksum(e){if(13!==e.length)return!1;let t=e.split("").map(Number),s=t[12],a=0;for(let e=0;e<12;e++)a+=t[e]*(e%2==0?1:3);return s===(10-a%10)%10}static generateUPCACheckDigit(e){if(11!==e.length)throw Error("UPC-A code must be 11 digits for check digit generation");let t=e.split("").map(Number),s=0;for(let e=0;e<11;e++)s+=t[e]*(e%2==0?1:3);return e+(10-s%10)%10}static formatForDisplay(e){switch(this.detectFormat(e)){case"UPC-A":return"".concat(e[0]," ").concat(e.slice(1,6)," ").concat(e.slice(6,11)," ").concat(e[11]);case"EAN-13":return"".concat(e[0]," ").concat(e.slice(1,7)," ").concat(e.slice(7,13));case"UPC-E":return"".concat(e[0]," ").concat(e.slice(1,7)," ").concat(e[7]);default:return e}}static cleanBarcode(e){return e.replace(/[\s\-]/g,"").trim()}static convertUPCAToUPCE(e){if(12!==e.length||!this.validateUPCAChecksum(e))return null;e[0];let t=e.slice(1,6);return e.slice(6,11),e[11],t.endsWith("000")||t.endsWith("100")||t.endsWith("200"),null}}(0,p._)(f,"FORMATS",{UPC_A:/^\d{12}$/,UPC_E:/^\d{8}$/,EAN_13:/^\d{13}$/,EAN_8:/^\d{8}$/,CODE_128:/^[\x20-\x7F]+$/,CODE_39:/^[0-9A-Z\-\.\$\/\+\%\*\s]+$/,CODABAR:/^[0-9\-\$\:\.\+\/]+$/,ITF:/^\d+$/,QR_CODE:/^[\s\S]*$/,PDF_417:/^[\s\S]*$/});class b{async initializeCamera(e){try{this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"},focusMode:{ideal:"continuous"},zoom:{ideal:1}},audio:!1}),this.videoElement=e,this.videoElement.srcObject=this.stream,this.videoElement.setAttribute("playsinline","true"),await new Promise(e=>{this.videoElement.onloadedmetadata=e}),await this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.context=this.canvasElement.getContext("2d")}catch(e){throw console.error("Failed to initialize camera:",e),Error("Camera access denied or not available")}}startScanning(e){if(!this.videoElement||!this.canvasElement||!this.context)throw Error("Scanner not initialized");this.isScanning=!0,this.scanCallback=e,this.scanFrame()}stopScanning(){this.isScanning=!1,this.scanCallback=null}cleanup(){this.stopScanning(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement=null),this.canvasElement=null,this.context=null}scanFrame(){if(!this.isScanning||!this.videoElement||!this.canvasElement||!this.context)return;this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight,this.context.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height);let e=this.context.getImageData(0,0,this.canvasElement.width,this.canvasElement.height);this.processImageData(e),this.isScanning&&requestAnimationFrame(()=>this.scanFrame())}processImageData(e){if(.1>Math.random()){let e=this.generateMockBarcode(),t=f.validateBarcode(e),s={barcode:e,format:t.format,success:t.isValid,timestamp:new Date};this.scanCallback&&this.scanCallback(s)}}generateMockBarcode(){let e=["1234567890123","4012345678901","12345670","CODE128DEMO"];return e[Math.floor(Math.random()*e.length)]}static async hasCameraSupport(){try{return(await navigator.mediaDevices.enumerateDevices()).some(e=>"videoinput"===e.kind)}catch(e){return!1}}static async getCameraDevices(){try{return(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind)}catch(e){return[]}}constructor(){(0,p._)(this,"stream",null),(0,p._)(this,"videoElement",null),(0,p._)(this,"canvasElement",null),(0,p._)(this,"context",null),(0,p._)(this,"isScanning",!1),(0,p._)(this,"scanCallback",null)}}new class{startSession(e,t,s){let a={id:this.generateSessionId(),type:e,locationId:t,startTime:new Date,scans:[],userId:s,isActive:!0};return this.sessions.set(a.id,a),a}addScanToSession(e,t){let s=this.sessions.get(e);if(!s||!s.isActive)return null;let a={...t,timestamp:new Date};return s.scans.push(a),a}endSession(e){let t=this.sessions.get(e);return t?(t.isActive=!1,t.endTime=new Date,t):null}getSession(e){return this.sessions.get(e)||null}getUserSessions(e){return Array.from(this.sessions.values()).filter(t=>t.userId===e)}getSessionStats(e){let t=this.sessions.get(e);if(!t)return null;let s=t.scans.length,a=t.scans.filter(e=>e.success).length;return{totalScans:s,successfulScans:a,failedScans:s-a,uniqueItems:new Set(t.scans.filter(e=>e.item).map(e=>e.item.id)).size,duration:((t.endTime||new Date).getTime()-t.startTime.getTime())/6e4}}generateSessionId(){return"scan-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}constructor(){(0,p._)(this,"sessions",new Map)}};var j=e.i(90472),y=e.i(42090);function N(e){let{isOpen:a,onClose:l,mode:i,onScanResult:d,className:p}=e,N=(0,s.useRef)(null),w=(0,s.useRef)(null),[k,S]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[E,A]=(0,s.useState)(null),[B,P]=(0,s.useState)(""),[M,D]=(0,s.useState)(!1),[O,T]=(0,s.useState)([]),[F,z]=(0,s.useState)(1),[R,U]=(0,s.useState)(null);(0,s.useEffect)(()=>((async()=>{if(a&&N.current)try{let e=await b.hasCameraSupport();S(e),e&&(w.current=new b,await w.current.initializeCamera(N.current),I(!0),w.current.startScanning(_))}catch(e){console.error("Failed to initialize scanner:",e),U("Failed to access camera. Please check permissions.")}})(),()=>{w.current&&(w.current.cleanup(),w.current=null),I(!1)}),[a]);let _=async e=>{if(!e.success)return void U("Failed to read barcode. Please try again.");try{let t=f.validateBarcode(e.barcode);if(!t.isValid)return void U("Invalid barcode format: ".concat(t.error));let s=await (0,j.lookupItemByBarcode)(e.barcode),a={...e,item:s||void 0};A(a),T(e=>[a,...e.slice(0,9)]),U(null),null==d||d(a),"lookup"===i&&s&&setTimeout(()=>l(),1500)}catch(e){U("Failed to lookup item in inventory.")}},L=async()=>{if(!B.trim())return;let e={barcode:B.trim(),format:f.detectFormat(B.trim()),success:!0,timestamp:new Date};await _(e),P("")},Q=async()=>{if(w.current)try{D(!M)}catch(e){console.error("Failed to toggle flashlight:",e)}};return a?(0,t.jsxs)("div",{className:(0,y.cn)("fixed inset-0 z-50 flex items-center justify-center",p),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75",onClick:l}),(0,t.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:(()=>{switch(i){case"lookup":return"Item Lookup";case"count":return"Stock Count";case"receive":return"Receive Items";case"transfer":return"Transfer Items";default:return"Barcode Scanner"}})()}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(()=>{switch(i){case"lookup":return"Scan to view item details";case"count":return"Scan items for physical inventory count";case"receive":return"Scan items to receive into inventory";case"transfer":return"Scan items to transfer between locations";default:return"Scan barcodes to identify items"}})()})]}),(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:l,children:(0,t.jsx)(n.default,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:"relative bg-black",children:k?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("video",{ref:N,className:"w-full h-64 object-cover",playsInline:!0,muted:!0}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"w-48 h-32 border-2 border-white border-opacity-50 relative",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-blue-500"}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-blue-500"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-blue-500"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-blue-500"})]}),C&&(0,t.jsx)("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-blue-500 animate-pulse"})]})}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:[(0,t.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:Q,className:(0,y.cn)("bg-black bg-opacity-50 text-white border-white border-opacity-50",M&&"bg-yellow-500 bg-opacity-75"),children:(0,t.jsx)(m,{className:"h-4 w-4"})}),(0,t.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:()=>{w.current&&(w.current.stopScanning(),w.current.startScanning(_))},className:"bg-black bg-opacity-50 text-white border-white border-opacity-50",children:(0,t.jsx)(x,{className:"h-4 w-4"})})]})]}):(0,t.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-100",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.default,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Camera not available"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Use manual input below"})]})})}),(0,t.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(v.Input,{placeholder:"Enter barcode manually...",value:B,onChange:e=>P(e.target.value),onKeyPress:e=>"Enter"===e.key&&L(),className:"flex-1"}),(0,t.jsx)(c.Button,{onClick:L,size:"sm",children:"Scan"})]})}),R&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border-l-4 border-red-400",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(h.default,{className:"h-4 w-4 text-red-400 mr-2"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:R})]})}),E&&(0,t.jsx)("div",{className:"p-4 bg-green-50 border-l-4 border-green-400",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(u.default,{className:"h-5 w-5 text-green-400 mr-2 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Barcode Scanned Successfully"}),(0,t.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:E.format})]}),(0,t.jsx)("p",{className:"text-xs text-green-700 font-mono mb-2",children:f.formatForDisplay(E.barcode)}),E.item?(0,t.jsxs)("div",{className:"bg-white rounded p-3 border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(r.default,{className:"h-8 w-8 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:E.item.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Current Stock: ",E.item.currentStock]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",E.item.sku]})]})]}),("count"===i||"receive"===i||"transfer"===i)&&(0,t.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:"Quantity:"}),(0,t.jsx)(v.Input,{type:"number",min:"0",value:F,onChange:e=>z(parseInt(e.target.value)||1),className:"w-20 h-8 text-sm"}),(0,t.jsx)(c.Button,{size:"sm",className:"h-8",children:"count"===i?"Count":"receive"===i?"Receive":"Transfer"})]})]}):(0,t.jsxs)("div",{className:"bg-yellow-50 rounded p-3 border border-yellow-200",children:[(0,t.jsx)("p",{className:"text-sm text-yellow-800",children:"Item not found in inventory. Would you like to add it?"}),(0,t.jsx)(c.Button,{size:"sm",className:"mt-2",children:"Add New Item"})]})]})]})}),O.length>0&&(0,t.jsxs)("div",{className:"p-4 max-h-40 overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Recent Scans"}),(0,t.jsx)("div",{className:"space-y-2",children:O.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"font-mono text-xs",children:e.barcode})]}),(0,t.jsx)("div",{className:"text-right",children:e.item?(0,t.jsx)("span",{className:"text-green-600 text-xs",children:e.item.name}):(0,t.jsx)("span",{className:"text-yellow-600 text-xs",children:"Not found"})})]},s))})]}),(0,t.jsx)("div",{className:"p-4 bg-gray-50 text-center",children:(0,t.jsx)("p",{className:"text-xs text-gray-500",children:C?"Position barcode within the frame":"Scanner ready"})})]})]}):null}function w(e){let{className:o}=e,[d,m]=(0,s.useState)(!1),[x,u]=(0,s.useState)(!1),[h,g]=(0,s.useState)("lookup"),v=()=>{m(!d)},p=e=>{g(e),u(!0),m(!1)},f=[{icon:a.default,label:"Quick Scan",action:()=>p("lookup"),color:"bg-blue-600 hover:bg-blue-700"},{icon:r.default,label:"Stock Count",action:()=>p("count"),color:"bg-green-600 hover:bg-green-700"},{icon:l.default,label:"Receive Items",action:()=>p("receive"),color:"bg-purple-600 hover:bg-purple-700"},{icon:i.default,label:"Transfer",action:()=>p("transfer"),color:"bg-orange-600 hover:bg-orange-700"}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,y.cn)("fixed bottom-20 right-4 z-40",o),children:[(0,t.jsx)("div",{className:(0,y.cn)("mb-4 space-y-3 transition-all duration-300 transform",d?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"),children:f.map((e,s)=>{let a=e.icon;return(0,t.jsxs)("div",{className:(0,y.cn)("transform transition-all duration-300",d?"translate-y-0 opacity-100":"translate-y-4 opacity-0"),style:{transitionDelay:d?"".concat(50*s,"ms"):"".concat((f.length-s-1)*50,"ms")},children:[(0,t.jsxs)(c.Button,{onClick:e.action,className:(0,y.cn)("h-12 w-12 rounded-full shadow-lg text-white transition-all duration-200 hover:scale-110",e.color),size:"sm",children:[(0,t.jsx)(a,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:e.label})]}),(0,t.jsxs)("div",{className:"absolute right-16 top-1/2 transform -translate-y-1/2",children:[(0,t.jsx)("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:e.label}),(0,t.jsx)("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 w-0 h-0 border-t-4 border-b-4 border-l-4 border-transparent border-l-gray-900"})]})]},e.label)})}),(0,t.jsxs)(c.Button,{onClick:v,className:(0,y.cn)("h-14 w-14 rounded-full shadow-lg bg-blue-600 hover:bg-blue-700 text-white transition-all duration-300",d&&"rotate-45"),children:[d?(0,t.jsx)(n.default,{className:"h-6 w-6"}):(0,t.jsx)(a.default,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"sr-only",children:d?"Close menu":"Open scanning menu"})]}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25 -z-10",onClick:v})]}),x&&(0,t.jsx)(N,{isOpen:x,onClose:()=>u(!1),mode:h,onScanResult:e=>{console.log("Scan result:",e)}}),(0,t.jsx)("div",{className:"fixed bottom-36 right-4 z-30",children:(0,t.jsxs)("div",{className:"bg-blue-600 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(a.default,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Quick Barcode Scanning"}),(0,t.jsx)("div",{className:"text-blue-100",children:"Tap to scan items, count stock, or receive inventory on the go"})]}),(0,t.jsx)("button",{className:"text-blue-200 hover:text-white ml-2",onClick:()=>{},children:(0,t.jsx)(n.default,{className:"h-3 w-3"})})]}),(0,t.jsx)("div",{className:"absolute bottom-full right-8 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-blue-600"})]})}),(0,t.jsx)("div",{className:"fixed bottom-2 right-4 z-30",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 bg-white rounded-full shadow-sm border border-gray-200 px-3 py-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Offline Ready"})]})})]})}}]);