module.exports=[84736,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(70106).default)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]])},63348,a=>{"use strict";function b(a,c="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:c}).format(a)}function c(a,b){return`${a.toFixed(2)} ${b}`}a.s(["formatCurrency",()=>b,"formatQuantity",()=>c])},34602,a=>{"use strict";a.s(["InventoryDashboard",()=>t],34602);var b=a.i(87924),c=a.i(80826),d=a.i(59537),e=a.i(83604),f=a.i(52839),g=a.i(81828),h=a.i(6053),i=a.i(84736),j=a.i(16868),k=a.i(84396),l=a.i(77859),m=a.i(40695),n=a.i(54161),o=a.i(31941),p=a.i(63348),q=a.i(59858);function r({item:a,onClick:r,compact:s=!1,className:t}){let[u,v]=(0,c.useState)(!1),w=a.currentStock<=0?{status:"out-of-stock",color:"bg-red-100 text-red-800 border-red-300",label:"Out of Stock",icon:e.default,iconColor:"text-red-500"}:a.currentStock<=a.minimumStock?{status:"low-stock",color:"bg-orange-100 text-orange-800 border-orange-300",label:"Low Stock",icon:e.default,iconColor:"text-orange-500"}:a.maximumStock&&a.currentStock>=a.maximumStock?{status:"overstock",color:"bg-purple-100 text-purple-800 border-purple-300",label:"Overstock",icon:d.default,iconColor:"text-purple-500"}:{status:"normal",color:"bg-green-100 text-green-800 border-green-300",label:"In Stock",icon:d.default,iconColor:"text-green-500"},x=a.maximumStock?a.currentStock/a.maximumStock*100:a.minimumStock>0?Math.min(a.currentStock/(2*a.minimumStock)*100,100):50,y=w.icon;return(0,b.jsxs)("div",{className:(0,q.cn)("bg-white rounded-lg border border-gray-200 transition-all duration-200 hover:shadow-md group",s?"p-4":"p-6",r&&"cursor-pointer hover:border-blue-300",t),onClick:r,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate group-hover:text-blue-600",children:a.name}),a.description&&!s&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:a.description})]}),(0,b.jsx)(o.Dropdown,{trigger:(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",className:(0,q.cn)("opacity-0 group-hover:opacity-100 transition-opacity",u&&"opacity-100"),onClick:a=>a.stopPropagation(),children:(0,b.jsx)(g.default,{className:"h-4 w-4"})}),items:[{icon:l.default,label:"View Details",onClick:()=>console.log("View details:",a.id)},{icon:h.default,label:"Edit Item",onClick:()=>console.log("Edit item:",a.id)},{icon:i.default,label:"Transfer Stock",onClick:()=>console.log("Transfer stock:",a.id)},{icon:k.default,label:"Scan Barcode",onClick:()=>console.log("Scan barcode:",a.id)}]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[a.sku&&(0,b.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:a.sku}),a.supplierName&&(0,b.jsx)("span",{className:"text-xs text-gray-500 truncate",children:a.supplierName})]})]}),(0,b.jsx)("div",{className:"ml-3 flex-shrink-0",children:(0,b.jsx)("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(d.default,{className:"h-6 w-6 text-gray-400"})})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(y,{className:(0,q.cn)("h-4 w-4",w.iconColor)}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,p.formatQuantity)(a.currentStock,"units")})]}),(0,b.jsx)(n.Badge,{variant:"secondary",className:(0,q.cn)("text-xs border",w.color),children:w.label})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:(0,q.cn)("h-2 rounded-full transition-all",x<=25?"bg-red-500":x<=50?"bg-orange-500":"bg-green-500"),style:{width:`${Math.max(5,Math.min(100,x))}%`}})}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:["Min: ",(0,p.formatQuantity)(a.minimumStock,"units")]}),a.maximumStock&&(0,b.jsxs)("span",{children:["Max: ",(0,p.formatQuantity)(a.maximumStock,"units")]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(0,p.formatCurrency)(a.costPrice)}),a.averageCost&&a.averageCost!==a.costPrice&&(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Avg: ",(0,p.formatCurrency)(a.averageCost)]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[a.isPerishable&&a.shelfLife&&a.shelfLife<=3&&(0,b.jsxs)(n.Badge,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300 text-xs",children:[(0,b.jsx)(f.default,{className:"h-3 w-3 mr-1"}),"Expiring"]}),a.isPerishable&&(0,b.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full",title:"Perishable item"})]})]}),!s&&(0,b.jsxs)("div",{className:(0,q.cn)("flex items-center space-x-2 pt-3 border-t border-gray-100 transition-opacity",u?"opacity-100":"opacity-0"),children:[(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:b=>{b.stopPropagation(),console.log("Quick adjust stock:",a.id)},children:[(0,b.jsx)(j.default,{className:"h-3 w-3 mr-1"}),"Adjust"]}),(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:b=>{b.stopPropagation(),console.log("Quick transfer:",a.id)},children:[(0,b.jsx)(i.default,{className:"h-3 w-3 mr-1"}),"Transfer"]}),(0,b.jsx)(m.Button,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",onClick:b=>{b.stopPropagation(),console.log("Quick scan:",a.id)},children:(0,b.jsx)(k.default,{className:"h-3 w-3"})})]}),s&&(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Updated ",new Date(a.updatedAt).toLocaleDateString()]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(m.Button,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0",onClick:b=>{b.stopPropagation(),console.log("Mobile adjust:",a.id)},children:(0,b.jsx)(j.default,{className:"h-3 w-3"})}),(0,b.jsx)(m.Button,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0",onClick:b=>{b.stopPropagation(),console.log("Mobile transfer:",a.id)},children:(0,b.jsx)(i.default,{className:"h-3 w-3"})})]})]})]}),u&&(0,b.jsx)("div",{className:"absolute inset-0 bg-blue-50 bg-opacity-50 rounded-lg pointer-events-none sm:hidden"})]})}var s=a.i(75571);function t({initialData:a,initialFilters:d,view:e="grid",onItemSelect:f,className:g}){let[h,i]=(0,c.useState)(a||{data:[],total:0,page:1,limit:50}),[j,k]=(0,c.useState)(!a);return((0,c.useEffect)(()=>{(async()=>{if(!a){k(!0);try{let a=await (0,s.getInventoryItems)(d);i(a)}catch(a){console.error("Failed to fetch inventory data:",a)}finally{k(!1)}}})()},[d,a]),j)?(0,b.jsx)("div",{className:g,children:(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6",children:[1,2,3,4,5,6,7,8].map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 animate-pulse",children:[(0,b.jsx)("div",{className:"h-32 bg-gray-200 rounded mb-4"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),(0,b.jsx)("div",{className:"h-6 bg-gray-200 rounded w-2/3"})]})]},a))})}):0===h.data.length?(0,b.jsx)("div",{className:`${g} flex items-center justify-center min-h-96`,children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("span",{className:"text-gray-400 text-xl",children:"ðŸ“¦"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items found"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters or add new inventory items."})]})}):(0,b.jsxs)("div",{className:g,children:[(0,b.jsx)("div",{className:"grid"===e?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-6":"space-y-4 p-6",children:h.data.map(a=>(0,b.jsx)(r,{item:a,onClick:()=>f?.(a),compact:"cards"===e},a.id))}),h.total>h.data.length&&(0,b.jsx)("div",{className:"p-6 text-center",children:(0,b.jsxs)("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:["Load more items (",h.total-h.data.length," remaining)"]})})]})}},4649,a=>{"use strict";a.s(["InventoryMetricsCards",()=>m]);var b=a.i(87924),c=a.i(80826),d=a.i(69404),e=a.i(9247),f=a.i(59537),g=a.i(83604),h=a.i(4876),i=a.i(35277),j=a.i(42334),k=a.i(63348),l=a.i(75571);function m({initialMetrics:a,className:m}){var n,o,p,q;let[r,s]=(0,c.useState)(a||null),[t,u]=(0,c.useState)(!a);if((0,c.useEffect)(()=>{let b=async()=>{try{let a=await (0,l.getInventoryMetrics)();s(a)}catch(a){console.error("Failed to fetch metrics:",a)}finally{u(!1)}};a||b();let c=setInterval(b,3e4);return()=>clearInterval(c)},[a]),t||!r)return(0,b.jsx)("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 ${m}`,children:[1,2,3,4].map(a=>(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 animate-pulse",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-16"})]}),(0,b.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded-full"})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"})})]},a))});r.lowStockItems,r.outOfStockItems,r.totalItems;let v=(n=r.lowStockItems,o=r.outOfStockItems,r.totalItems,o>0?`${o} out of stock`:n>0?`${n} low stock`:"Stock levels good"),w=(p=r.turnoverRate)>=8?{icon:d.default,color:"text-green-600",label:"Excellent"}:p>=4?{icon:d.default,color:"text-blue-600",label:"Good"}:p>=2?{icon:e.default,color:"text-orange-600",label:"Slow"}:{icon:e.default,color:"text-red-600",label:"Poor"},x=(q=r.wasteValue)>1e3?{icon:d.default,color:"text-red-600",trend:"+15%"}:q>500?{icon:d.default,color:"text-orange-600",trend:"+5%"}:{icon:e.default,color:"text-green-600",trend:"-8%"};return(0,b.jsxs)("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 ${m}`,children:[(0,b.jsx)(j.StatCard,{title:"Total Value",value:(0,k.formatCurrency)(r.totalValue),icon:(0,b.jsx)(i.default,{className:"h-4 w-4"}),subtitle:`${r.totalItems} items`,trend:{value:2.3,direction:"up",period:"last week"},className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200"}),(0,b.jsx)(j.StatCard,{title:"Stock Status",value:`${r.totalItems-r.lowStockItems} of ${r.totalItems}`,icon:(0,b.jsx)(f.default,{className:"h-4 w-4"}),subtitle:v,className:"bg-gradient-to-r from-green-50 to-green-100 border-green-200"}),(0,b.jsx)(j.StatCard,{title:"Expiring Soon",value:r.expiringItems.toString(),icon:(0,b.jsx)(g.default,{className:"h-4 w-4"}),subtitle:"Items expiring in 3 days",className:"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200"}),(0,b.jsx)(j.StatCard,{title:"Weekly Waste",value:(0,k.formatCurrency)(r.wasteValue),icon:(0,b.jsx)(h.default,{className:"h-4 w-4"}),subtitle:"This week's total",trend:{value:8,direction:x.color.includes("green")?"down":"up",period:"last week"},className:"bg-gradient-to-r from-red-50 to-red-100 border-red-200"}),(0,b.jsxs)("div",{className:"lg:col-span-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Turnover Rate"}),(0,b.jsxs)("div",{className:"flex items-baseline",children:[(0,b.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[r.turnoverRate.toFixed(1),"x"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 ml-1",children:"annually"})]})]}),c.default.createElement(w.icon,{className:`h-5 w-5 ${w.color}`})]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)("p",{className:`text-xs ${w.color}`,children:[w.label," turnover rate"]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Days to Turn"}),(0,b.jsxs)("div",{className:"flex items-baseline",children:[(0,b.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:Math.round(r.averageDaysToTurnover)}),(0,b.jsx)("p",{className:"text-sm text-gray-500 ml-1",children:"days"})]})]})}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Average inventory cycle"})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),(0,b.jsx)("p",{className:"text-2xl font-semibold text-orange-600",children:r.lowStockItems})]}),(0,b.jsx)(f.default,{className:"h-5 w-5 text-orange-500"})]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Items need reordering"})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),(0,b.jsx)("p",{className:"text-2xl font-semibold text-red-600",children:r.outOfStockItems})]}),(0,b.jsx)(g.default,{className:"h-5 w-5 text-red-500"})]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Items unavailable"})})]})]})]})}},7185,a=>{"use strict";a.s(["InventoryFilters",()=>n]);var b=a.i(87924),c=a.i(80826),d=a.i(50944),e=a.i(50537),f=a.i(21229),g=a.i(62213),h=a.i(59537),i=a.i(5522),j=a.i(40695),k=a.i(54161),l=a.i(59858),m=a.i(75571);function n({initialFilters:a,onFiltersChange:n,className:o}){let p=(0,d.useRouter)(),q=(0,d.useSearchParams)(),[r,s]=(0,c.useState)(a||{}),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{try{let[a,b,c]=await Promise.all([(0,m.getProductCategories)(),(0,m.getSuppliers)(),(0,m.getLocations)()]);u(a),w(b.data),y(c)}catch(a){console.error("Failed to load filter data:",a)}finally{C(!1)}})()},[]),(0,c.useEffect)(()=>{let a=new URLSearchParams(q.toString());["search","category","supplier","location","status","lowStock","outOfStock","expiring"].forEach(b=>{a.delete(b)}),Object.entries(r).forEach(([b,c])=>{null!=c&&""!==c&&("boolean"==typeof c?c&&a.set(b,"true"):"categoryId"===b?a.set("category",c.toString()):"supplierId"===b?a.set("supplier",c.toString()):"locationId"===b?a.set("location",c.toString()):a.set(b,c.toString()))}),p.push(`?${a.toString()}`,{scroll:!1}),n?.(r)},[r,p,q,n]);let D=(a,b)=>{s(c=>({...c,[a]:b}))},E=a=>{s(b=>{let c={...b};return delete c[a],c})},F=()=>Object.entries(r).filter(([a,b])=>"search"===a?b&&""!==b.trim():null!=b&&""!==b).length,G=[{key:"lowStock",label:"Low Stock",icon:h.default,color:"bg-orange-100 text-orange-800 border-orange-300"},{key:"outOfStock",label:"Out of Stock",icon:h.default,color:"bg-red-100 text-red-800 border-red-300"},{key:"expiring",label:"Expiring Soon",icon:h.default,color:"bg-yellow-100 text-yellow-800 border-yellow-300"}];return B?(0,b.jsx)("div",{className:`bg-white p-4 rounded-lg border border-gray-200 ${o}`,children:(0,b.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse flex-1"},a))})}):(0,b.jsx)("div",{className:`bg-white rounded-lg border border-gray-200 ${o}`,children:(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)(e.default,{className:"h-4 w-4 text-gray-400"})}),(0,b.jsx)(i.Input,{type:"search",placeholder:"Search items, SKUs, barcodes...",value:r.search||"",onChange:a=>D("search",a.target.value),className:"pl-10"})]}),(0,b.jsxs)("select",{value:r.categoryId||"",onChange:a=>D("categoryId",a.target.value||void 0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"",children:"All Categories"}),t.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsxs)("select",{value:r.supplierId||"",onChange:a=>D("supplierId",a.target.value||void 0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"",children:"All Suppliers"}),v.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsxs)("select",{value:r.locationId||"",onChange:a=>D("locationId",a.target.value||void 0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"",children:"All Locations"}),x.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsxs)(j.Button,{variant:"outline",onClick:()=>A(!z),className:"flex items-center",children:[(0,b.jsx)(f.default,{className:"h-4 w-4 mr-1"}),"Filters",F()>0&&(0,b.jsx)(k.Badge,{variant:"secondary",className:"ml-2 px-1.5 py-0.5 text-xs",children:F()})]})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:G.map(a=>{let c=r[a.key],d=a.icon;return(0,b.jsxs)("button",{onClick:()=>D(a.key,!c),className:(0,l.cn)("flex items-center px-3 py-1.5 rounded-full text-sm font-medium border transition-colors",c?a.color:"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"),children:[(0,b.jsx)(d,{className:"h-3 w-3 mr-1"}),a.label]},a.key)})}),z&&(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:r.status||"",onChange:a=>D("status",a.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"}),(0,b.jsx)("option",{value:"discontinued",children:"Discontinued"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(i.Input,{type:"number",placeholder:"Min",value:r.priceRange?.[0]||"",onChange:a=>{let b=a.target.value?parseFloat(a.target.value):void 0,c=r.priceRange?.[1];D("priceRange",void 0!==b||void 0!==c?[b,c]:void 0)},className:"flex-1"}),(0,b.jsx)(i.Input,{type:"number",placeholder:"Max",value:r.priceRange?.[1]||"",onChange:a=>{let b=a.target.value?parseFloat(a.target.value):void 0,c=r.priceRange?.[0];D("priceRange",void 0!==c||void 0!==b?[c,b]:void 0)},className:"flex-1"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),(0,b.jsx)(i.Input,{placeholder:"Enter tags...",value:r.tags?.join(", ")||"",onChange:a=>{let b=a.target.value.split(",").map(a=>a.trim()).filter(Boolean);D("tags",b.length>0?b:void 0)}})]})]})}),F()>0&&(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700 mr-2",children:"Active filters:"}),r.search&&(0,b.jsxs)(k.Badge,{variant:"secondary",className:"flex items-center",children:['Search: "',r.search,'"',(0,b.jsx)(g.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>E("search")})]}),r.categoryId&&(0,b.jsxs)(k.Badge,{variant:"secondary",className:"flex items-center",children:[t.find(a=>a.id===r.categoryId)?.name,(0,b.jsx)(g.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>E("categoryId")})]}),r.supplierId&&(0,b.jsxs)(k.Badge,{variant:"secondary",className:"flex items-center",children:[v.find(a=>a.id===r.supplierId)?.name,(0,b.jsx)(g.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>E("supplierId")})]}),r.locationId&&(0,b.jsxs)(k.Badge,{variant:"secondary",className:"flex items-center",children:[x.find(a=>a.id===r.locationId)?.name,(0,b.jsx)(g.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>E("locationId")})]}),Object.entries(r).map(([a,c])=>"lowStock"===a&&c?(0,b.jsxs)(k.Badge,{variant:"secondary",className:"flex items-center",children:["Low Stock",(0,b.jsx)(g.default,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>E(a)})]},a):null)]}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>{s({})},className:"text-gray-500 hover:text-gray-700",children:"Clear all"})]})})]})})}},19335,a=>{"use strict";a.s(["InventoryTable",()=>t]);var b=a.i(87924),c=a.i(80826),d=a.i(81828),e=a.i(6053),f=a.i(4876),g=a.i(59537),h=a.i(83604),i=a.i(69404),j=a.i(9247),k=a.i(84396),l=a.i(84736),m=a.i(16868),n=a.i(40695),o=a.i(54161),p=a.i(31941),q=a.i(63348),r=a.i(75571),s=a.i(59858);function t({initialData:a,initialFilters:t,onItemSelect:u,className:v}){let[w,x]=(0,c.useState)(a||{data:[],total:0,page:1,limit:50}),[y,z]=(0,c.useState)(!a),[A,B]=(0,c.useState)(new Set),[C,D]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{if(!a){z(!0);try{let a=await (0,r.getInventoryItems)(t);x(a)}catch(a){console.error("Failed to fetch inventory data:",a)}finally{z(!1)}}})()},[t,a]);let E=a=>{D(b=>({key:a,direction:b?.key===a&&"asc"===b.direction?"desc":"asc"}))};return y?(0,b.jsx)("div",{className:`bg-white rounded-lg border border-gray-200 ${v}`,children:(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>(0,b.jsx)("div",{className:"h-16 bg-gray-200 rounded"},a))})]})})}):(0,b.jsxs)("div",{className:`bg-white rounded-lg border border-gray-200 ${v}`,children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Inventory Items"}),(0,b.jsxs)(o.Badge,{variant:"secondary",children:[w.total," items"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[A.size>0&&(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:[A.size," selected"]}),(0,b.jsxs)(n.Button,{size:"sm",variant:"outline",children:[(0,b.jsx)(l.default,{className:"h-4 w-4 mr-1"}),"Transfer"]}),(0,b.jsxs)(n.Button,{size:"sm",variant:"outline",children:[(0,b.jsx)(g.default,{className:"h-4 w-4 mr-1"}),"Adjust Stock"]})]}),(0,b.jsxs)(n.Button,{size:"sm",children:[(0,b.jsx)(m.default,{className:"h-4 w-4 mr-1"}),"Add Item"]})]})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:(0,b.jsx)("input",{type:"checkbox",checked:A.size===w.data.length&&w.data.length>0,onChange:()=>{A.size===w.data.length?B(new Set):B(new Set(w.data.map(a=>a.id)))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>E("name"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,b.jsx)("span",{children:"Item"}),C?.key==="name"&&("asc"===C.direction?(0,b.jsx)(i.default,{className:"h-3 w-3"}):(0,b.jsx)(j.default,{className:"h-3 w-3"}))]})}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU / Barcode"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>E("currentStock"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,b.jsx)("span",{children:"Stock Level"}),C?.key==="currentStock"&&("asc"===C.direction?(0,b.jsx)(i.default,{className:"h-3 w-3"}):(0,b.jsx)(j.default,{className:"h-3 w-3"}))]})}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>E("costPrice"),className:"flex items-center space-x-1 hover:text-gray-700",children:[(0,b.jsx)("span",{children:"Cost Price"}),C?.key==="costPrice"&&("asc"===C.direction?(0,b.jsx)(i.default,{className:"h-3 w-3"}):(0,b.jsx)(j.default,{className:"h-3 w-3"}))]})}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),(0,b.jsx)("th",{className:"relative px-6 py-3",children:(0,b.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.data.map(a=>{let c=a.currentStock<=0?{status:"out-of-stock",color:"bg-red-100 text-red-800 border-red-300",label:"Out of Stock"}:a.currentStock<=a.minimumStock?{status:"low-stock",color:"bg-orange-100 text-orange-800 border-orange-300",label:"Low Stock"}:a.maximumStock&&a.currentStock>=a.maximumStock?{status:"overstock",color:"bg-purple-100 text-purple-800 border-purple-300",label:"Overstock"}:{status:"normal",color:"bg-green-100 text-green-800 border-green-300",label:"In Stock"},i=a.maximumStock?a.currentStock/a.maximumStock*100:a.minimumStock>0?Math.min(a.currentStock/(2*a.minimumStock)*100,100):50;return(0,b.jsxs)("tr",{className:(0,s.cn)("hover:bg-gray-50 transition-colors",A.has(a.id)&&"bg-blue-50"),onClick:()=>u?.(a),children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("input",{type:"checkbox",checked:A.has(a.id),onChange:b=>{var c;b.stopPropagation(),c=a.id,B(a=>{let b=new Set(a);return b.has(c)?b.delete(c):b.add(c),b})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"h-12 w-12 flex-shrink-0",children:(0,b.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,b.jsx)(g.default,{className:"h-6 w-6 text-gray-400"})})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-blue-600",children:a.name}),a.description&&(0,b.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[a.supplierName&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.supplierName}),a.isPerishable&&(0,b.jsx)(o.Badge,{variant:"secondary",className:"text-xs",children:"Perishable"})]})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,b.jsxs)("div",{children:[a.sku&&(0,b.jsx)("div",{className:"font-medium",children:a.sku}),a.barcode&&(0,b.jsx)("div",{className:"text-xs text-gray-500 font-mono",children:a.barcode})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,q.formatQuantity)(a.currentStock,"units")}),a.currentStock<=a.minimumStock&&(0,b.jsx)(h.default,{className:"h-4 w-4 text-orange-500"})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:(0,s.cn)("h-2 rounded-full transition-all",i<=25?"bg-red-500":i<=50?"bg-orange-500":"bg-green-500"),style:{width:`${Math.max(5,Math.min(100,i))}%`}})}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Min: ",(0,q.formatQuantity)(a.minimumStock,"units"),a.maximumStock&&` | Max: ${(0,q.formatQuantity)(a.maximumStock,"units")}`]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:(0,q.formatCurrency)(a.costPrice)}),a.averageCost&&a.averageCost!==a.costPrice&&(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Avg: ",(0,q.formatCurrency)(a.averageCost)]})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)(o.Badge,{variant:"secondary",className:(0,s.cn)("text-xs border",c.color),children:c.label})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(a.updatedAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4 text-right text-sm font-medium",children:(0,b.jsx)(p.Dropdown,{trigger:(0,b.jsxs)(n.Button,{variant:"ghost",size:"sm",children:[(0,b.jsx)(d.default,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Open menu"})]}),items:[{icon:e.default,label:"Edit Item",onClick:()=>console.log("Edit item:",a.id)},{icon:k.default,label:"Scan Barcode",onClick:()=>console.log("Scan barcode:",a.id)},{icon:l.default,label:"Transfer Stock",onClick:()=>console.log("Transfer stock:",a.id)},{icon:m.default,label:"Adjust Stock",onClick:()=>console.log("Adjust stock:",a.id)},{type:"separator"},{icon:f.default,label:"Delete Item",onClick:()=>console.log("Delete item:",a.id),className:"text-red-600"}]})})]},a.id)})})]})}),0===w.data.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(g.default,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No inventory items"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Get started by adding your first inventory item."}),(0,b.jsxs)(n.Button,{size:"sm",children:[(0,b.jsx)(m.default,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),w.total>w.limit&&(0,b.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(w.page-1)*w.limit+1," to ",Math.min(w.page*w.limit,w.total)," of ",w.total," items"]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(n.Button,{variant:"outline",size:"sm",disabled:1===w.page,children:"Previous"}),(0,b.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",w.page," of ",Math.ceil(w.total/w.limit)]}),(0,b.jsx)(n.Button,{variant:"outline",size:"sm",disabled:w.page>=Math.ceil(w.total/w.limit),children:"Next"})]})]})})]})}},77391,a=>{"use strict";a.s(["QuickActions",()=>n]);var b=a.i(87924),c=a.i(80826),d=a.i(16868),e=a.i(2769),f=a.i(28086),g=a.i(84396),h=a.i(81828),i=a.i(37565),j=a.i(4876),k=a.i(63467),l=a.i(40695),m=a.i(31941);function n({className:a}){let[n,o]=(0,c.useState)(!1),p=[{icon:d.default,label:"Add Item",action:()=>{o(!0),console.log("Add new inventory item")},variant:"default"},{icon:e.default,label:"Create PO",action:()=>console.log("Create purchase order"),variant:"outline"},{icon:g.default,label:"Scan",action:()=>console.log("Open barcode scanner"),variant:"outline"}],q=[{icon:i.default,label:"Add Supplier",onClick:()=>console.log("Add supplier")},{icon:f.default,label:"Start Stock Count",onClick:()=>console.log("Start stock count")},{icon:j.default,label:"Log Waste",onClick:()=>console.log("Log waste")},{type:"separator"},{icon:k.default,label:"View Reports",onClick:()=>console.log("View reports")}];return(0,b.jsxs)("div",{className:`flex items-center space-x-2 ${a}`,children:[p.map(a=>{let c=a.icon;return(0,b.jsxs)(l.Button,{variant:a.variant,size:"sm",onClick:a.action,disabled:n,className:"flex items-center",children:[(0,b.jsx)(c,{className:"h-4 w-4 mr-1"}),a.label]},a.label)}),(0,b.jsx)(m.Dropdown,{trigger:(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",className:"px-2",children:[(0,b.jsx)(h.default,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"More actions"})]}),items:q})]})}},32285,a=>{"use strict";a.s(["MobileBarcodeFAB",()=>x],32285);var b=a.i(87924),c=a.i(80826),d=a.i(84396),e=a.i(59537),f=a.i(16868),g=a.i(84736),h=a.i(62213),i=a.i(40695),j=a.i(17753),k=a.i(70106);let l=(0,k.default)("flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]),m=(0,k.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var n=a.i(34157),o=a.i(83604),p=a.i(54161),q=a.i(5522);class r{static FORMATS={UPC_A:/^\d{12}$/,UPC_E:/^\d{8}$/,EAN_13:/^\d{13}$/,EAN_8:/^\d{8}$/,CODE_128:/^[\x20-\x7F]+$/,CODE_39:/^[0-9A-Z\-\.\$\/\+\%\*\s]+$/,CODABAR:/^[0-9\-\$\:\.\+\/]+$/,ITF:/^\d+$/,QR_CODE:/^[\s\S]*$/,PDF_417:/^[\s\S]*$/};static detectFormat(a){let b=a.trim();return this.FORMATS.UPC_A.test(b)?"UPC-A":this.FORMATS.UPC_E.test(b)?"UPC-E":this.FORMATS.EAN_13.test(b)?"EAN-13":this.FORMATS.EAN_8.test(b)?"EAN-8":this.FORMATS.CODE_39.test(b)?"CODE-39":this.FORMATS.CODABAR.test(b)?"CODABAR":this.FORMATS.ITF.test(b)?"ITF":this.FORMATS.CODE_128.test(b)?"CODE-128":"UNKNOWN"}static validateBarcode(a){let b=a.trim(),c=this.detectFormat(b);if("UNKNOWN"===c)return{isValid:!1,format:c,error:"Unknown barcode format"};if("UPC-A"===c){let a=this.validateUPCAChecksum(b);return{isValid:a,format:c,error:a?void 0:"Invalid UPC-A checksum"}}if("EAN-13"===c){let a=this.validateEAN13Checksum(b);return{isValid:a,format:c,error:a?void 0:"Invalid EAN-13 checksum"}}return{isValid:!0,format:c}}static validateUPCAChecksum(a){if(12!==a.length)return!1;let b=a.split("").map(Number),c=b[11],d=0;for(let a=0;a<11;a++)d+=b[a]*(a%2==0?1:3);return c===(10-d%10)%10}static validateEAN13Checksum(a){if(13!==a.length)return!1;let b=a.split("").map(Number),c=b[12],d=0;for(let a=0;a<12;a++)d+=b[a]*(a%2==0?1:3);return c===(10-d%10)%10}static generateUPCACheckDigit(a){if(11!==a.length)throw Error("UPC-A code must be 11 digits for check digit generation");let b=a.split("").map(Number),c=0;for(let a=0;a<11;a++)c+=b[a]*(a%2==0?1:3);return a+(10-c%10)%10}static formatForDisplay(a){switch(this.detectFormat(a)){case"UPC-A":return`${a[0]} ${a.slice(1,6)} ${a.slice(6,11)} ${a[11]}`;case"EAN-13":return`${a[0]} ${a.slice(1,7)} ${a.slice(7,13)}`;case"UPC-E":return`${a[0]} ${a.slice(1,7)} ${a[7]}`;default:return a}}static cleanBarcode(a){return a.replace(/[\s\-]/g,"").trim()}static convertUPCAToUPCE(a){if(12!==a.length||!this.validateUPCAChecksum(a))return null;a[0];let b=a.slice(1,6);return a.slice(6,11),a[11],b.endsWith("000")||b.endsWith("100")||b.endsWith("200"),null}}class s{sessions=new Map;startSession(a,b,c){let d={id:this.generateSessionId(),type:a,locationId:b,startTime:new Date,scans:[],userId:c,isActive:!0};return this.sessions.set(d.id,d),d}addScanToSession(a,b){let c=this.sessions.get(a);if(!c||!c.isActive)return null;let d={...b,timestamp:new Date};return c.scans.push(d),d}endSession(a){let b=this.sessions.get(a);return b?(b.isActive=!1,b.endTime=new Date,b):null}getSession(a){return this.sessions.get(a)||null}getUserSessions(a){return Array.from(this.sessions.values()).filter(b=>b.userId===a)}getSessionStats(a){let b=this.sessions.get(a);if(!b)return null;let c=b.scans.length,d=b.scans.filter(a=>a.success).length;return{totalScans:c,successfulScans:d,failedScans:c-d,uniqueItems:new Set(b.scans.filter(a=>a.item).map(a=>a.item.id)).size,duration:((b.endTime||new Date).getTime()-b.startTime.getTime())/6e4}}generateSessionId(){return`scan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}class t{stream=null;videoElement=null;canvasElement=null;context=null;isScanning=!1;scanCallback=null;async initializeCamera(a){try{this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"},focusMode:{ideal:"continuous"},zoom:{ideal:1}},audio:!1}),this.videoElement=a,this.videoElement.srcObject=this.stream,this.videoElement.setAttribute("playsinline","true"),await new Promise(a=>{this.videoElement.onloadedmetadata=a}),await this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.context=this.canvasElement.getContext("2d")}catch(a){throw console.error("Failed to initialize camera:",a),Error("Camera access denied or not available")}}startScanning(a){if(!this.videoElement||!this.canvasElement||!this.context)throw Error("Scanner not initialized");this.isScanning=!0,this.scanCallback=a,this.scanFrame()}stopScanning(){this.isScanning=!1,this.scanCallback=null}cleanup(){this.stopScanning(),this.stream&&(this.stream.getTracks().forEach(a=>a.stop()),this.stream=null),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement=null),this.canvasElement=null,this.context=null}scanFrame(){if(!this.isScanning||!this.videoElement||!this.canvasElement||!this.context)return;this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight,this.context.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height);let a=this.context.getImageData(0,0,this.canvasElement.width,this.canvasElement.height);this.processImageData(a),this.isScanning&&requestAnimationFrame(()=>this.scanFrame())}processImageData(a){if(.1>Math.random()){let a=this.generateMockBarcode(),b=r.validateBarcode(a),c={barcode:a,format:b.format,success:b.isValid,timestamp:new Date};this.scanCallback&&this.scanCallback(c)}}generateMockBarcode(){let a=["1234567890123","4012345678901","12345670","CODE128DEMO"];return a[Math.floor(Math.random()*a.length)]}static async hasCameraSupport(){try{return(await navigator.mediaDevices.enumerateDevices()).some(a=>"videoinput"===a.kind)}catch{return!1}}static async getCameraDevices(){try{return(await navigator.mediaDevices.enumerateDevices()).filter(a=>"videoinput"===a.kind)}catch{return[]}}}new s;var u=a.i(75571),v=a.i(59858);function w({isOpen:a,onClose:d,mode:f,onScanResult:g,className:k}){let s=(0,c.useRef)(null),w=(0,c.useRef)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)(1),[L,M]=(0,c.useState)(null);(0,c.useEffect)(()=>((async()=>{if(a&&s.current)try{let a=await t.hasCameraSupport();y(a),a&&(w.current=new t,await w.current.initializeCamera(s.current),A(!0),w.current.startScanning(N))}catch(a){console.error("Failed to initialize scanner:",a),M("Failed to access camera. Please check permissions.")}})(),()=>{w.current&&(w.current.cleanup(),w.current=null),A(!1)}),[a]);let N=async a=>{if(!a.success)return void M("Failed to read barcode. Please try again.");try{let b=r.validateBarcode(a.barcode);if(!b.isValid)return void M(`Invalid barcode format: ${b.error}`);let c=await (0,u.lookupItemByBarcode)(a.barcode),e={...a,item:c||void 0};C(e),I(a=>[e,...a.slice(0,9)]),M(null),g?.(e),"lookup"===f&&c&&setTimeout(()=>d(),1500)}catch(a){M("Failed to lookup item in inventory.")}},O=async()=>{if(!D.trim())return;let a={barcode:D.trim(),format:r.detectFormat(D.trim()),success:!0,timestamp:new Date};await N(a),E("")},P=async()=>{if(w.current)try{G(!F)}catch(a){console.error("Failed to toggle flashlight:",a)}};return a?(0,b.jsxs)("div",{className:(0,v.cn)("fixed inset-0 z-50 flex items-center justify-center",k),children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-75",onClick:d}),(0,b.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:(()=>{switch(f){case"lookup":return"Item Lookup";case"count":return"Stock Count";case"receive":return"Receive Items";case"transfer":return"Transfer Items";default:return"Barcode Scanner"}})()}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:(()=>{switch(f){case"lookup":return"Scan to view item details";case"count":return"Scan items for physical inventory count";case"receive":return"Scan items to receive into inventory";case"transfer":return"Scan items to transfer between locations";default:return"Scan barcodes to identify items"}})()})]}),(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:d,children:(0,b.jsx)(h.default,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:"relative bg-black",children:x?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("video",{ref:s,className:"w-full h-64 object-cover",playsInline:!0,muted:!0}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"w-48 h-32 border-2 border-white border-opacity-50 relative",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-blue-500"}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-blue-500"}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-blue-500"}),(0,b.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-blue-500"})]}),z&&(0,b.jsx)("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-blue-500 animate-pulse"})]})}),(0,b.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:[(0,b.jsx)(i.Button,{size:"sm",variant:"secondary",onClick:P,className:(0,v.cn)("bg-black bg-opacity-50 text-white border-white border-opacity-50",F&&"bg-yellow-500 bg-opacity-75"),children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)(i.Button,{size:"sm",variant:"secondary",onClick:()=>{w.current&&(w.current.stopScanning(),w.current.startScanning(N))},className:"bg-black bg-opacity-50 text-white border-white border-opacity-50",children:(0,b.jsx)(m,{className:"h-4 w-4"})})]})]}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-100",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.default,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Camera not available"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Use manual input below"})]})})}),(0,b.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(q.Input,{placeholder:"Enter barcode manually...",value:D,onChange:a=>E(a.target.value),onKeyPress:a=>"Enter"===a.key&&O(),className:"flex-1"}),(0,b.jsx)(i.Button,{onClick:O,size:"sm",children:"Scan"})]})}),L&&(0,b.jsx)("div",{className:"p-4 bg-red-50 border-l-4 border-red-400",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(o.default,{className:"h-4 w-4 text-red-400 mr-2"}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:L})]})}),B&&(0,b.jsx)("div",{className:"p-4 bg-green-50 border-l-4 border-green-400",children:(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)(n.default,{className:"h-5 w-5 text-green-400 mr-2 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Barcode Scanned Successfully"}),(0,b.jsx)(p.Badge,{variant:"secondary",className:"text-xs",children:B.format})]}),(0,b.jsx)("p",{className:"text-xs text-green-700 font-mono mb-2",children:r.formatForDisplay(B.barcode)}),B.item?(0,b.jsxs)("div",{className:"bg-white rounded p-3 border",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(e.default,{className:"h-8 w-8 text-gray-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:B.item.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Current Stock: ",B.item.currentStock]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",B.item.sku]})]})]}),("count"===f||"receive"===f||"transfer"===f)&&(0,b.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,b.jsx)("label",{className:"text-xs text-gray-600",children:"Quantity:"}),(0,b.jsx)(q.Input,{type:"number",min:"0",value:J,onChange:a=>K(parseInt(a.target.value)||1),className:"w-20 h-8 text-sm"}),(0,b.jsx)(i.Button,{size:"sm",className:"h-8",children:"count"===f?"Count":"receive"===f?"Receive":"Transfer"})]})]}):(0,b.jsxs)("div",{className:"bg-yellow-50 rounded p-3 border border-yellow-200",children:[(0,b.jsx)("p",{className:"text-sm text-yellow-800",children:"Item not found in inventory. Would you like to add it?"}),(0,b.jsx)(i.Button,{size:"sm",className:"mt-2",children:"Add New Item"})]})]})]})}),H.length>0&&(0,b.jsxs)("div",{className:"p-4 max-h-40 overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Recent Scans"}),(0,b.jsx)("div",{className:"space-y-2",children:H.slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,b.jsx)("span",{className:"font-mono text-xs",children:a.barcode})]}),(0,b.jsx)("div",{className:"text-right",children:a.item?(0,b.jsx)("span",{className:"text-green-600 text-xs",children:a.item.name}):(0,b.jsx)("span",{className:"text-yellow-600 text-xs",children:"Not found"})})]},c))})]}),(0,b.jsx)("div",{className:"p-4 bg-gray-50 text-center",children:(0,b.jsx)("p",{className:"text-xs text-gray-500",children:z?"Position barcode within the frame":"Scanner ready"})})]})]}):null}function x({className:a}){let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)("lookup"),p=()=>{k(!j)},q=a=>{o(a),m(!0),k(!1)},r=[{icon:d.default,label:"Quick Scan",action:()=>q("lookup"),color:"bg-blue-600 hover:bg-blue-700"},{icon:e.default,label:"Stock Count",action:()=>q("count"),color:"bg-green-600 hover:bg-green-700"},{icon:f.default,label:"Receive Items",action:()=>q("receive"),color:"bg-purple-600 hover:bg-purple-700"},{icon:g.default,label:"Transfer",action:()=>q("transfer"),color:"bg-orange-600 hover:bg-orange-700"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,v.cn)("fixed bottom-20 right-4 z-40",a),children:[(0,b.jsx)("div",{className:(0,v.cn)("mb-4 space-y-3 transition-all duration-300 transform",j?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"),children:r.map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:(0,v.cn)("transform transition-all duration-300",j?"translate-y-0 opacity-100":"translate-y-4 opacity-0"),style:{transitionDelay:j?`${50*c}ms`:`${(r.length-c-1)*50}ms`},children:[(0,b.jsxs)(i.Button,{onClick:a.action,className:(0,v.cn)("h-12 w-12 rounded-full shadow-lg text-white transition-all duration-200 hover:scale-110",a.color),size:"sm",children:[(0,b.jsx)(d,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:a.label})]}),(0,b.jsxs)("div",{className:"absolute right-16 top-1/2 transform -translate-y-1/2",children:[(0,b.jsx)("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:a.label}),(0,b.jsx)("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 w-0 h-0 border-t-4 border-b-4 border-l-4 border-transparent border-l-gray-900"})]})]},a.label)})}),(0,b.jsxs)(i.Button,{onClick:p,className:(0,v.cn)("h-14 w-14 rounded-full shadow-lg bg-blue-600 hover:bg-blue-700 text-white transition-all duration-300",j&&"rotate-45"),children:[j?(0,b.jsx)(h.default,{className:"h-6 w-6"}):(0,b.jsx)(d.default,{className:"h-6 w-6"}),(0,b.jsx)("span",{className:"sr-only",children:j?"Close menu":"Open scanning menu"})]}),j&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25 -z-10",onClick:p})]}),l&&(0,b.jsx)(w,{isOpen:l,onClose:()=>m(!1),mode:n,onScanResult:a=>{console.log("Scan result:",a)}}),(0,b.jsx)("div",{className:"fixed bottom-36 right-4 z-30",children:(0,b.jsxs)("div",{className:"bg-blue-600 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs",children:[(0,b.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,b.jsx)(d.default,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium mb-1",children:"Quick Barcode Scanning"}),(0,b.jsx)("div",{className:"text-blue-100",children:"Tap to scan items, count stock, or receive inventory on the go"})]}),(0,b.jsx)("button",{className:"text-blue-200 hover:text-white ml-2",onClick:()=>{},children:(0,b.jsx)(h.default,{className:"h-3 w-3"})})]}),(0,b.jsx)("div",{className:"absolute bottom-full right-8 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-blue-600"})]})}),(0,b.jsx)("div",{className:"fixed bottom-2 right-4 z-30",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2 bg-white rounded-full shadow-sm border border-gray-200 px-3 py-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Offline Ready"})]})})]})}}];

//# sourceMappingURL=_5836bfcb._.js.map