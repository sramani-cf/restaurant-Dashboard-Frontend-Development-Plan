module.exports=[21966,a=>{"use strict";a.s(["MenuManagementClient",()=>ak],21966);var b=a.i(87924),c=a.i(80826),d=a.i(16868),e=a.i(90561),f=a.i(40695),g=a.i(54161),h=a.i(65602),i=a.i(11989),j=a.i(4699),k=a.i(63571),l=a.i(70106);let m=(0,l.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),n=(0,l.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var o=a.i(2769),p=a.i(81828),q=a.i(77859);let r=(0,l.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var s=a.i(6053),t=a.i(4876);let u=(0,l.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var v=a.i(5522),w=a.i(31941),x=a.i(98621),y=a.i(74614);function z(...a){return(0,y.twMerge)((0,x.clsx)(a))}function A(a){let[b,c]=a.split(":").map(Number);return 60*b+c}function B(a,b="USD",c="en-US"){return new Intl.NumberFormat(c,{style:"currency",currency:b,minimumFractionDigits:2}).format(a)}function C({data:a,selectedId:e,expandedIds:h=[],onSelect:l,onExpand:x,onCreate:y,onEdit:A,onDelete:B,onToggleVisibility:C,onDragStart:D,onDragOver:E,onDrop:F,className:G,searchable:H=!0,draggable:I=!1,showActions:J=!0}){let[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),Q=(0,c.useMemo)(()=>{if(!K)return a;let b=a=>a.reduce((a,c)=>{let d=c.name.toLowerCase().includes(K.toLowerCase())||c.description?.toLowerCase().includes(K.toLowerCase()),e=b(c.children);return(d||e.length>0)&&a.push({...c,children:e}),a},[]);return b(a)},[a,K]),R=(0,c.useCallback)(a=>{let b=h.includes(a);x?.(a,!b)},[h,x]),S=(0,c.useCallback)((a,b)=>{I&&(N(b),D?.(b),a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",b.id))},[I,D]),T=(0,c.useCallback)((a,b,c)=>{I&&M&&(a.preventDefault(),a.dataTransfer.dropEffect="move",P({node:b,position:c}),E?.(b,c))},[I,M,E]),U=(0,c.useCallback)((a,b,c)=>{I&&M&&(a.preventDefault(),P(null),F?.(M,b,c),N(null))},[I,M,F]),V=(a,c=0)=>{let v=h.includes(a.id),x=e===a.id,D=a.children.length>0,E=O?.node.id===a.id;return(0,b.jsxs)("div",{className:z("select-none",E&&"opacity-50"),children:[(0,b.jsxs)("div",{className:z("flex items-center group hover:bg-gray-50 rounded px-2 py-1 cursor-pointer",x&&"bg-blue-50 border-r-2 border-blue-500",E&&"bg-blue-100"),style:{paddingLeft:`${16*c+8}px`},onClick:()=>l?.(a),draggable:I,onDragStart:b=>S(b,a),onDragOver:b=>T(b,a,"inside"),onDrop:b=>U(b,a,"inside"),children:[I&&J&&(0,b.jsx)(u,{className:"h-3 w-3 text-gray-400 mr-1 opacity-0 group-hover:opacity-100"}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:b=>{b.stopPropagation(),R(a.id)},disabled:!D,children:D?v?(0,b.jsx)(j.default,{className:"h-3 w-3"}):(0,b.jsx)(i.default,{className:"h-3 w-3"}):(0,b.jsx)("div",{className:"h-3 w-3"})}),(0,b.jsx)("div",{className:"flex items-center text-gray-500 mr-2",children:((a,c)=>{switch(a.type){case"menu":return(0,b.jsx)(k.default,{className:"h-4 w-4"});case"group":return c?(0,b.jsx)(m,{className:"h-4 w-4"}):(0,b.jsx)(n,{className:"h-4 w-4"});default:return(0,b.jsx)(o.default,{className:"h-4 w-4"})}})(a,v)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:z("text-sm truncate",!a.isActive&&"text-gray-400 line-through"),children:a.name}),!a.isActive&&(0,b.jsx)(r,{className:"h-3 w-3 text-gray-400 ml-1"})]}),"item"===a.type&&(0,b.jsxs)("div",{className:"flex items-center space-x-1 mt-1",children:[a.data.basePrice&&(0,b.jsxs)(g.Badge,{variant:"secondary",className:"text-xs",children:["$",a.data.basePrice.toFixed(2)]}),!a.data.isAvailable&&(0,b.jsx)(g.Badge,{variant:"destructive",className:"text-xs",children:"Unavailable"})]})]}),J&&(0,b.jsx)("div",{className:"opacity-0 group-hover:opacity-100",children:(0,b.jsx)(w.Dropdown,{trigger:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,b.jsx)(p.default,{className:"h-3 w-3"})}),items:[{label:"Edit",icon:(0,b.jsx)(s.default,{className:"h-3 w-3"}),onClick:()=>A?.(a)},{label:a.isActive?"Hide":"Show",icon:a.isActive?(0,b.jsx)(r,{className:"h-3 w-3"}):(0,b.jsx)(q.default,{className:"h-3 w-3"}),onClick:()=>C?.(a)},{type:"separator"},..."item"!==a.type?[{label:`Add ${"menu"===a.type?"Group":"Item"}`,icon:(0,b.jsx)(d.default,{className:"h-3 w-3"}),onClick:()=>y?.("menu"===a.type?"group":"item",a.id)}]:[],{type:"separator"},{label:"Delete",icon:(0,b.jsx)(t.default,{className:"h-3 w-3"}),onClick:()=>B?.(a),className:"text-red-600"}]})})]}),I&&M&&M.id!==a.id&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"h-1 bg-blue-500 opacity-0 hover:opacity-100",style:{marginLeft:`${16*c+8}px`},onDragOver:b=>T(b,a,"before"),onDrop:b=>U(b,a,"before")})}),v&&D&&(0,b.jsx)("div",{className:"ml-2",children:a.children.map(a=>V(a,c+1))}),I&&M&&M.id!==a.id&&(0,b.jsx)("div",{className:"h-1 bg-blue-500 opacity-0 hover:opacity-100",style:{marginLeft:`${16*c+8}px`},onDragOver:b=>T(b,a,"after"),onDrop:b=>U(b,a,"after")})]},a.id)};return(0,b.jsxs)("div",{className:z("bg-white border rounded-lg",G),children:[(0,b.jsxs)("div",{className:"p-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Menu Structure"}),J&&y&&(0,b.jsxs)(f.Button,{size:"sm",onClick:()=>y("menu"),className:"h-8",children:[(0,b.jsx)(d.default,{className:"h-3 w-3 mr-1"}),"Menu"]})]}),H&&(0,b.jsx)(v.Input,{placeholder:"Search menus...",value:K,onChange:a=>L(a.target.value),className:"h-8"})]}),(0,b.jsx)("div",{className:"p-2 max-h-96 overflow-y-auto",children:0===Q.length?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:K?"No matching items found":"No menus created yet"}):(0,b.jsx)("div",{className:"space-y-1",children:Q.map(a=>V(a))})})]})}let D=(0,l.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var E=a.i(35277),F=a.i(52839),G=a.i(53405),H=a.i(83604),I=a.i(26405);let J=(0,l.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var K=a.i(86875);function L({data:a,loading:e=!1,selectedIds:h=[],filters:i={},onItemClick:j,onEdit:k,onCopy:l,onDelete:m,onToggleVisibility:n,onSelectionChange:o,onFiltersChange:u,onCreate:v,className:x,channel:y,showBulkActions:C=!0}){let[L,M]=(0,c.useState)("name"),[N,O]=(0,c.useState)("asc"),P=(0,c.useMemo)(()=>a.map(a=>{var b,c;return{...a,effectivePrice:function(a,b,c,d){let e=a.basePrice,f=a.pricingStrategies.filter(a=>(function(a,b,c,d){let e=c||new Date,f=e.getDay(),g=60*e.getHours()+e.getMinutes();switch(a.type){case"base":default:return!0;case"time_based":if(a.conditions?.startTime&&a.conditions?.endTime){let b=A(a.conditions.startTime),c=A(a.conditions.endTime);return g>=b&&g<=c}return!0;case"day_of_week":if(a.conditions?.daysOfWeek)return a.conditions.daysOfWeek.includes(f);return!0;case"location_based":if(a.conditions?.locationIds&&d)return a.conditions.locationIds.includes(d);return!0;case"menu_specific":if(a.conditions?.channelId&&b)return a.conditions.channelId===b;return!0}})(a,b,void 0,void 0)).sort((a,b)=>b.priority-a.priority);if(f.length>0){let a=f[0].prices.find(a=>(!a.validFrom||new Date(a.validFrom)<=new Date)&&(!a.validTo||new Date(a.validTo)>=(c||new Date)));a&&(e=a.amount)}return e}(a,y),available:function(a,b,c){if(!a.isActive||!a.isAvailable)return!1;let d=new Date;if(b){let c=a.channelVisibility.find(a=>a.channelId===b);if(c&&!c.isVisible)return!1;if(c&&(c.availableFrom||c.availableTo)){let a=d.toTimeString().slice(0,5);if(c.availableFrom&&a<c.availableFrom||c.availableTo&&a>c.availableTo)return!1}if(c&&c.daysOfWeek){let a=d.getDay();if(!c.daysOfWeek.includes(a))return!1}}return!a.trackInventory||void 0===a.stockQuantity||a.stockQuantity>0}(a,y),stockStatus:(b=a.stockQuantity,c=a.lowStockThreshold,void 0===b?{status:"in_stock",label:"Not tracked",variant:"default"}:0===b?{status:"out_of_stock",label:"Out of stock",variant:"destructive"}:c&&b<=c?{status:"low_stock",label:`Low stock (${b})`,variant:"warning"}:{status:"in_stock",label:`In stock (${b})`,variant:"default"})}}),[a,y]),Q=[{id:"select",header:({table:a})=>(0,b.jsx)("input",{type:"checkbox",checked:a.getIsAllPageRowsSelected(),onChange:a.getToggleAllPageRowsSelectedHandler(),className:"rounded border-gray-300"}),cell:({row:a})=>(0,b.jsx)("input",{type:"checkbox",checked:a.getIsSelected(),onChange:a.getToggleSelectedHandler(),className:"rounded border-gray-300"}),enableSorting:!1,size:40},{accessorKey:"name",header:"Item",cell:({row:a})=>{let c=a.original;return(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded border flex items-center justify-center flex-shrink-0",children:c.media.length>0?(0,b.jsx)("img",{src:c.media[0].url,alt:c.media[0].alt,className:"w-full h-full object-cover rounded"}):(0,b.jsx)(G.default,{className:"h-5 w-5 text-gray-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("span",{className:z("font-medium truncate cursor-pointer hover:text-blue-600",!c.isActive&&"text-gray-400 line-through"),onClick:()=>j?.(c),children:c.name}),!c.isActive&&(0,b.jsx)(r,{className:"h-3 w-3 text-gray-400"})]}),c.description&&(0,b.jsx)("p",{className:"text-sm text-gray-500 truncate mt-1",children:c.description}),c.tags.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[c.tags.slice(0,3).map(a=>(0,b.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:a},a)),c.tags.length>3&&(0,b.jsxs)(g.Badge,{variant:"secondary",className:"text-xs",children:["+",c.tags.length-3]})]})]})]})}},{accessorKey:"effectivePrice",header:"Price",cell:({row:a})=>{let c=a.original,d=c.effectivePrice!==c.basePrice;return(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"font-medium",children:B(c.effectivePrice)}),d&&(0,b.jsx)("div",{className:"text-xs text-gray-500 line-through",children:B(c.basePrice)})]})}},{accessorKey:"available",header:"Status",cell:({row:a})=>{let c=a.original;return(0,b.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,b.jsx)(g.Badge,{variant:c.available?"default":"destructive",className:"w-fit",children:c.available?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(I.default,{className:"h-3 w-3 mr-1"}),"Available"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J,{className:"h-3 w-3 mr-1"}),"Unavailable"]})}),c.trackInventory&&(0,b.jsx)(g.Badge,{variant:c.stockStatus.variant,className:"w-fit text-xs",children:c.stockStatus.label})]})}},{accessorKey:"preparationTime",header:"Prep Time",cell:({row:a})=>{let c=a.original.preparationTime;return c?(0,b.jsxs)("div",{className:"flex items-center text-sm",children:[(0,b.jsx)(F.default,{className:"h-3 w-3 mr-1"}),function(a){if(a<60)return`${a}m`;let b=Math.floor(a/60),c=a%60;return 0===c?`${b}h`:`${b}h ${c}m`}(c)]}):(0,b.jsx)("span",{className:"text-gray-400",children:"—"})}},{accessorKey:"modifierGroups",header:"Modifiers",cell:({row:a})=>{let c=a.original.modifierGroups.length;return 0===c?(0,b.jsx)("span",{className:"text-gray-400",children:"None"}):(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-xs",children:[c," group",1!==c?"s":""]})}},{accessorKey:"allergens",header:"Allergens",cell:({row:a})=>{let c=a.original.allergens;return 0===c.length?(0,b.jsx)("span",{className:"text-gray-400",children:"None"}):(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(H.default,{className:"h-3 w-3 text-orange-500 mr-1"}),(0,b.jsxs)("span",{className:"text-xs",children:[c.length," allergen",1!==c.length?"s":""]})]})}},{id:"actions",header:"Actions",cell:({row:a})=>{let c=a.original;return(0,b.jsx)(w.Dropdown,{trigger:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,b.jsx)(p.default,{className:"h-4 w-4"})}),items:[{label:"Edit",icon:(0,b.jsx)(s.default,{className:"h-4 w-4"}),onClick:()=>k?.(c)},{label:"Duplicate",icon:(0,b.jsx)(D,{className:"h-4 w-4"}),onClick:()=>l?.(c)},{label:c.isActive?"Hide":"Show",icon:c.isActive?(0,b.jsx)(r,{className:"h-4 w-4"}):(0,b.jsx)(q.default,{className:"h-4 w-4"}),onClick:()=>n?.(c)},{type:"separator"},{label:"Delete",icon:(0,b.jsx)(t.default,{className:"h-4 w-4"}),onClick:()=>m?.(c),className:"text-red-600"}]})},enableSorting:!1,size:60}];(0,c.useCallback)(a=>{let b=Object.keys(a).map(a=>P[parseInt(a)]?.id).filter(Boolean);o?.(b)},[P,o]);let R=(0,c.useMemo)(()=>C&&0!==h.length?(0,b.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-50 border-b",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:[h.length," item",1!==h.length?"s":""," selected"]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",children:[(0,b.jsx)(q.default,{className:"h-3 w-3 mr-1"}),"Show"]}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",children:[(0,b.jsx)(r,{className:"h-3 w-3 mr-1"}),"Hide"]}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",children:[(0,b.jsx)(E.default,{className:"h-3 w-3 mr-1"}),"Update Prices"]}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",className:"text-red-600",children:[(0,b.jsx)(t.default,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]}):null,[C,h.length]),S=(0,c.useMemo)(()=>(0,b.jsx)("div",{className:"flex items-center space-x-2",children:v&&(0,b.jsxs)(f.Button,{size:"sm",onClick:v,children:[(0,b.jsx)(d.default,{className:"h-3 w-3 mr-1"}),"Add Item"]})}),[v]);return(0,b.jsxs)("div",{className:z("bg-white border rounded-lg",x),children:[R,(0,b.jsx)(K.DataTable,{columns:Q,data:P,loading:e,searchable:!0,searchPlaceholder:"Search menu items...",filterable:!0,exportable:!0,selectable:!0,pagination:!0,pageSize:20,onRowClick:j,toolbar:S,className:"border-none"})]})}var M=a.i(62213),N=a.i(22644);let O=(0,l.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var P=a.i(99548),Q=a.i(59537),R=a.i(17753),S=a.i(80281),T=a.i(21958),U=a.i(3130);function V({modifierGroups:a,onChange:e,className:h}){let[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),q=(0,c.useCallback)(a=>{l(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},[]),r=(0,c.useCallback)(()=>{let b={id:`temp-group-${Date.now()}`,name:"New Modifier Group",description:"",isRequired:!1,minSelections:0,maxSelections:1,sortOrder:a.length,displayType:"checkbox",isActive:!0,createdAt:new Date,updatedAt:new Date,options:[]};e([...a,b]),l(a=>[...a,b.id]),n(b.id)},[a,e]),s=(0,c.useCallback)((b,c)=>{e(a.map(a=>a.id===b?{...a,...c,updatedAt:new Date}:a))},[a,e]),w=(0,c.useCallback)(b=>{window.confirm("Are you sure you want to delete this modifier group?")&&(e(a.filter(a=>a.id!==b)),l(a=>a.filter(a=>a!==b)))},[a,e]),x=(0,c.useCallback)(b=>{let c=a.find(a=>a.id===b);if(!c)return;let d={id:`temp-option-${Date.now()}`,name:"New Option",description:"",price:0,sortOrder:c.options.length,isDefault:!1,isActive:!0,createdAt:new Date,updatedAt:new Date,pricingStrategies:[],allergens:[],media:[]};s(b,{options:[...c.options,d]}),p(d.id)},[a,s]),y=(0,c.useCallback)((b,c,d)=>{let e=a.find(a=>a.id===b);e&&s(b,{options:e.options.map(a=>a.id===c?{...a,...d,updatedAt:new Date}:a)})},[a,s]),z=(0,c.useCallback)((b,c)=>{if(window.confirm("Are you sure you want to delete this modifier option?")){let d=a.find(a=>a.id===b);d&&s(b,{options:d.options.filter(a=>a.id!==c)})}},[a,s]);return(0,c.useCallback)((b,c)=>{let d=[...a],[f]=d.splice(b,1);d.splice(c,0,f),d.forEach((a,b)=>{a.sortOrder=b}),e(d)},[a,e]),(0,b.jsxs)("div",{className:h,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Modifier Groups"}),(0,b.jsxs)(f.Button,{size:"sm",onClick:r,children:[(0,b.jsx)(d.default,{className:"h-4 w-4 mr-2"}),"Add Group"]})]}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,b.jsx)("p",{className:"mb-2",children:"No modifier groups added yet"}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:r,children:[(0,b.jsx)(d.default,{className:"h-4 w-4 mr-2"}),"Add Your First Group"]})]}):(0,b.jsx)("div",{className:"space-y-4",children:a.map((a,c)=>(0,b.jsxs)(U.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>q(a.id),children:k.includes(a.id)?(0,b.jsx)(j.default,{className:"h-4 w-4"}):(0,b.jsx)(i.default,{className:"h-4 w-4"})}),(0,b.jsx)(u,{className:"h-4 w-4 text-gray-400 cursor-move"}),m===a.id?(0,b.jsx)(v.Input,{value:a.name,onChange:b=>s(a.id,{name:b.target.value}),onBlur:()=>n(null),onKeyDown:a=>{"Enter"===a.key&&n(null)},className:"h-7 text-sm font-medium",autoFocus:!0}):(0,b.jsx)("h4",{className:"font-medium cursor-pointer hover:text-blue-600",onClick:()=>n(a.id),children:a.name}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[a.isRequired&&(0,b.jsx)(g.Badge,{variant:"default",className:"text-xs",children:"Required"}),(0,b.jsxs)(g.Badge,{variant:"secondary",className:"text-xs",children:[a.options.length," option",1!==a.options.length?"s":""]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(S.Switch,{size:"sm",checked:a.isActive,onCheckedChange:b=>s(a.id,{isActive:b})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>w(a.id),children:(0,b.jsx)(t.default,{className:"h-3 w-3 text-red-600"})})]})]}),k.includes(a.id)&&(0,b.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,b.jsx)(v.Input,{value:a.description||"",onChange:b=>s(a.id,{description:b.target.value}),placeholder:"Optional description",className:"h-8 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Display Type"}),(0,b.jsxs)("select",{value:a.displayType,onChange:b=>s(a.id,{displayType:b.target.value}),className:"w-full h-8 px-2 text-sm border border-gray-300 rounded-md",children:[(0,b.jsx)("option",{value:"radio",children:"Radio Buttons"}),(0,b.jsx)("option",{value:"checkbox",children:"Checkboxes"}),(0,b.jsx)("option",{value:"dropdown",children:"Dropdown"}),(0,b.jsx)("option",{value:"quantity",children:"Quantity"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(S.Switch,{size:"sm",checked:a.isRequired,onCheckedChange:b=>s(a.id,{isRequired:b})}),(0,b.jsx)("label",{className:"text-sm",children:"Required"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Min Selections"}),(0,b.jsx)(v.Input,{type:"number",min:"0",value:a.minSelections,onChange:b=>s(a.id,{minSelections:parseInt(b.target.value)||0}),className:"h-8 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Max Selections"}),(0,b.jsx)(v.Input,{type:"number",min:"0",value:a.maxSelections||"",onChange:b=>s(a.id,{maxSelections:parseInt(b.target.value)||void 0}),placeholder:"Unlimited",className:"h-8 text-sm"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h5",{className:"font-medium",children:"Options"}),(0,b.jsxs)(f.Button,{size:"sm",onClick:()=>x(a.id),children:[(0,b.jsx)(d.default,{className:"h-3 w-3 mr-1"}),"Add Option"]})]}),0===a.options.length?(0,b.jsx)("div",{className:"text-center py-4 text-gray-500 border border-dashed border-gray-200 rounded",children:"No options added yet"}):(0,b.jsx)("div",{className:"space-y-2",children:a.options.map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded border",children:[(0,b.jsx)(u,{className:"h-4 w-4 text-gray-400 cursor-move"}),(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[(0,b.jsx)("div",{children:o===c.id?(0,b.jsx)(v.Input,{value:c.name,onChange:b=>y(a.id,c.id,{name:b.target.value}),onBlur:()=>p(null),onKeyDown:a=>{"Enter"===a.key&&p(null)},className:"h-7 text-sm",autoFocus:!0}):(0,b.jsx)("div",{className:"text-sm font-medium cursor-pointer hover:text-blue-600",onClick:()=>p(c.id),children:c.name})}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-500",children:"$"}),(0,b.jsx)(v.Input,{type:"number",step:"0.01",min:"0",value:c.price,onChange:b=>y(a.id,c.id,{price:parseFloat(b.target.value)||0}),className:"h-7 text-sm pl-6",placeholder:"0.00"})]}),(0,b.jsx)(v.Input,{value:c.description||"",onChange:b=>y(a.id,c.id,{description:b.target.value}),placeholder:"Optional description",className:"h-7 text-sm"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("input",{type:"checkbox",checked:c.isDefault,onChange:b=>y(a.id,c.id,{isDefault:b.target.checked}),className:"rounded text-xs"}),(0,b.jsx)("label",{className:"text-xs text-gray-600",children:"Default"})]}),(0,b.jsx)(S.Switch,{size:"sm",checked:c.isActive,onCheckedChange:b=>y(a.id,c.id,{isActive:b})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>z(a.id,c.id),children:(0,b.jsx)(t.default,{className:"h-3 w-3 text-red-600"})})]})]},c.id))})]})]})]},a.id))})]})}var W=a.i(67937),X=a.i(24989),Y=a.i(57851);function Z({strategies:a,onChange:e,className:h}){let[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null),o=(0,c.useCallback)(a=>{l(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},[]),p=(0,c.useCallback)(()=>{let b={id:`temp-strategy-${Date.now()}`,name:"New Pricing Strategy",type:"time_based",priority:a.length,conditions:{},prices:[{id:`temp-price-${Date.now()}`,amount:0,currency:"USD"}]};e([...a,b]),l(a=>[...a,b.id]),n(b.id)},[a,e]),q=(0,c.useCallback)((b,c)=>{e(a.map(a=>a.id===b?{...a,...c}:a))},[a,e]),r=(0,c.useCallback)(b=>{window.confirm("Are you sure you want to delete this pricing strategy?")&&(e(a.filter(a=>a.id!==b)),l(a=>a.filter(a=>a!==b)))},[a,e]),s=(0,c.useCallback)((b,c,d)=>{let e=a.find(a=>a.id===b);e&&q(b,{prices:e.prices.map(a=>a.id===c?{...a,...d}:a)})},[a,q]),u=(0,c.useCallback)(b=>{let c=a.find(a=>a.id===b);if(!c)return;let d={id:`temp-price-${Date.now()}`,amount:0,currency:"USD"};q(b,{prices:[...c.prices,d]})},[a,q]),w=(0,c.useCallback)((b,c)=>{let d=a.find(a=>a.id===b);d&&!(d.prices.length<=1)&&q(b,{prices:d.prices.filter(a=>a.id!==c)})},[a,q]),x=(0,c.useCallback)((b,c,d)=>{let e=a.find(a=>a.id===b);e&&q(b,{conditions:{...e.conditions,[c]:d}})},[a,q]);return(0,b.jsxs)("div",{className:h,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:"Pricing Strategies"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Different prices for different conditions"})]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:p,children:[(0,b.jsx)(d.default,{className:"h-3 w-3 mr-1"}),"Add Strategy"]})]}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-6 text-gray-500 border border-dashed border-gray-300 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm mb-2",children:"No pricing strategies configured"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mb-3",children:"Add strategies for time-based, location-based, or channel-specific pricing"}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",onClick:p,children:[(0,b.jsx)(d.default,{className:"h-3 w-3 mr-1"}),"Add Strategy"]})]}):(0,b.jsx)("div",{className:"space-y-3",children:a.map((a,c)=>(0,b.jsxs)(U.Card,{className:"p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>o(a.id),children:k.includes(a.id)?(0,b.jsx)(j.default,{className:"h-3 w-3"}):(0,b.jsx)(i.default,{className:"h-3 w-3"})}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(a=>{switch(a){case"time_based":return(0,b.jsx)(F.default,{className:"h-4 w-4"});case"day_of_week":return(0,b.jsx)(W.default,{className:"h-4 w-4"});case"location_based":return(0,b.jsx)(X.default,{className:"h-4 w-4"});case"menu_specific":return(0,b.jsx)(Y.default,{className:"h-4 w-4"});default:return(0,b.jsx)(E.default,{className:"h-4 w-4"})}})(a.type),m===a.id?(0,b.jsx)(v.Input,{value:a.name,onChange:b=>q(a.id,{name:b.target.value}),onBlur:()=>n(null),onKeyDown:a=>{"Enter"===a.key&&n(null)},className:"h-6 text-sm font-medium",autoFocus:!0}):(0,b.jsx)("span",{className:"text-sm font-medium cursor-pointer hover:text-blue-600",onClick:()=>n(a.id),children:a.name})]}),(0,b.jsxs)(g.Badge,{variant:"secondary",className:"text-xs",children:["Priority: ",a.priority]}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs capitalize",children:a.type.replace("_"," ")})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:B(a.prices[0]?.amount||0)}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>r(a.id),children:(0,b.jsx)(t.default,{className:"h-3 w-3 text-red-600"})})]})]}),k.includes(a.id)&&(0,b.jsxs)("div",{className:"space-y-4 border-t pt-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Strategy Type"}),(0,b.jsxs)("select",{value:a.type,onChange:b=>q(a.id,{type:b.target.value,conditions:{}}),className:"w-full h-8 px-2 text-sm border border-gray-300 rounded-md",children:[(0,b.jsx)("option",{value:"base",children:"Base Price"}),(0,b.jsx)("option",{value:"time_based",children:"Time Based"}),(0,b.jsx)("option",{value:"day_of_week",children:"Day of Week"}),(0,b.jsx)("option",{value:"location_based",children:"Location Based"}),(0,b.jsx)("option",{value:"menu_specific",children:"Menu/Channel Specific"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Priority"}),(0,b.jsx)(v.Input,{type:"number",min:"0",value:a.priority,onChange:b=>q(a.id,{priority:parseInt(b.target.value)||0}),className:"h-8 text-sm"})]})]}),"base"!==a.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-medium mb-2",children:"Conditions"}),(a=>{switch(a.type){case"time_based":return(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Start Time"}),(0,b.jsx)(v.Input,{type:"time",value:a.conditions?.startTime||"",onChange:b=>x(a.id,"startTime",b.target.value),className:"h-8 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"End Time"}),(0,b.jsx)(v.Input,{type:"time",value:a.conditions?.endTime||"",onChange:b=>x(a.id,"endTime",b.target.value),className:"h-8 text-sm"})]})]});case"day_of_week":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Days of Week"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:`${a.id}-day-${d}`,checked:a.conditions?.daysOfWeek?.includes(d)||!1,onChange:b=>{let c=a.conditions?.daysOfWeek||[],e=b.target.checked?[...c,d]:c.filter(a=>a!==d);x(a.id,"daysOfWeek",e)},className:"rounded text-xs"}),(0,b.jsx)("label",{htmlFor:`${a.id}-day-${d}`,className:"text-xs",children:c.slice(0,3)})]},c))})]});case"location_based":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Location IDs"}),(0,b.jsx)(v.Input,{value:a.conditions?.locationIds?.join(", ")||"",onChange:b=>{let c=b.target.value.split(",").map(a=>a.trim()).filter(Boolean);x(a.id,"locationIds",c)},placeholder:"Enter location IDs separated by commas",className:"h-8 text-sm"})]});case"menu_specific":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Channel ID"}),(0,b.jsxs)("select",{value:a.conditions?.channelId||"",onChange:b=>x(a.id,"channelId",b.target.value),className:"w-full h-8 px-2 text-sm border border-gray-300 rounded-md",children:[(0,b.jsx)("option",{value:"",children:"Select channel"}),(0,b.jsx)("option",{value:"dine-in",children:"Dine In"}),(0,b.jsx)("option",{value:"takeout",children:"Takeout"}),(0,b.jsx)("option",{value:"delivery",children:"Delivery"}),(0,b.jsx)("option",{value:"online",children:"Online"})]})]});default:return null}})(a)]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h5",{className:"text-sm font-medium",children:"Prices"}),(0,b.jsxs)(f.Button,{size:"sm",onClick:()=>u(a.id),children:[(0,b.jsx)(d.default,{className:"h-3 w-3 mr-1"}),"Add Price"]})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.prices.map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded border",children:[(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-500",children:"$"}),(0,b.jsx)(v.Input,{type:"number",step:"0.01",min:"0",value:c.amount,onChange:b=>s(a.id,c.id,{amount:parseFloat(b.target.value)||0}),className:"h-7 text-sm pl-6",placeholder:"0.00"})]}),(0,b.jsx)(v.Input,{type:"date",value:c.validFrom?c.validFrom.toISOString().split("T")[0]:"",onChange:b=>s(a.id,c.id,{validFrom:b.target.value?new Date(b.target.value):void 0}),className:"h-7 text-sm",placeholder:"Valid from"}),(0,b.jsx)(v.Input,{type:"date",value:c.validTo?c.validTo.toISOString().split("T")[0]:"",onChange:b=>s(a.id,c.id,{validTo:b.target.value?new Date(b.target.value):void 0}),className:"h-7 text-sm",placeholder:"Valid to"}),(0,b.jsxs)("select",{value:c.currency,onChange:b=>s(a.id,c.id,{currency:b.target.value}),className:"h-7 px-2 text-sm border border-gray-300 rounded-md",children:[(0,b.jsx)("option",{value:"USD",children:"USD"}),(0,b.jsx)("option",{value:"EUR",children:"EUR"}),(0,b.jsx)("option",{value:"GBP",children:"GBP"})]})]}),a.prices.length>1&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>w(a.id,c.id),children:(0,b.jsx)(t.default,{className:"h-3 w-3 text-red-600"})})]},c.id))})]})]})]},a.id))})]})}var $=a.i(60381);function _({channelVisibility:a,availableChannels:d,onChange:e,className:h}){let[i,j]=(0,c.useState)([]),k=(0,c.useCallback)(a=>{j(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},[]),l=(0,c.useCallback)(b=>{let c=a.find(a=>a.channelId===b);return c||{channelId:b,isVisible:!0}},[a]),m=(0,c.useCallback)((b,c)=>{a.find(a=>a.channelId===b)?e(a.map(a=>a.channelId===b?{...a,...c}:a)):e([...a,{channelId:b,isVisible:!0,...c}])},[a,e]),n=(0,c.useCallback)((a,b)=>{let c=l(a).daysOfWeek||[],d=c.includes(b)?c.filter(a=>a!==b):[...c,b].sort();m(a,{daysOfWeek:d.length>0?d:void 0})},[l,m]),o=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];return(0,b.jsxs)("div",{className:h,children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold mb-1",children:"Channel Visibility"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Control which sales channels can see and order this item"})]}),(0,b.jsx)("div",{className:"space-y-3",children:d.map(a=>{let c=l(a.id),d=c.availableFrom||c.availableTo||c.daysOfWeek&&c.daysOfWeek.length>0;return(0,b.jsxs)(U.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[c.isVisible?(0,b.jsx)(q.default,{className:"h-4 w-4 text-green-600"}):(0,b.jsx)(r,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs capitalize",children:a.type.replace("_"," ")}),d&&(0,b.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:"Custom Schedule"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(S.Switch,{size:"sm",checked:c.isVisible,onCheckedChange:b=>m(a.id,{isVisible:b})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>k(a.id),children:(0,b.jsx)($.default,{className:"h-3 w-3"})})]})]}),i.includes(a.id)&&(0,b.jsxs)("div",{className:"space-y-4 border-t pt-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,b.jsx)(F.default,{className:"h-4 w-4"}),(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Time Availability"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1 text-gray-600",children:"Available From"}),(0,b.jsx)(v.Input,{type:"time",value:c.availableFrom||"",onChange:b=>m(a.id,{availableFrom:b.target.value||void 0}),className:"h-8 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1 text-gray-600",children:"Available To"}),(0,b.jsx)(v.Input,{type:"time",value:c.availableTo||"",onChange:b=>m(a.id,{availableTo:b.target.value||void 0}),className:"h-8 text-sm"})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for all-day availability"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,b.jsx)(W.default,{className:"h-4 w-4"}),(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Day Availability"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(d=>{let e=c.daysOfWeek?.includes(d.value),g=!c.daysOfWeek||0===c.daysOfWeek.length;return(0,b.jsx)(f.Button,{size:"sm",variant:e||g?"default":"outline",className:"h-8 px-3 text-xs",onClick:()=>n(a.id,d.value),children:d.label},d.value)})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:c.daysOfWeek&&0!==c.daysOfWeek.length?`Available ${c.daysOfWeek.length} day${1!==c.daysOfWeek.length?"s":""} per week`:"Available all days"}),c.daysOfWeek&&c.daysOfWeek.length>0&&(0,b.jsx)(f.Button,{size:"sm",variant:"ghost",className:"h-6 text-xs",onClick:()=>m(a.id,{daysOfWeek:void 0}),children:"Clear"})]})]}),(0,b.jsxs)("div",{className:"flex space-x-2 pt-2 border-t",children:[(0,b.jsx)(f.Button,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>{m(a.id,{availableFrom:"06:00",availableTo:"22:00",daysOfWeek:[1,2,3,4,5]})},children:"Business Hours"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>{m(a.id,{availableFrom:"17:00",availableTo:"23:00",daysOfWeek:void 0})},children:"Dinner Only"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>{m(a.id,{availableFrom:void 0,availableTo:void 0,daysOfWeek:[5,6]})},children:"Weekends"}),(0,b.jsx)(f.Button,{size:"sm",variant:"ghost",className:"text-xs text-red-600",onClick:()=>{m(a.id,{availableFrom:void 0,availableTo:void 0,daysOfWeek:void 0})},children:"Reset"})]})]})]},a.id)})}),0===d.length&&(0,b.jsxs)("div",{className:"text-center py-6 text-gray-500 border border-dashed border-gray-300 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm",children:"No sales channels configured"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Set up your sales channels to control visibility"})]})]})}function aa({item:a,isOpen:e,onClose:h,onSave:i,availableChannels:j=[],availableAllergens:k=[],availableGroups:l=[],loading:m=!1,className:n}){let[o,p]=(0,c.useState)({name:"",description:"",basePrice:0,sortOrder:0,isActive:!0,isAvailable:!0,pricingStrategies:[],tags:[],allergens:[],dietaryRestrictions:[],media:[],channelVisibility:[]}),[q,r]=(0,c.useState)("basic"),[s,t]=(0,c.useState)({}),[u,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a?p(function a(b){if(null===b||"object"!=typeof b)return b;if(b instanceof Date)return new Date(b.getTime());if(b instanceof Array)return b.map(b=>a(b));if("object"==typeof b){let c={};for(let d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}return b}(a)):p({name:"",description:"",basePrice:0,sortOrder:0,isActive:!0,isAvailable:!0,pricingStrategies:[],tags:[],allergens:[],dietaryRestrictions:[],media:[],channelVisibility:[]}),w(!1),t({})},[a]);let x=(0,c.useCallback)((a,b)=>{p(c=>({...c,[a]:b})),w(!0),s[a]&&t(b=>{let c={...b};return delete c[a],c})},[s]),y=(0,c.useCallback)(()=>{let a={};return o.name?.trim()||(a.name="Name is required"),(!o.basePrice||o.basePrice<=0)&&(a.basePrice="Price must be greater than 0"),t(a),0===Object.keys(a).length},[o]),z=(0,c.useCallback)(async()=>{if(y())try{await i(o),w(!1)}catch(a){console.error("Failed to save item:",a)}},[o,y,i]),A=(0,c.useCallback)(()=>{(!u||window.confirm("You have unsaved changes. Are you sure you want to close?"))&&h()},[u,h]),B=(0,c.useCallback)(a=>{a.trim()&&!o.tags?.includes(a.trim())&&x("tags",[...o.tags||[],a.trim()])},[o.tags,x]),C=(0,c.useCallback)(a=>{x("tags",o.tags?.filter(b=>b!==a)||[])},[o.tags,x]),D=(0,c.useCallback)(a=>{let b=o.allergens||[];b.includes(a)?x("allergens",b.filter(b=>b!==a)):x("allergens",[...b,a])},[o.allergens,x]),G=(0,c.useCallback)(a=>{let b=o.dietaryRestrictions||[];b.includes(a)?x("dietaryRestrictions",b.filter(b=>b!==a)):x("dietaryRestrictions",[...b,a])},[o.dietaryRestrictions,x]);if(!e)return null;let I=[{id:"basic",label:"Basic Info",icon:(0,b.jsx)(P.default,{className:"h-4 w-4"})},{id:"pricing",label:"Pricing",icon:(0,b.jsx)(E.default,{className:"h-4 w-4"})},{id:"availability",label:"Availability",icon:(0,b.jsx)(F.default,{className:"h-4 w-4"})},{id:"inventory",label:"Inventory",icon:(0,b.jsx)(Q.default,{className:"h-4 w-4"})},{id:"modifiers",label:"Modifiers",icon:(0,b.jsx)(d.default,{className:"h-4 w-4"})},{id:"allergens",label:"Allergens",icon:(0,b.jsx)(H.default,{className:"h-4 w-4"})},{id:"media",label:"Media",icon:(0,b.jsx)(R.default,{className:"h-4 w-4"})}];return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:A}),(0,b.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full max-w-2xl bg-white shadow-xl flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:a?"Edit Menu Item":"Create Menu Item"}),a&&(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",a.id]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[u&&(0,b.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:"Unsaved changes"}),(0,b.jsxs)(f.Button,{onClick:z,disabled:m,size:"sm",children:[(0,b.jsx)(N.default,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,b.jsx)(f.Button,{onClick:A,variant:"ghost",size:"sm",children:(0,b.jsx)(M.default,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)(T.Tabs,{value:q,onValueChange:r,tabs:I,className:"border-b"}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["basic"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Item Name *"}),(0,b.jsx)(v.Input,{value:o.name||"",onChange:a=>x("name",a.target.value),placeholder:"Enter item name",error:s.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:o.description||"",onChange:a=>x("description",a.target.value),placeholder:"Enter item description",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Short Description"}),(0,b.jsx)(v.Input,{value:o.shortDescription||"",onChange:a=>x("shortDescription",a.target.value),placeholder:"Brief description for POS/receipts"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"SKU"}),(0,b.jsx)(v.Input,{value:o.sku||"",onChange:a=>x("sku",a.target.value),placeholder:"Product SKU"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Barcode"}),(0,b.jsx)(v.Input,{value:o.barcode||"",onChange:a=>x("barcode",a.target.value),placeholder:"Barcode"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Menu Group"}),(0,b.jsxs)("select",{value:o.menuGroupId||"",onChange:a=>x("menuGroupId",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"Select a group"}),l.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:o.tags?.map(a=>(0,b.jsxs)(g.Badge,{variant:"secondary",className:"px-2 py-1",children:[a,(0,b.jsx)("button",{onClick:()=>C(a),className:"ml-1 text-gray-500 hover:text-gray-700",children:(0,b.jsx)(M.default,{className:"h-3 w-3"})})]},a))}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(v.Input,{placeholder:"Add tag",onKeyDown:a=>{"Enter"===a.key&&(B(a.currentTarget.value),a.currentTarget.value="")}}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>{let a=document.querySelector('input[placeholder="Add tag"]');a?.value&&(B(a.value),a.value="")},children:(0,b.jsx)(d.default,{className:"h-3 w-3"})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Active"}),(0,b.jsx)(S.Switch,{checked:o.isActive,onCheckedChange:a=>x("isActive",a)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Available"}),(0,b.jsx)(S.Switch,{checked:o.isAvailable,onCheckedChange:a=>x("isAvailable",a)})]})]})]}),"pricing"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Base Price *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(E.default,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(v.Input,{type:"number",step:"0.01",min:"0",value:o.basePrice||"",onChange:a=>x("basePrice",parseFloat(a.target.value)||0),placeholder:"0.00",className:"pl-10",error:s.basePrice})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Pricing Strategies"}),(0,b.jsx)(Z,{strategies:o.pricingStrategies||[],onChange:a=>x("pricingStrategies",a)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Preparation Time (minutes)"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(F.default,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(v.Input,{type:"number",min:"0",value:o.preparationTime||"",onChange:a=>x("preparationTime",parseInt(a.target.value)||void 0),placeholder:"15",className:"pl-10"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cooking Instructions"}),(0,b.jsx)("textarea",{value:o.cookingInstructions||"",onChange:a=>x("cookingInstructions",a.target.value),placeholder:"Special cooking instructions",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]})]}),"availability"===q&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(_,{channelVisibility:o.channelVisibility||[],availableChannels:j,onChange:a=>x("channelVisibility",a)})}),"inventory"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Track Inventory"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Monitor stock levels for this item"})]}),(0,b.jsx)(S.Switch,{checked:o.trackInventory,onCheckedChange:a=>x("trackInventory",a)})]}),o.trackInventory&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Current Stock"}),(0,b.jsx)(v.Input,{type:"number",min:"0",value:o.stockQuantity||"",onChange:a=>x("stockQuantity",parseInt(a.target.value)||void 0),placeholder:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Low Stock Threshold"}),(0,b.jsx)(v.Input,{type:"number",min:"0",value:o.lowStockThreshold||"",onChange:a=>x("lowStockThreshold",parseInt(a.target.value)||void 0),placeholder:"5"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Get notified when stock falls below this level"})]})]})]}),"modifiers"===q&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(V,{modifierGroups:a?.modifierGroups||[],onChange:a=>{console.log("Modifier groups updated:",a)}})}),"allergens"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-3",children:"Allergens"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:k.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:`allergen-${a.id}`,checked:o.allergens?.includes(a.id)||!1,onChange:()=>D(a.id),className:"rounded border-gray-300"}),(0,b.jsx)("label",{htmlFor:`allergen-${a.id}`,className:"text-sm cursor-pointer",children:a.name})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-3",children:"Dietary Restrictions"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["vegetarian","vegan","gluten-free","dairy-free","nut-free","keto","halal","kosher"].map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:`restriction-${a}`,checked:o.dietaryRestrictions?.includes(a)||!1,onChange:()=>G(a),className:"rounded border-gray-300"}),(0,b.jsx)("label",{htmlFor:`restriction-${a}`,className:"text-sm cursor-pointer capitalize",children:a.replace("-"," ")})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Spice Level"}),(0,b.jsxs)("select",{value:o.spiceLevel||"",onChange:a=>x("spiceLevel",a.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"Not specified"}),(0,b.jsx)("option",{value:"none",children:"No spice"}),(0,b.jsx)("option",{value:"mild",children:"Mild"}),(0,b.jsx)("option",{value:"medium",children:"Medium"}),(0,b.jsx)("option",{value:"hot",children:"Hot"}),(0,b.jsx)("option",{value:"very_hot",children:"Very Hot"})]})]})]}),"media"===q&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-3",children:"Item Images"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,b.jsx)(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Images"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Drag and drop images here, or click to select files"}),(0,b.jsxs)(f.Button,{variant:"outline",children:[(0,b.jsx)(O,{className:"h-4 w-4 mr-2"}),"Choose Files"]})]}),o.media&&o.media.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-3 gap-4 mt-4",children:o.media.map((a,c)=>(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:a.url,alt:a.alt,className:"w-full h-24 object-cover rounded border"}),(0,b.jsx)(f.Button,{size:"sm",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>{let a=[...o.media];a.splice(c,1),x("media",a)},children:(0,b.jsx)(M.default,{className:"h-3 w-3"})})]},c))})]})})]})]})]})]})}let ab=a=>new Promise(b=>setTimeout(b,a)),ac=[{id:"1",name:"Main Menu",description:"Our signature dishes and classics",type:"main",sortOrder:1,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-15"),media:[],channelVisibility:[{channelId:"dine-in",isVisible:!0},{channelId:"takeout",isVisible:!0}],locationIds:[],groups:[{id:"group-1",name:"Appetizers",description:"Start your meal right",sortOrder:1,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-10"),media:[],channelVisibility:[],menuId:"1",items:[{id:"item-1",name:"Buffalo Wings",description:"Crispy wings tossed in our signature buffalo sauce",basePrice:12.99,sortOrder:1,isActive:!0,isAvailable:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-05"),pricingStrategies:[],tags:["spicy","popular"],allergens:[],dietaryRestrictions:[],media:[],channelVisibility:[],modifierGroups:[{id:"mod-group-1",name:"Sauce Options",description:"Choose your sauce",isRequired:!0,minSelections:1,maxSelections:1,sortOrder:1,displayType:"radio",isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01"),options:[{id:"mod-opt-1",name:"Buffalo",description:"Classic buffalo sauce",price:0,sortOrder:1,isDefault:!0,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01"),pricingStrategies:[],allergens:[],media:[]},{id:"mod-opt-2",name:"BBQ",description:"Sweet and smoky BBQ sauce",price:0,sortOrder:2,isDefault:!1,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01"),pricingStrategies:[],allergens:[],media:[]}]}]}],subGroups:[]}]}];async function ad(a){await ab(100);let b=[...ac];if(a?.search){let c=a.search.toLowerCase();b=b.filter(a=>a.name.toLowerCase().includes(c)||a.description?.toLowerCase().includes(c))}a?.isActive!==void 0&&(b=b.filter(b=>b.isActive===a.isActive));let c=a?.page||1,d=a?.limit||10,e=(c-1)*d;return{data:b.slice(e,e+d),total:b.length,page:c,limit:d}}async function ae(a){var b,c;await ab(100);let d=[];for(let b of ac)a?.menuId&&b.id!==a.menuId||function a(b,c,d){for(let e of b)d&&e.id!==d||c.push(...e.items),d||a(e.subGroups,c)}(b.groups,d,a?.groupId);a?.filters&&(b=d,c=a.filters,d=b.filter(a=>{if(c.search){let b=c.search.toLowerCase();if(!a.name.toLowerCase().includes(b)&&!a.description?.toLowerCase().includes(b))return!1}return!(void 0!==c.isActive&&a.isActive!==c.isActive||void 0!==c.isAvailable&&a.isAvailable!==c.isAvailable||c.priceRange&&(a.basePrice<c.priceRange[0]||a.basePrice>c.priceRange[1])||c.allergens?.length&&c.allergens.some(b=>a.allergens.includes(b))||c.tags?.length&&!c.tags.some(b=>a.tags.includes(b)))&&!0}));let e=a?.page||1,f=a?.limit||20,g=(e-1)*f;return{data:d.slice(g,g+f),total:d.length,page:e,limit:f}}async function af(a){await ab(200);let b={...a,id:`item-${Date.now()}`,createdAt:new Date,updatedAt:new Date,modifierGroups:[]};if(a.menuGroupId)for(let c of ac){let d=function a(b,c){for(let d of b){if(d.id===c)return d;let b=a(d.subGroups,c);if(b)return b}return null}(c.groups,a.menuGroupId);if(d){d.items.push(b);break}}return b}async function ag(a,b){for(let c of(await ab(200),ac)){let d=function a(b,c){for(let d of b){let b=d.items.find(a=>a.id===c);if(b)return b;let e=a(d.subGroups,c);if(e)return e}return null}(c.groups,a);if(d)return Object.assign(d,{...b,updatedAt:new Date}),d}return null}async function ah(a){for(let b of(await ab(200),ac))if(function a(b,c){for(let d of b){let b=d.items.findIndex(a=>a.id===c);if(-1!==b)return d.items.splice(b,1),!0;if(a(d.subGroups,c))return!0}return!1}(b.groups,a))return!0;return!1}async function ai(a,b){await ab(300);let c=[];for(let d of a){let a=await ag(d,b);a&&c.push(a)}return c}async function aj(a){await ab(300);let b=!0;for(let c of a)await ah(c)||(b=!1);return b}function ak({initialMenus:a,availableChannels:i,availableAllergens:j}){let[k,l]=(0,c.useState)(a),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(a.map(a=>a.id)),[u,v]=(0,c.useState)({}),[w,x]=(0,c.useState)("dine-in"),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useTransition)(),J=(0,c.useMemo)(()=>k.map(a=>({id:a.id,type:"menu",name:a.name,description:a.description,isActive:a.isActive,sortOrder:a.sortOrder,children:function a(b,c){return b.filter(a=>a.parentGroupId===c).map(d=>({id:d.id,type:"group",name:d.name,description:d.description,isActive:d.isActive,sortOrder:d.sortOrder,parentId:c,children:[...a(b,d.id),...d.items.map(a=>({id:a.id,type:"item",name:a.name,description:a.description,isActive:a.isActive,sortOrder:a.sortOrder,parentId:d.id,children:[],data:a}))].sort((a,b)=>a.sortOrder-b.sortOrder),data:d})).sort((a,b)=>a.sortOrder-b.sortOrder)}(a.groups,a.id),data:a})).sort((a,b)=>a.sortOrder-b.sortOrder),[k]),K=(0,c.useMemo)(()=>{let a=[],b=(c,d)=>{c.forEach(c=>{a.push({id:c.id,name:c.name,menuId:d}),b(c.subGroups,d)})};return k.forEach(a=>{b(a.groups,a.id)}),a},[k]),M=(0,c.useCallback)(async()=>{E(!0),G(null);try{let a={page:1,limit:100,filters:u};o&&("menu"===o.type?a.menuId=o.id:"group"===o.type&&(a.groupId=o.id));let b=await ae(a);n(b.data)}catch(a){console.error("Failed to fetch menu items:",a),G("Failed to load menu items. Please try again.")}finally{E(!1)}},[o,u]);(0,c.useEffect)(()=>{M()},[M]);let N=(0,c.useCallback)(a=>{p(a),r([])},[]),O=(0,c.useCallback)((a,b)=>{t(c=>b?[...c,a]:c.filter(b=>b!==a))},[]),P=(0,c.useCallback)(()=>{B(null),z(!0)},[]),Q=(0,c.useCallback)(a=>{B(a),z(!0)},[]),R=(0,c.useCallback)(a=>{Q(a)},[Q]),S=(0,c.useCallback)(a=>{B({...a,name:`${a.name} (Copy)`,id:void 0,createdAt:void 0,updatedAt:void 0}),z(!0)},[]),T=(0,c.useCallback)(async a=>{if(window.confirm(`Are you sure you want to delete "${a.name}"?`))try{await ah(a.id),await M()}catch(a){console.error("Failed to delete item:",a),G("Failed to delete item. Please try again.")}},[M]),U=(0,c.useCallback)(async a=>{try{await ag(a.id,{isActive:!a.isActive}),await M()}catch(a){console.error("Failed to update item visibility:",a),G("Failed to update item visibility. Please try again.")}},[M]),V=(0,c.useCallback)(async a=>{try{A?await ag(A.id,a):await af(a),z(!1),B(null),await M()}catch(a){throw console.error("Failed to save item:",a),Error("Failed to save item. Please try again.")}},[A,M]),W=(0,c.useCallback)(a=>{r(a)},[]),X=(0,c.useCallback)(async()=>{if(0!==q.length)try{await ai(q,{isActive:!0}),await M(),r([])}catch(a){console.error("Failed to bulk update items:",a),G("Failed to update items. Please try again.")}},[q,M]),Y=(0,c.useCallback)(async()=>{if(0!==q.length)try{await ai(q,{isActive:!1}),await M(),r([])}catch(a){console.error("Failed to bulk update items:",a),G("Failed to update items. Please try again.")}},[q,M]),Z=(0,c.useCallback)(async()=>{if(0!==q.length&&window.confirm(`Are you sure you want to delete ${q.length} item${1!==q.length?"s":""}?`))try{await aj(q),await M(),r([])}catch(a){console.error("Failed to bulk delete items:",a),G("Failed to delete items. Please try again.")}},[q,M]),$=(0,c.useCallback)(async()=>{E(!0);try{let[a]=await Promise.all([ad({page:1,limit:50}),M()]);l(a.data)}catch(a){console.error("Failed to refresh data:",a),G("Failed to refresh data. Please try again.")}finally{E(!1)}},[M]);return(0,b.jsxs)("div",{className:"space-y-6",children:[F&&(0,b.jsx)(h.Alert,{variant:"destructive",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:F}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>G(null),children:"Dismiss"})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Channel:"}),(0,b.jsx)("select",{value:w,onChange:a=>x(a.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:i.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})]}),Object.keys(u).length>0&&(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)(g.Badge,{variant:"secondary",children:[Object.keys(u).length," filter",1!==Object.keys(u).length?"s":""]}),(0,b.jsx)(f.Button,{size:"sm",variant:"ghost",onClick:()=>v({}),children:"Clear"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[q.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(g.Badge,{variant:"secondary",children:[q.length," selected"]}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:X,children:"Show"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:Y,children:"Hide"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",className:"text-red-600",onClick:Z,children:"Delete"})]}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",onClick:$,children:[(0,b.jsx)(e.default,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:P,children:[(0,b.jsx)(d.default,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(C,{data:J,selectedId:o?.id,expandedIds:s,onSelect:N,onExpand:O,searchable:!0,showActions:!0,className:"sticky top-6"})}),(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsx)(L,{data:m,loading:D,selectedIds:q,filters:u,onItemClick:R,onEdit:Q,onCopy:S,onDelete:T,onToggleVisibility:U,onSelectionChange:W,onFiltersChange:v,onCreate:P,channel:w,showBulkActions:!0})})]}),(0,b.jsx)(aa,{item:A,isOpen:y,onClose:()=>{z(!1),B(null)},onSave:V,availableChannels:i,availableAllergens:j,availableGroups:K,loading:H})]})}}];

//# sourceMappingURL=components_menu_menu-management-client_tsx_7a3c657c._.js.map