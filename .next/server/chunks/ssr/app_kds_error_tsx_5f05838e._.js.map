{"version":3,"sources":["turbopack:///[project]/app/kds/error.tsx"],"sourcesContent":["/**\n * KDS Error Boundary Component\n * \n * Handles errors in the KDS with kitchen-appropriate error displays\n * and recovery options. Critical for operational reliability.\n */\n\n'use client'\n\nimport { useEffect } from 'react'\n\ninterface KdsErrorProps {\n  error: Error & { digest?: string }\n  reset: () => void\n}\n\nexport default function KdsError({ error, reset }: KdsErrorProps) {\n  useEffect(() => {\n    // Log error for debugging\n    console.error('KDS Error:', error)\n    \n    // In production, you might want to send this to an error reporting service\n    if (process.env.NODE_ENV === 'production') {\n      // Send error to monitoring service\n      // Example: Sentry, LogRocket, etc.\n    }\n  }, [error])\n\n  const errorType = getErrorType(error)\n  const errorSeverity = getErrorSeverity(error)\n\n  return (\n    <div className=\"h-full w-full bg-black text-white flex flex-col\">\n      {/* Error header */}\n      <div className={`\n        h-20 flex items-center justify-between px-6\n        ${errorSeverity === 'critical' \n          ? 'bg-red-900 border-b-2 border-red-500' \n          : errorSeverity === 'high'\n          ? 'bg-orange-900 border-b-2 border-orange-500'\n          : 'bg-gray-900 border-b border-gray-700'\n        }\n      `}>\n        <div className=\"flex items-center gap-4\">\n          <ErrorIcon severity={errorSeverity} />\n          <div>\n            <h1 className=\"text-xl font-bold\">Kitchen Display System</h1>\n            <p className=\"text-sm text-gray-300\">Error Detected</p>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-3\">\n          <div className=\"text-right\">\n            <div className=\"text-sm font-medium\">\n              {new Date().toLocaleTimeString()}\n            </div>\n            <div className=\"text-xs text-gray-400\">\n              Status: {errorSeverity.toUpperCase()}\n            </div>\n          </div>\n          <div className={`w-3 h-3 rounded-full ${\n            errorSeverity === 'critical' ? 'bg-red-500 animate-pulse' :\n            errorSeverity === 'high' ? 'bg-orange-500' :\n            'bg-yellow-500'\n          }`} />\n        </div>\n      </div>\n\n      {/* Error content */}\n      <div className=\"flex-1 flex items-center justify-center p-8\">\n        <div className=\"max-w-2xl text-center space-y-8\">\n          {/* Error illustration */}\n          <div className=\"text-6xl mb-6\">\n            {errorSeverity === 'critical' ? 'üö®' : \n             errorSeverity === 'high' ? '‚ö†Ô∏è' : '‚ùå'}\n          </div>\n          \n          {/* Error title */}\n          <div>\n            <h2 className=\"text-3xl font-bold mb-4\">\n              {getErrorTitle(errorType, errorSeverity)}\n            </h2>\n            <p className=\"text-xl text-gray-300 mb-6\">\n              {getErrorMessage(errorType)}\n            </p>\n          </div>\n\n          {/* Error details (for development) */}\n          {process.env.NODE_ENV === 'development' && (\n            <details className=\"text-left bg-gray-900 p-4 rounded border border-gray-700\">\n              <summary className=\"cursor-pointer font-medium mb-2\">\n                Technical Details (Development Mode)\n              </summary>\n              <pre className=\"text-sm text-gray-400 overflow-auto\">\n                {error.message}\n                {error.stack && `\\n\\n${error.stack}`}\n                {error.digest && `\\n\\nDigest: ${error.digest}`}\n              </pre>\n            </details>\n          )}\n\n          {/* Recovery actions */}\n          <div className=\"space-y-4\">\n            <div className=\"flex gap-4 justify-center\">\n              <button\n                onClick={reset}\n                className=\"\n                  kds-button bg-blue-600 hover:bg-blue-500\n                  text-white px-8 py-3 rounded-lg\n                  flex items-center gap-2\n                  focus:outline-none focus:ring-2 focus:ring-blue-500\n                \"\n              >\n                <RefreshIcon />\n                Try Again\n              </button>\n              \n              <button\n                onClick={() => window.location.reload()}\n                className=\"\n                  kds-button bg-gray-700 hover:bg-gray-600\n                  text-white px-8 py-3 rounded-lg\n                  flex items-center gap-2\n                  focus:outline-none focus:ring-2 focus:ring-gray-500\n                \"\n              >\n                <ReloadIcon />\n                Reload Page\n              </button>\n            </div>\n\n            {errorSeverity === 'critical' && (\n              <div className=\"space-y-3\">\n                <div className=\"text-sm text-red-300 font-medium\">\n                  Critical Error - Alternative Actions:\n                </div>\n                <div className=\"flex gap-3 justify-center text-sm\">\n                  <button\n                    onClick={() => window.location.href = '/dashboard'}\n                    className=\"\n                      kds-button bg-red-700 hover:bg-red-600\n                      text-white px-4 py-2 rounded\n                      focus:outline-none focus:ring-2 focus:ring-red-500\n                    \"\n                  >\n                    Return to Dashboard\n                  </button>\n                  <button\n                    onClick={() => window.location.href = '/'}\n                    className=\"\n                      kds-button bg-gray-700 hover:bg-gray-600\n                      text-white px-4 py-2 rounded\n                      focus:outline-none focus:ring-2 focus:ring-gray-500\n                    \"\n                  >\n                    Go to Home\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Troubleshooting tips */}\n          <div className=\"bg-gray-900 p-6 rounded-lg border border-gray-700 text-left\">\n            <h3 className=\"font-bold text-lg mb-3\">Troubleshooting Tips:</h3>\n            <ul className=\"space-y-2 text-gray-300\">\n              {getTroubleshootingTips(errorType).map((tip, index) => (\n                <li key={index} className=\"flex items-start gap-2\">\n                  <span className=\"text-blue-400 mt-1\">‚Ä¢</span>\n                  <span>{tip}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Support information */}\n          <div className=\"text-center text-gray-400 text-sm\">\n            <p>If the problem persists, please contact IT support:</p>\n            <p className=\"font-mono bg-gray-800 px-2 py-1 rounded inline-block mt-1\">\n              support@restaurant.com\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n/**\n * Error type detection\n */\nfunction getErrorType(error: Error): string {\n  const message = error.message.toLowerCase()\n  \n  if (message.includes('network') || message.includes('fetch')) {\n    return 'network'\n  }\n  if (message.includes('websocket') || message.includes('connection')) {\n    return 'connection'\n  }\n  if (message.includes('permission') || message.includes('unauthorized')) {\n    return 'permission'\n  }\n  if (message.includes('parse') || message.includes('json')) {\n    return 'data'\n  }\n  if (message.includes('timeout')) {\n    return 'timeout'\n  }\n  \n  return 'unknown'\n}\n\n/**\n * Error severity detection\n */\nfunction getErrorSeverity(error: Error): 'low' | 'medium' | 'high' | 'critical' {\n  const message = error.message.toLowerCase()\n  \n  if (message.includes('critical') || message.includes('fatal') || \n      message.includes('cannot read') || message.includes('undefined')) {\n    return 'critical'\n  }\n  if (message.includes('network') || message.includes('connection') ||\n      message.includes('timeout')) {\n    return 'high'\n  }\n  if (message.includes('warning') || message.includes('deprecated')) {\n    return 'low'\n  }\n  \n  return 'medium'\n}\n\n/**\n * Error title generator\n */\nfunction getErrorTitle(type: string, severity: 'low' | 'medium' | 'high' | 'critical'): string {\n  if (severity === 'critical') {\n    return 'Critical System Error'\n  }\n  \n  switch (type) {\n    case 'network':\n      return 'Network Connection Error'\n    case 'connection':\n      return 'Server Connection Lost'\n    case 'permission':\n      return 'Access Permission Error'\n    case 'data':\n      return 'Data Processing Error'\n    case 'timeout':\n      return 'Request Timeout Error'\n    default:\n      return 'System Error Occurred'\n  }\n}\n\n/**\n * Error message generator\n */\nfunction getErrorMessage(type: string): string {\n  switch (type) {\n    case 'network':\n      return 'Unable to connect to the server. Please check your network connection and try again.'\n    case 'connection':\n      return 'The connection to the kitchen system has been lost. Attempting to reconnect...'\n    case 'permission':\n      return 'You do not have permission to access this resource. Please contact your manager.'\n    case 'data':\n      return 'There was a problem processing the order data. The system is attempting to recover.'\n    case 'timeout':\n      return 'The request took too long to complete. The server might be busy.'\n    default:\n      return 'An unexpected error has occurred. Our team has been notified and is working to resolve it.'\n  }\n}\n\n/**\n * Troubleshooting tips generator\n */\nfunction getTroubleshootingTips(type: string): string[] {\n  const commonTips = [\n    'Check if other kitchen terminals are working',\n    'Verify the internet connection is stable',\n    'Try refreshing the page (F5 or Ctrl+R)',\n  ]\n  \n  switch (type) {\n    case 'network':\n      return [\n        ...commonTips,\n        'Check network cables and WiFi connection',\n        'Restart the network router if needed',\n        'Contact IT if network issues persist'\n      ]\n    case 'connection':\n      return [\n        ...commonTips,\n        'Wait 30 seconds for automatic reconnection',\n        'Check server status with IT team',\n        'Use backup order management if available'\n      ]\n    case 'permission':\n      return [\n        'Verify you are logged in with correct account',\n        'Contact manager to check user permissions',\n        'Try logging out and back in',\n        'Clear browser cache and cookies'\n      ]\n    case 'data':\n      return [\n        ...commonTips,\n        'Check if orders are displaying correctly',\n        'Verify all order information is complete',\n        'Report data inconsistencies to management'\n      ]\n    default:\n      return commonTips\n  }\n}\n\n/**\n * Error severity icon\n */\nfunction ErrorIcon({ severity }: { severity: string }) {\n  const iconClass = `w-8 h-8 ${\n    severity === 'critical' ? 'text-red-400' :\n    severity === 'high' ? 'text-orange-400' :\n    'text-yellow-400'\n  }`\n\n  return (\n    <svg className={iconClass} fill=\"currentColor\" viewBox=\"0 0 20 20\">\n      <path\n        fillRule=\"evenodd\"\n        d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\n        clipRule=\"evenodd\"\n      />\n    </svg>\n  )\n}\n\n/**\n * Refresh icon\n */\nfunction RefreshIcon() {\n  return (\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n      />\n    </svg>\n  )\n}\n\n/**\n * Reload icon\n */\nfunction ReloadIcon() {\n  return (\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n      />\n    </svg>\n  )\n}"],"names":[],"mappings":"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"}