module.exports=[62070,a=>{"use strict";a.s(["OrderDetailContent",()=>w],62070);var b=a.i(87924),c=a.i(80826),d=a.i(50944),e=a.i(16620),f=a.i(15479),g=a.i(3130),h=a.i(40695),i=a.i(54161),j=a.i(21958),k=a.i(52839),l=a.i(39355),m=a.i(24989),n=a.i(16688),o=a.i(45700),p=a.i(22282),q=a.i(6053),r=a.i(70106);let s=(0,r.default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var t=a.i(90561);let u=(0,r.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),v=(0,r.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);function w({order:a}){let r=(0,d.useRouter)(),[w,x]=(0,c.useState)(a),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),E=async a=>{z(!0);try{let b=await (0,f.updateOrder)(w.id,{status:a});b&&x(b)}catch(a){console.error("Failed to update order:",a)}finally{z(!1)}},F=async()=>{if(confirm("Are you sure you want to cancel this order?")){z(!0);try{let a=await (0,f.cancelOrder)(w.id,"Cancelled by staff");a&&x(a)}catch(a){console.error("Failed to cancel order:",a)}finally{z(!1)}}},G=(a,b)=>{let c=new Date(a).getTime(),d=Math.floor(((b?new Date(b).getTime():Date.now())-c)/6e4);if(d<60)return`${d}m`;let e=Math.floor(d/60);return`${e}h ${d%60}m`},H=[{id:"overview",label:"Overview"},{id:"items",label:"Items"},{id:"timeline",label:"Timeline"},{id:"payment",label:"Payment"}];return w.type===OrderType.DELIVERY&&H.push({id:"delivery",label:"Delivery"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(g.Card,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i.Badge,{variant:(a=>{switch(a){case e.OrderStatus.PENDING:return"yellow";case e.OrderStatus.CONFIRMED:return"blue";case e.OrderStatus.PREPARING:return"orange";case e.OrderStatus.READY:return"green";case e.OrderStatus.COMPLETED:return"gray";case e.OrderStatus.DELIVERED:return"green";case e.OrderStatus.CANCELLED:return"red";case e.OrderStatus.REFUNDED:return"purple";default:return"gray"}})(w.status),className:"text-lg px-3 py-1",children:w.status.replace("_"," ")}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(k.default,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["Created ",G(w.createdAt)," ago"]})]}),w.estimatedReadyTime&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(v,{className:"h-4 w-4 text-orange-500"}),(0,b.jsxs)("span",{children:["Est. ready in ",G(new Date().toISOString(),w.estimatedReadyTime)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[w.status===e.OrderStatus.PENDING&&(0,b.jsx)(h.Button,{size:"sm",onClick:()=>E(e.OrderStatus.CONFIRMED),disabled:y,children:"Confirm Order"}),w.status===e.OrderStatus.CONFIRMED&&(0,b.jsx)(h.Button,{size:"sm",onClick:()=>E(e.OrderStatus.PREPARING),disabled:y,children:"Start Preparing"}),w.status===e.OrderStatus.PREPARING&&(0,b.jsx)(h.Button,{size:"sm",onClick:()=>E(e.OrderStatus.READY),disabled:y,children:"Mark Ready"}),w.status===e.OrderStatus.READY&&(0,b.jsx)(h.Button,{size:"sm",onClick:()=>E(w.type===OrderType.DELIVERY?e.OrderStatus.DELIVERED:e.OrderStatus.COMPLETED),disabled:y,children:w.type===OrderType.DELIVERY?"Mark Delivered":"Complete Order"}),![e.OrderStatus.CANCELLED,e.OrderStatus.REFUNDED,e.OrderStatus.COMPLETED,e.OrderStatus.DELIVERED].includes(w.status)&&(0,b.jsx)(h.Button,{size:"sm",variant:"destructive",onClick:F,disabled:y,children:"Cancel"}),[e.OrderStatus.COMPLETED,e.OrderStatus.DELIVERED].includes(w.status)&&(0,b.jsx)(h.Button,{size:"sm",variant:"outline",onClick:()=>B(!0),children:"Process Refund"})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,b.jsxs)(j.Tabs,{defaultValue:"overview",tabs:H,children:[(0,b.jsxs)("div",{value:"overview",className:"space-y-6",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Customer Information"})}),(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.default,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:w.customerName||"Guest Customer"})]}),w.customerPhone&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(n.default,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:w.customerPhone})]}),w.customerEmail&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(o.default,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:w.customerEmail})]}),w.tableNumber&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(m.default,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("span",{children:["Table ",w.tableNumber]})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Order Summary"})}),(0,b.jsxs)("div",{className:"p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["$",w.subtotal.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Tax"}),(0,b.jsxs)("span",{children:["$",w.tax.toFixed(2)]})]}),w.tip>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Tip"}),(0,b.jsxs)("span",{children:["$",w.tip.toFixed(2)]})]}),w.discount>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm text-red-600",children:[(0,b.jsx)("span",{children:"Discount"}),(0,b.jsxs)("span",{children:["-$",w.discount.toFixed(2)]})]}),(0,b.jsx)("div",{className:"pt-2 border-t",children:(0,b.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["$",w.total.toFixed(2)]})]})})]})]})]}),(0,b.jsx)("div",{value:"items",className:"space-y-4",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Order Items"})}),(0,b.jsx)("div",{className:"divide-y",children:w.items.map(a=>(0,b.jsx)("div",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"font-medium",children:[a.quantity,"x"]}),(0,b.jsx)("span",{children:a.menuItemName})]}),a.modifiers.length>0&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground pl-8",children:a.modifiers.map(a=>(0,b.jsxs)("div",{children:["• ",a.name]},a.id))}),a.specialInstructions&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground pl-8 italic",children:["Note: ",a.specialInstructions]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground pl-8",children:[(0,b.jsxs)("span",{children:["Station: ",a.station]}),(0,b.jsxs)("span",{children:["Prep time: ",a.prepTime,"m"]}),(0,b.jsx)(i.Badge,{variant:"served"===a.status?"default":"ready"===a.status?"success":"preparing"===a.status?"warning":"secondary",className:"text-xs",children:a.status})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"font-medium",children:["$",a.totalPrice.toFixed(2)]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["$",a.unitPrice.toFixed(2)," each"]})]})]})},a.id))})]})}),(0,b.jsx)("div",{value:"timeline",className:"space-y-4",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Order Timeline"})}),(0,b.jsx)("div",{className:"p-4",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-border"}),w.timeline.map((a,c)=>(0,b.jsxs)("div",{className:"relative flex gap-4 pb-8 last:pb-0",children:[(0,b.jsx)("div",{className:"absolute left-4 -translate-x-1/2 w-2 h-2 bg-primary rounded-full"}),(0,b.jsxs)("div",{className:"ml-8 flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.event}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(a.timestamp).toLocaleString()})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description}),a.user&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["by ",a.user]})]})]},a.id))]})})]})}),(0,b.jsx)("div",{value:"payment",className:"space-y-4",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Payment Information"})}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Status"}),(0,b.jsx)(i.Badge,{variant:(a=>{switch(a){case e.PaymentStatus.PENDING:return"yellow";case e.PaymentStatus.PROCESSING:return"blue";case e.PaymentStatus.COMPLETED:return"green";case e.PaymentStatus.FAILED:return"red";case e.PaymentStatus.REFUNDED:return"purple";case e.PaymentStatus.PARTIALLY_REFUNDED:return"orange";default:return"gray"}})(w.paymentStatus),children:w.paymentStatus.replace("_"," ")})]}),w.paymentMethod&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Method"}),(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.default,{className:"h-4 w-4"}),w.paymentMethod.replace("_"," ")]})]}),w.paymentDetails&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Transaction ID"}),(0,b.jsx)("span",{className:"font-mono text-sm",children:w.paymentDetails.transactionId})]}),w.paymentDetails.lastFourDigits&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Card"}),(0,b.jsxs)("span",{children:[w.paymentDetails.cardBrand," •••• ",w.paymentDetails.lastFourDigits]})]}),w.paymentDetails.authorizationCode&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Auth Code"}),(0,b.jsx)("span",{className:"font-mono text-sm",children:w.paymentDetails.authorizationCode})]})]})]})]})}),w.type===OrderType.DELIVERY&&w.deliveryInfo&&(0,b.jsx)("div",{value:"delivery",className:"space-y-4",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Delivery Information"})}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Delivery Address"}),(0,b.jsx)("p",{children:w.deliveryInfo.address}),(0,b.jsxs)("p",{children:[w.deliveryInfo.city,", ",w.deliveryInfo.state," ",w.deliveryInfo.zipCode]})]}),w.deliveryInfo.instructions&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Instructions"}),(0,b.jsx)("p",{children:w.deliveryInfo.instructions})]}),w.deliveryInfo.driverName&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Driver"}),(0,b.jsx)("p",{children:w.deliveryInfo.driverName})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Estimated Delivery"}),(0,b.jsx)("p",{children:w.deliveryInfo.estimatedDeliveryTime?new Date(w.deliveryInfo.estimatedDeliveryTime).toLocaleString():"Not set"})]}),w.deliveryInfo.actualDeliveryTime&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Actual Delivery"}),(0,b.jsx)("p",{children:new Date(w.deliveryInfo.actualDeliveryTime).toLocaleString()})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,b.jsx)("span",{children:"Delivery Fee"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",w.deliveryInfo.deliveryFee.toFixed(2)]})]})]})]})})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Quick Actions"})}),(0,b.jsxs)("div",{className:"p-4 space-y-2",children:[(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>window.print(),children:[(0,b.jsx)(s,{className:"h-4 w-4 mr-2"}),"Print Order"]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>r.push(`/orders/${w.id}/edit`),children:[(0,b.jsx)(q.default,{className:"h-4 w-4 mr-2"}),"Edit Order"]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>D(!C),children:[(0,b.jsx)(u,{className:"h-4 w-4 mr-2"}),"Add Note"]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>r.refresh(),children:[(0,b.jsx)(t.default,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Order Information"})}),(0,b.jsxs)("div",{className:"p-4 space-y-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Order ID"}),(0,b.jsx)("span",{className:"font-mono",children:w.id})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Order Number"}),(0,b.jsx)("span",{className:"font-medium",children:w.orderNumber})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Type"}),(0,b.jsx)(i.Badge,{variant:"outline",children:w.type.replace("_"," ")})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Source"}),(0,b.jsx)("span",{children:w.source})]}),w.thirdPartyProvider&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Provider"}),(0,b.jsx)("span",{children:w.thirdPartyProvider})]}),w.posOrderId&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"POS ID"}),(0,b.jsx)("span",{className:"font-mono text-xs",children:w.posOrderId})]})]})]}),w.assignedStaff&&w.assignedStaff.length>0&&(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Assigned Staff"})}),(0,b.jsx)("div",{className:"p-4 space-y-2",children:w.assignedStaff.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.default,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:a.name})]}),(0,b.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:a.role})]},a.id))})]}),w.notes&&(0,b.jsxs)(g.Card,{children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Notes"})}),(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)("p",{className:"text-sm",children:w.notes})})]})]})]})]})}}];

//# sourceMappingURL=app_orders_%5Bid%5D_order-detail-content_tsx_b715afb4._.js.map