module.exports=[29487,a=>{"use strict";a.s(["DashboardContent",()=>a6],29487);var b=a.i(87924),c=a.i(80826),d=a.i(5050),e=(0,d.createServerReference)("00f7231f9c37fb4c63ead199dd1ab052387ae6f856",d.callServer,void 0,d.findSourceMapURL,"revalidateLiveData"),f=(0,d.createServerReference)("40d8417e0b1fc0fb1626c8e8fb8f687638b2e261ac",d.callServer,void 0,d.findSourceMapURL,"getDashboardData"),g=a.i(3130),h=a.i(54161),i=a.i(50463),j=a.i(56711),k=a.i(42724);function l(a){return(0,k.constructFrom)(a,Date.now())}var m=a.i(85579);function n(a,b){return(0,m.isSameDay)((0,k.constructFrom)(b?.in||a,a),l(b?.in||a))}var o=a.i(77421);function p(a,b,c){return(0,o.addDays)(a,-b,c)}function q(a,b){return(0,m.isSameDay)((0,k.constructFrom)(b?.in||a,a),p(l(b?.in||a),1))}var r=a.i(44513),s=a.i(52587),t=a.i(23464),u=a.i(57270),v=a.i(74016);function w(a,b){let c=(0,v.toDate)(a)-(0,v.toDate)(b);return c<0?-1:c>0?1:c}var x=a.i(59296),y=a.i(38124);function z(a,b){let c=(0,v.toDate)(a,b?.in);return c.setHours(23,59,59,999),c}var A=a.i(22658);function B(a,b="USD",c="en-US"){return new Intl.NumberFormat(c,{style:"currency",currency:b,minimumFractionDigits:0,maximumFractionDigits:2}).format(a)}function C(a,b=1){return`${a.toFixed(b)}%`}function D(a){return a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toString()}function E(a){var b;return n(a)?`Today at ${(0,j.format)(a,"h:mm a")}`:q(a)?`Yesterday at ${(0,j.format)(a,"h:mm a")}`:(b={addSuffix:!0},function(a,b,c){let d,e=(0,s.getDefaultOptions)(),f=c?.locale??e.locale??r.defaultLocale,g=w(a,b);if(isNaN(g))throw RangeError("Invalid time value");let h=Object.assign({},c,{addSuffix:c?.addSuffix,comparison:g}),[i,j]=(0,u.normalizeDates)(c?.in,...g>0?[b,a]:[a,b]),k=function(a,b,c){var d;return(d=void 0,a=>{let b=(d?Math[d]:Math.trunc)(a);return 0===b?0:b})(((0,v.toDate)(a)-(0,v.toDate)(b))/1e3)}(j,i),l=Math.round((k-((0,t.getTimezoneOffsetInMilliseconds)(j)-(0,t.getTimezoneOffsetInMilliseconds)(i))/1e3)/60);if(l<2)if(c?.includeSeconds)if(k<5)return f.formatDistance("lessThanXSeconds",5,h);else if(k<10)return f.formatDistance("lessThanXSeconds",10,h);else if(k<20)return f.formatDistance("lessThanXSeconds",20,h);else if(k<40)return f.formatDistance("halfAMinute",0,h);else if(k<60)return f.formatDistance("lessThanXMinutes",1,h);else return f.formatDistance("xMinutes",1,h);else if(0===l)return f.formatDistance("lessThanXMinutes",1,h);else return f.formatDistance("xMinutes",l,h);if(l<45)return f.formatDistance("xMinutes",l,h);if(l<90)return f.formatDistance("aboutXHours",1,h);if(l<x.minutesInDay){let a=Math.round(l/60);return f.formatDistance("aboutXHours",a,h)}if(l<2520)return f.formatDistance("xDays",1,h);else if(l<x.minutesInMonth){let a=Math.round(l/x.minutesInDay);return f.formatDistance("xDays",a,h)}else if(l<2*x.minutesInMonth)return d=Math.round(l/x.minutesInMonth),f.formatDistance("aboutXMonths",d,h);if((d=function(a,b,c){let[d,e,f]=(0,u.normalizeDates)(void 0,a,a,b),g=w(e,f),h=Math.abs((0,y.differenceInCalendarMonths)(e,f));if(h<1)return 0;1===e.getMonth()&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-g*h);let i=w(e,f)===-g;(function(a,b){let c=(0,v.toDate)(a,void 0);return+z(c,void 0)==+(0,A.endOfMonth)(c,b)})(d)&&1===h&&1===w(d,f)&&(i=!1);let j=g*(h-i);return 0===j?0:j}(j,i))<12){let a=Math.round(l/x.minutesInMonth);return f.formatDistance("xMonths",a,h)}{let a=d%12,b=Math.trunc(d/12);return a<3?f.formatDistance("aboutXYears",b,h):a<9?f.formatDistance("overXYears",b,h):f.formatDistance("almostXYears",b+1,h)}}(a,l(a),b))}function F(a){return({pending:"bg-yellow-100 text-yellow-800",preparing:"bg-blue-100 text-blue-800",ready:"bg-green-100 text-green-800",served:"bg-gray-100 text-gray-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-red-100 text-red-800",confirmed:"bg-blue-100 text-blue-800",seated:"bg-green-100 text-green-800",no_show:"bg-red-100 text-red-800",excellent:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",average:"bg-yellow-100 text-yellow-800",poor:"bg-red-100 text-red-800"})[a.toLowerCase()]||"bg-gray-100 text-gray-800"}a.i(98621),a.i(74614);let G={primary:"#3b82f6",secondary:"#10b981",tertiary:"#f59e0b"};var H=a.i(37565),I=a.i(35277),J=a.i(54327),K=a.i(70106);let L=(0,K.default)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);var M=a.i(52839),N=a.i(57851);function O({title:a,value:c,change:d,icon:e,target:f,isLoading:j}){if(j)return(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-4"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)(i.Skeleton,{className:"h-6 w-16 mb-2"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-20"})]})]});let k=function(a){switch(a){case"increase":return"text-emerald-600";case"decrease":return"text-red-600";default:return"text-gray-600"}}(d.type),l=function(a){switch(a){case"increase":return"↗";case"decrease":return"↘";default:return"→"}}(d.type),m=!f||"decrease"===d.type;return(0,b.jsxs)(g.Card,{className:"relative overflow-hidden",children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-gray-600",children:a}),(0,b.jsx)("div",{className:"text-gray-400",children:e})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:c}),(0,b.jsxs)("div",{className:`flex items-center text-sm ${k}`,children:[(0,b.jsx)("span",{className:"mr-1",children:l}),(0,b.jsxs)("span",{children:[C(d.value)," vs last period"]})]})]}),f&&(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Target"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:"number"==typeof f&&f<100?C(f):B(f)}),(0,b.jsx)(h.Badge,{variant:m?"success":"warning",className:"text-xs",children:m?"On Track":"Off Track"})]})]})})]})}function P({data:a,isLoading:c}){if(c||!a)return(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)(O,{title:"",value:"",change:{value:0,type:"neutral"},icon:(0,b.jsx)(i.Skeleton,{className:"h-4 w-4"}),isLoading:!0},c))});let d=[{title:"Total Revenue",value:B(a.totalRevenue.current),change:{value:a.totalRevenue.change,type:a.totalRevenue.changeType},icon:(0,b.jsx)(I.default,{className:"h-4 w-4"})},{title:"Guest Count",value:a.guestCount.current.toLocaleString(),change:{value:a.guestCount.change,type:a.guestCount.changeType},icon:(0,b.jsx)(H.default,{className:"h-4 w-4"})},{title:"Avg Order Value",value:B(a.averageOrderValue.current),change:{value:a.averageOrderValue.change,type:a.averageOrderValue.changeType},icon:(0,b.jsx)(J.default,{className:"h-4 w-4"})},{title:"Prime Cost",value:C(a.primeCost.current),change:{value:a.primeCost.change,type:a.primeCost.changeType},icon:(0,b.jsx)(N.default,{className:"h-4 w-4"}),target:a.primeCost.target},{title:"Labor Cost",value:C(a.laborCost.current),change:{value:a.laborCost.change,type:a.laborCost.changeType},icon:(0,b.jsx)(M.default,{className:"h-4 w-4"}),target:a.laborCost.target},{title:"Food Cost",value:C(a.foodCost.current),change:{value:a.foodCost.change,type:a.foodCost.changeType},icon:(0,b.jsx)(L,{className:"h-4 w-4"}),target:a.foodCost.target}];return(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:d.map((a,c)=>(0,b.jsx)(O,{title:a.title,value:a.value,change:a.change,icon:a.icon,target:a.target},c))})}var Q=a.i(57431),R=a.i(77924),S=a.i(58042),T=a.i(94222),U=a.i(54419),V=a.i(59854),W=a.i(48662),X=a.i(18155),Y=a.i(23665),Z=a.i(554),$=a.i(31760),_=["axis"],aa=(0,c.forwardRef)((a,b)=>c.createElement($.CartesianChart,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_,tooltipPayloadSearcher:Z.arrayTooltipSearcher,categoricalChartProps:a,ref:b})),ab=a.i(85811),ac=a.i(39622),ad=a.i(40695);function ae(a,b){let c,d,e=()=>(0,k.constructFrom)(b?.in,NaN),f=b?.additionalDigits??2,g=function(a){let b,c={},d=a.split(af.dateTimeDelimiter);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],af.timeZoneDelimiter.test(c.date)&&(c.date=a.split(af.timeZoneDelimiter)[0],b=a.substr(c.date.length,a.length))),b){let a=af.timezone.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(g.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(g.date,f);c=function(a,b){var c,d,e,f,g,h,i;if(null===b)return new Date(NaN);let j=a.match(ag);if(!j)return new Date(NaN);let k=!!j[4],l=aj(j[1]),m=aj(j[2])-1,n=aj(j[3]),o=aj(j[4]),p=aj(j[5])-1;if(k){return(c=o,d=p,c>=1&&c<=53&&d>=0&&d<=6)?function(a,b,c){let d=new Date(0);d.setUTCFullYear(a,0,4);let e=d.getUTCDay()||7;return d.setUTCDate(d.getUTCDate()+((b-1)*7+c+1-e)),d}(b,o,p):new Date(NaN)}{let a=new Date(0);return(e=b,f=m,g=n,f>=0&&f<=11&&g>=1&&g<=(al[f]||(am(e)?29:28))&&(h=b,(i=l)>=1&&i<=(am(h)?366:365)))?(a.setUTCFullYear(b,m,Math.max(l,n)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!c||isNaN(+c))return e();let h=+c,i=0;if(g.time&&isNaN(i=function(a){var b,c,d;let e=a.match(ah);if(!e)return NaN;let f=ak(e[1]),g=ak(e[2]),h=ak(e[3]);return(b=f,c=g,d=h,24===b?0===c&&0===d:d>=0&&d<60&&c>=0&&c<60&&b>=0&&b<25)?f*x.millisecondsInHour+g*x.millisecondsInMinute+1e3*h:NaN}(g.time)))return e();if(g.timezone){if(isNaN(d=function(a){var b;if("Z"===a)return 0;let c=a.match(ai);if(!c)return 0;let d="+"===c[1]?-1:1,e=parseInt(c[2]),f=c[3]&&parseInt(c[3])||0;return(b=f)>=0&&b<=59?d*(e*x.millisecondsInHour+f*x.millisecondsInMinute):NaN}(g.timezone)))return e()}else{let a=new Date(h+i),c=(0,v.toDate)(0,b?.in);return c.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),c.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),c}return(0,v.toDate)(h+i+d,b?.in)}let af={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ag=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ah=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ai=/^([+-])(\d{2})(?::?(\d{2}))?$/;function aj(a){return a?parseInt(a):1}function ak(a){return a&&parseFloat(a.replace(",","."))||0}let al=[31,null,31,30,31,30,31,31,30,31,30,31];function am(a){return a%400==0||a%4==0&&a%100!=0}var an=a.i(69404),ao=a.i(63467);let ap=(0,K.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function aq({active:a,payload:c,label:d}){if(a&&c&&c.length){let a=ae(d||"");return(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-2",children:(0,j.format)(a,"MMM d, yyyy")}),c.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:a.name})]}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"revenue"===a.dataKey||"averageOrderValue"===a.dataKey?B(a.value):D(a.value)})]},c))]})}return null}function ar(){return(0,b.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"space-y-4 w-full",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-4 w-5/6"})]})})}function as({data:a,isLoading:d,className:e}){let[f,h]=(0,c.useState)("line"),[k,l]=(0,c.useState)("30d");if(d||!a)return(0,b.jsxs)(g.Card,{className:e,children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(an.default,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)(g.CardTitle,{children:"Sales Trend"})]}),(0,b.jsx)(i.Skeleton,{className:"h-8 w-32"})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(ar,{})})]});let m=a.slice(-("7d"===k?7:"30d"===k?30:90)),n=m.reduce((a,b)=>a+b.revenue,0),o=m.reduce((a,b)=>a+b.orders,0),p=m.reduce((a,b)=>a+b.guests,0);return(0,b.jsxs)(g.Card,{className:e,children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(an.default,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)(g.CardTitle,{children:"Sales Trend"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,b.jsx)("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[{value:"7d",label:"7D"},{value:"30d",label:"30D"},{value:"90d",label:"90D"}].map(a=>(0,b.jsx)(ad.Button,{variant:k===a.value?"default":"ghost",size:"sm",onClick:()=>l(a.value),className:"text-xs",children:a.label},a.value))}),(0,b.jsx)("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[{value:"line",icon:ap,label:"Line"},{value:"bar",icon:ao.default,label:"Bar"},{value:"area",icon:an.default,label:"Area"},{value:"composed",icon:ap,label:"Mixed"}].map(a=>(0,b.jsxs)(ad.Button,{variant:f===a.value?"default":"ghost",size:"sm",onClick:()=>h(a.value),className:"text-xs",children:[(0,b.jsx)(a.icon,{className:"h-3 w-3 mr-1"}),a.label]},a.value))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:B(n)}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Total Revenue"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:D(o)}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Orders"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:D(p)}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Guests"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:B(n/o)}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Avg Order"})]})]})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"h-80",children:(0,b.jsx)(W.ResponsiveContainer,{width:"100%",height:"100%",children:(()=>{let a={data:m,margin:{top:5,right:30,left:20,bottom:5}};switch(f){case"bar":return(0,b.jsxs)(X.BarChart,{...a,children:[(0,b.jsx)(U.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,b.jsx)(S.XAxis,{dataKey:"date",tickFormatter:a=>(0,j.format)(ae(a),"MMM d"),className:"text-sm"}),(0,b.jsx)(T.YAxis,{yAxisId:"revenue",tickFormatter:B,className:"text-sm"}),(0,b.jsx)(T.YAxis,{yAxisId:"orders",orientation:"right",tickFormatter:D,className:"text-sm"}),(0,b.jsx)(V.Tooltip,{content:(0,b.jsx)(aq,{})}),(0,b.jsx)(Y.Bar,{yAxisId:"revenue",dataKey:"revenue",fill:G.primary,name:"Revenue",radius:[2,2,0,0]}),(0,b.jsx)(Y.Bar,{yAxisId:"orders",dataKey:"orders",fill:G.secondary,name:"Orders",radius:[2,2,0,0]})]});case"area":return(0,b.jsxs)(ac.AreaChart,{...a,children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:G.primary,stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:G.primary,stopOpacity:0})]})}),(0,b.jsx)(U.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,b.jsx)(S.XAxis,{dataKey:"date",tickFormatter:a=>(0,j.format)(ae(a),"MMM d"),className:"text-sm"}),(0,b.jsx)(T.YAxis,{tickFormatter:B,className:"text-sm"}),(0,b.jsx)(V.Tooltip,{content:(0,b.jsx)(aq,{})}),(0,b.jsx)(ab.Area,{type:"monotone",dataKey:"revenue",stroke:G.primary,fillOpacity:1,fill:"url(#revenueGradient)",name:"Revenue",strokeWidth:2})]});case"composed":return(0,b.jsxs)(aa,{...a,children:[(0,b.jsx)(U.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,b.jsx)(S.XAxis,{dataKey:"date",tickFormatter:a=>(0,j.format)(ae(a),"MMM d"),className:"text-sm"}),(0,b.jsx)(T.YAxis,{yAxisId:"revenue",tickFormatter:B,className:"text-sm"}),(0,b.jsx)(T.YAxis,{yAxisId:"orders",orientation:"right",tickFormatter:D,className:"text-sm"}),(0,b.jsx)(V.Tooltip,{content:(0,b.jsx)(aq,{})}),(0,b.jsx)(Y.Bar,{yAxisId:"revenue",dataKey:"revenue",fill:G.primary,fillOpacity:.6,name:"Revenue",radius:[2,2,0,0]}),(0,b.jsx)(R.Line,{yAxisId:"orders",type:"monotone",dataKey:"orders",stroke:G.secondary,strokeWidth:3,dot:{fill:G.secondary,strokeWidth:2},name:"Orders"})]});default:return(0,b.jsxs)(Q.LineChart,{...a,children:[(0,b.jsx)(U.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-gray-200"}),(0,b.jsx)(S.XAxis,{dataKey:"date",tickFormatter:a=>(0,j.format)(ae(a),"MMM d"),className:"text-sm"}),(0,b.jsx)(T.YAxis,{yAxisId:"revenue",tickFormatter:B,className:"text-sm"}),(0,b.jsx)(T.YAxis,{yAxisId:"orders",orientation:"right",tickFormatter:D,className:"text-sm"}),(0,b.jsx)(V.Tooltip,{content:(0,b.jsx)(aq,{})}),(0,b.jsx)(R.Line,{yAxisId:"revenue",type:"monotone",dataKey:"revenue",stroke:G.primary,strokeWidth:3,dot:{fill:G.primary,strokeWidth:2},name:"Revenue"}),(0,b.jsx)(R.Line,{yAxisId:"orders",type:"monotone",dataKey:"orders",stroke:G.secondary,strokeWidth:3,dot:{fill:G.secondary,strokeWidth:2},name:"Orders"}),(0,b.jsx)(R.Line,{yAxisId:"orders",type:"monotone",dataKey:"guests",stroke:G.tertiary,strokeWidth:2,dot:{fill:G.tertiary,strokeWidth:2},name:"Guests"})]})}})()})})})]})}var at=a.i(29091);let au=c.forwardRef(({className:a,children:c,...d},e)=>(0,b.jsx)("div",{ref:e,className:(0,at.cn)("relative overflow-hidden",a),...d,children:(0,b.jsx)("div",{className:"h-full w-full overflow-auto",children:c})}));au.displayName="ScrollArea";var av=a.i(16688),aw=a.i(24989);let ax=(0,K.default)("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);var ay=a.i(99071),az=a.i(90561),aA=a.i(67937),aB=a.i(39355);function aC({order:a,isLoading:c}){if(c)return(0,b.jsx)(g.Card,{className:"mb-3",children:(0,b.jsx)(g.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(i.Skeleton,{className:"h-6 w-16"})]}),(0,b.jsx)(i.Skeleton,{className:"h-3 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-3 w-3/4"})]})})});let d=F(a.status),e=a.estimatedTime<=5&&"preparing"===a.status;return(0,b.jsx)(g.Card,{className:`mb-3 transition-all hover:shadow-md ${e?"ring-2 ring-red-200":""}`,children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ax,{className:"h-4 w-4 text-gray-500"}),(0,b.jsx)("span",{className:"font-semibold text-sm",children:a.orderNumber})]}),a.table&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,b.jsx)(aw.default,{className:"h-3 w-3"}),a.table]})]}),(0,b.jsx)(h.Badge,{className:d,children:a.status.replace("_"," ")})]}),a.customerName&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(aB.default,{className:"h-3 w-3 text-gray-400"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:a.customerName})]}),(0,b.jsxs)("div",{className:"space-y-1 mb-3",children:[a.items.slice(0,2).map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-gray-600",children:[a.quantity,"x ",a.name]}),(0,b.jsx)("span",{className:"font-medium",children:B(a.price*a.quantity)})]},c)),a.items.length>2&&(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["+",a.items.length-2," more items"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,b.jsx)(M.default,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:E(a.timeOrdered)})]}),(0,b.jsxs)("div",{className:"font-semibold",children:["Total: ",B(a.total)]})]}),e&&(0,b.jsxs)("div",{className:"mt-2 p-2 bg-red-50 rounded-md flex items-center gap-2 text-red-700",children:[(0,b.jsx)(ay.default,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"text-xs font-medium",children:["Urgent - Est. ",a.estimatedTime,"min"]})]})]})})}function aD({reservation:a,isLoading:c}){if(c)return(0,b.jsx)(g.Card,{className:"mb-3",children:(0,b.jsx)(g.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(i.Skeleton,{className:"h-6 w-16"})]}),(0,b.jsx)(i.Skeleton,{className:"h-3 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-3 w-1/2"})]})})});let d=F(a.status),e=new Date(a.reservationTime)>new Date&&new Date(a.reservationTime).getTime()-new Date().getTime()<36e5;return(0,b.jsx)(g.Card,{className:`mb-3 transition-all hover:shadow-md ${e?"ring-2 ring-blue-200":""}`,children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(H.default,{className:"h-4 w-4 text-gray-500"}),(0,b.jsx)("span",{className:"font-semibold text-sm",children:a.customerName})]}),(0,b.jsx)(h.Badge,{className:d,children:a.status.replace("_"," ")})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(aA.default,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:E(a.reservationTime)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(H.default,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[a.partySize," guests"]})]}),a.table&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(aw.default,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.table})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(av.default,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.phoneNumber})]})]}),a.specialRequests&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 bg-gray-50 p-2 rounded",children:[(0,b.jsx)("strong",{children:"Note:"})," ",a.specialRequests]}),e&&(0,b.jsxs)("div",{className:"mt-2 p-2 bg-blue-50 rounded-md flex items-center gap-2 text-blue-700",children:[(0,b.jsx)(ay.default,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-xs font-medium",children:"Arriving soon"})]})]})})}function aE({title:a}){return(0,b.jsxs)(g.Card,{className:"h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-4"}),a]}),(0,b.jsx)(i.Skeleton,{className:"h-8 w-8"})]})}),(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsx)(au,{className:"h-96 px-4",children:Array.from({length:3}).map((a,c)=>(0,b.jsx)(g.Card,{className:"mb-3",children:(0,b.jsx)(g.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(i.Skeleton,{className:"h-6 w-16"})]}),(0,b.jsx)(i.Skeleton,{className:"h-3 w-full"}),(0,b.jsx)(i.Skeleton,{className:"h-3 w-3/4"})]})})},c))})})]})}function aF({orders:a,isLoading:d,onRefresh:e}){let[f,i]=(0,c.useState)(!1),j=async()=>{i(!0),e?.(),setTimeout(()=>i(!1),1e3)};return d?(0,b.jsx)(aE,{title:"Live Orders"}):(0,b.jsxs)(g.Card,{className:"h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(J.default,{className:"h-4 w-4 text-blue-600"}),"Live Orders",a&&a.length>0&&(0,b.jsx)(h.Badge,{variant:"secondary",className:"ml-2",children:a.length})]}),(0,b.jsx)(ad.Button,{variant:"ghost",size:"sm",onClick:j,disabled:f,className:"h-8 w-8 p-0",children:(0,b.jsx)(az.default,{className:`h-4 w-4 ${f?"animate-spin":""}`})})]})}),(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsx)(au,{className:"h-96 px-4",children:a&&a.length>0?a.map(a=>(0,b.jsx)(aC,{order:a},a.id)):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(J.default,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),(0,b.jsx)("p",{className:"text-sm",children:"No active orders"})]})})})]})}function aG({reservations:a,isLoading:d,onRefresh:e}){let[f,i]=(0,c.useState)(!1),j=async()=>{i(!0),e?.(),setTimeout(()=>i(!1),1e3)};return d?(0,b.jsx)(aE,{title:"Reservations"}):(0,b.jsxs)(g.Card,{className:"h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(aA.default,{className:"h-4 w-4 text-green-600"}),"Reservations",a&&a.length>0&&(0,b.jsx)(h.Badge,{variant:"secondary",className:"ml-2",children:a.length})]}),(0,b.jsx)(ad.Button,{variant:"ghost",size:"sm",onClick:j,disabled:f,className:"h-8 w-8 p-0",children:(0,b.jsx)(az.default,{className:`h-4 w-4 ${f?"animate-spin":""}`})})]})}),(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsx)(au,{className:"h-96 px-4",children:a&&a.length>0?a.map(a=>(0,b.jsx)(aD,{reservation:a},a.id)):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(aA.default,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),(0,b.jsx)("p",{className:"text-sm",children:"No upcoming reservations"})]})})})]})}function aH({orders:a,reservations:c,isLoading:d,onRefresh:e}){return(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsx)(aF,{orders:a,isLoading:d,onRefresh:e}),(0,b.jsx)(aG,{reservations:c,isLoading:d,onRefresh:e})]})}var aI=a.i(50944),aJ=a.i(69047),aK=a.i(67638),aL=a.i(9635),aM=a.i(65052),aN=a.i(55258),aO=a.i(75632);function aP(a,b,c){return(0,aO.addWeeks)(a,-b,c)}var aQ=a.i(86451);function aR(a,b,c){return(0,aQ.addMonths)(a,-b,c)}function aS(){let a=new Date;return[{key:"today",label:"Today",dateRange:{from:(0,aK.startOfDay)(a),to:z(a)},description:(0,j.format)(a,"MMM d, yyyy")},{key:"yesterday",label:"Yesterday",dateRange:{from:(0,aK.startOfDay)(p(a,1)),to:z(p(a,1))},description:(0,j.format)(p(a,1),"MMM d, yyyy")},{key:"last7Days",label:"Last 7 Days",dateRange:{from:(0,aK.startOfDay)(p(a,6)),to:z(a)},description:`${(0,j.format)(p(a,6),"MMM d")} - ${(0,j.format)(a,"MMM d")}`},{key:"thisWeek",label:"This Week",dateRange:{from:(0,aL.startOfWeek)(a,{weekStartsOn:1}),to:(0,aM.endOfWeek)(a,{weekStartsOn:1})},description:`${(0,j.format)((0,aL.startOfWeek)(a,{weekStartsOn:1}),"MMM d")} - ${(0,j.format)((0,aM.endOfWeek)(a,{weekStartsOn:1}),"MMM d")}`},{key:"lastWeek",label:"Last Week",dateRange:{from:(0,aL.startOfWeek)(aP(a,1),{weekStartsOn:1}),to:(0,aM.endOfWeek)(aP(a,1),{weekStartsOn:1})},description:`${(0,j.format)((0,aL.startOfWeek)(aP(a,1),{weekStartsOn:1}),"MMM d")} - ${(0,j.format)((0,aM.endOfWeek)(aP(a,1),{weekStartsOn:1}),"MMM d")}`},{key:"last30Days",label:"Last 30 Days",dateRange:{from:(0,aK.startOfDay)(p(a,29)),to:z(a)},description:`${(0,j.format)(p(a,29),"MMM d")} - ${(0,j.format)(a,"MMM d")}`},{key:"thisMonth",label:"This Month",dateRange:{from:(0,aN.startOfMonth)(a),to:(0,A.endOfMonth)(a)},description:(0,j.format)(a,"MMMM yyyy")},{key:"lastMonth",label:"Last Month",dateRange:{from:(0,aN.startOfMonth)(aR(a,1)),to:(0,A.endOfMonth)(aR(a,1))},description:(0,j.format)(aR(a,1),"MMMM yyyy")},{key:"last90Days",label:"Last 90 Days",dateRange:{from:(0,aK.startOfDay)(p(a,89)),to:z(a)},description:`${(0,j.format)(p(a,89),"MMM d")} - ${(0,j.format)(a,"MMM d")}`}]}function aT({value:a,onChange:d,onRefresh:e,isLoading:f,className:i}){var k;let l=(0,aI.useRouter)(),m=(0,aI.useSearchParams)(),[o,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=m.get("from"),c=m.get("to");if(b&&c&&!a){let a=new Date(b),e=new Date(c);isNaN(a.getTime())||isNaN(e.getTime())||d?.({from:a,to:e})}},[m,a,d]);let r=a=>{d?.(a);let b=new URLSearchParams(m.toString());a?.from&&a?.to?(b.set("from",a.from.toISOString()),b.set("to",a.to.toISOString())):(b.delete("from"),b.delete("to")),l.push(`?${b.toString()}`,{scroll:!1}),p(!1)},s=a=>{r(a.dateRange)},t=aS(),u=function(a){if(!a?.from||!a?.to)return null;for(let b of aS())if(b.dateRange.from.getTime()===a.from.getTime()&&b.dateRange.to.getTime()===a.to.getTime())return b.key;return null}(a);return(0,b.jsx)(g.Card,{className:i,children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aA.default,{className:"h-4 w-4 text-gray-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date Range:"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aJ.DateRangePicker,{value:a,onChange:r,placeholder:"Select date range",className:"w-auto"}),a&&(0,b.jsx)(ad.Button,{variant:"ghost",size:"sm",onClick:()=>{r(void 0)},className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:e&&(0,b.jsxs)(ad.Button,{variant:"outline",size:"sm",onClick:e,disabled:f,className:"flex items-center gap-2",children:[(0,b.jsx)(az.default,{className:`h-3 w-3 ${f?"animate-spin":""}`}),"Refresh"]})})]}),a&&(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,b.jsx)(M.default,{className:"h-3 w-3 text-blue-500"}),(0,b.jsx)("span",{className:"text-sm text-blue-600 font-medium",children:(k=a,k?.from?k.to?n(k.from)&&n(k.to)?"Today":q(k.from)&&q(k.to)?"Yesterday":k.from.getTime()===k.to.getTime()?(0,j.format)(k.from,"MMM d, yyyy"):k.from.getFullYear()===k.to.getFullYear()?k.from.getMonth()===k.to.getMonth()?`${(0,j.format)(k.from,"MMM d")} - ${(0,j.format)(k.to,"d, yyyy")}`:`${(0,j.format)(k.from,"MMM d")} - ${(0,j.format)(k.to,"MMM d, yyyy")}`:`${(0,j.format)(k.from,"MMM d, yyyy")} - ${(0,j.format)(k.to,"MMM d, yyyy")}`:(0,j.format)(k.from,"MMM d, yyyy"):"Select date range")}),u&&(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:t.find(a=>a.key===u)?.label})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-2",children:"Quick Select:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:t.slice(0,6).map(a=>(0,b.jsx)(ad.Button,{variant:u===a.key?"default":"outline",size:"sm",onClick:()=>s(a),className:"text-xs",children:a.label},a.key))})]}),o&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:t.slice(6).map(a=>(0,b.jsx)(ad.Button,{variant:u===a.key?"default":"outline",size:"sm",onClick:()=>s(a),className:"text-xs",children:a.label},a.key))})}),t.length>6&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(ad.Button,{variant:"ghost",size:"sm",onClick:()=>p(!o),className:"text-xs text-gray-500",children:o?"Show Less":"More Options"})})]})})}var aU=a.i(80281),aV=a.i(65602);let aW=(0,K.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var aX=a.i(76514);let aY=(0,K.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),aZ=(0,K.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var a$=a.i(60381);let a_=(0,K.default)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);function a0({config:a,onConfigChange:d,isConnected:e,lastUpdate:f,className:g}){var i;let[j,k]=(0,c.useState)(!1),l=b=>{d({...a,...b})};return(0,b.jsxs)("div",{className:g,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:e?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(aW,{className:"h-4 w-4"}),a.enabled&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Live"})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,b.jsx)(aX.default,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Offline"})]})}),(0,b.jsx)(h.Badge,{variant:a.enabled?"default":"secondary",className:"text-xs",children:a.enabled?"Active":"Paused"}),a.enabled&&(0,b.jsx)(h.Badge,{variant:"outline",className:"text-xs",children:(i=a.interval)<6e4?`${i/1e3}s`:i<36e5?`${i/6e4}m`:`${i/36e5}h`})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["Updated ",(a=>{if(!a)return"Never";let b=new Date().getTime()-a.getTime();if(b<6e4)return"Just now";if(b<36e5){let a=Math.floor(b/6e4);return`${a}m ago`}{let a=Math.floor(b/36e5);return`${a}h ago`}})(f)]}),(0,b.jsx)(ad.Button,{variant:"ghost",size:"sm",onClick:()=>l({enabled:!a.enabled}),className:"h-8 w-8 p-0",children:a.enabled?(0,b.jsx)(aY,{className:"h-3 w-3"}):(0,b.jsx)(aZ,{className:"h-3 w-3"})}),(0,b.jsx)(ad.Button,{variant:"ghost",size:"sm",onClick:()=>k(!j),className:"h-8 w-8 p-0",children:(0,b.jsx)(a$.default,{className:"h-3 w-3"})})]})]}),j&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:"Auto Refresh"}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Automatically update data"})]}),(0,b.jsx)(aU.Switch,{checked:a.autoRefresh,onCheckedChange:a=>l({autoRefresh:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-sm font-medium flex items-center gap-1",children:[a.notifications?(0,b.jsx)(ay.default,{className:"h-3 w-3"}):(0,b.jsx)(a_,{className:"h-3 w-3"}),"Notifications"]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Alert on important updates"})]}),(0,b.jsx)(aU.Switch,{checked:a.notifications,onCheckedChange:a=>l({notifications:a})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-2",children:"Refresh Interval"}),(0,b.jsx)("div",{className:"flex gap-2",children:[{value:1e4,label:"10s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:3e5,label:"5m"}].map(c=>(0,b.jsx)(ad.Button,{variant:a.interval===c.value?"default":"outline",size:"sm",onClick:()=>l({interval:c.value}),className:"text-xs",children:c.label},c.value))})]})]})]})}function a1({isConnected:a,onRetry:c,className:d}){return a?null:(0,b.jsxs)(aV.Alert,{className:d,children:[(0,b.jsx)(aX.default,{className:"h-4 w-4"}),(0,b.jsxs)(aV.AlertDescription,{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Connection lost. Real-time updates are paused."}),c&&(0,b.jsxs)(ad.Button,{variant:"outline",size:"sm",onClick:c,className:"ml-2",children:[(0,b.jsx)(az.default,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}var a2=a.i(88819);a.i(5522),a.i(99548),a.i(86875),a.i(32324),a.i(42334);var a3=a.i(37746);a.i(31941);let a4=(0,K.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var a5=a.i(38998);function a6({initialData:a,initialDateRange:d}){let[i,k]=(0,c.useState)(a),[l,m]=(0,c.useState)(d),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),{isEnabled:r,isConnected:s,lastUpdate:t,toggle:u,forceUpdate:v,config:w,updateConfig:x}=function({interval:a=3e4,enabled:b=!0,onUpdate:d,onError:e}={}){let[f,g]=(0,c.useState)(()=>({enabled:b,interval:a,autoRefresh:!0,notifications:!0,syncData:!0})),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),l=(0,c.useRef)(null),m=(0,c.useRef)(0);(0,c.useEffect)(()=>{},[f]);let n=(0,c.useCallback)(async()=>{try{await d?.(),i(!0),k(new Date),m.current=0}catch(a){console.error("Real-time update failed:",a),m.current++,m.current>=3&&(i(!1),e?.(a instanceof Error?a:Error("Update failed")))}},[d,e]);(0,c.useEffect)(()=>{if(f.enabled&&f.autoRefresh)return n(),l.current=setInterval(n,f.interval),()=>{l.current&&(clearInterval(l.current),l.current=null)};l.current&&(clearInterval(l.current),l.current=null),i(!1)},[f.enabled,f.autoRefresh,f.interval,n]),(0,c.useEffect)(()=>{let a=()=>{"hidden"===document.visibilityState?l.current&&(clearInterval(l.current),l.current=null):"visible"===document.visibilityState&&f.enabled&&f.autoRefresh&&(n(),l.current=setInterval(n,f.interval))};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)},[f.enabled,f.autoRefresh,f.interval,n]);let o=(0,c.useCallback)(()=>{g(a=>({...a,enabled:!a.enabled}))},[]),p=(0,c.useCallback)(()=>{n()},[n]),q=(0,c.useCallback)(a=>{g(b=>({...b,...a}))},[]);return{isEnabled:f.enabled,isConnected:h,lastUpdate:j,toggle:o,forceUpdate:p,config:f,updateConfig:q}}({interval:3e4,enabled:!0,onUpdate:(0,c.useCallback)(async()=>{try{q(null);let a=await f(l);k(a)}catch(a){throw console.error("Failed to update dashboard data:",a),a}},[l]),onError:(0,c.useCallback)(a=>{q(a.message)},[])}),y=(0,c.useCallback)(async()=>{o(!0),q(null);try{let a=await f(l);k(a),await e()}catch(a){q(a instanceof Error?a.message:"Failed to refresh data"),console.error("Dashboard refresh failed:",a)}finally{o(!1)}},[l]),z=(0,c.useCallback)(async a=>{m(a),o(!0),q(null);try{let b=await f(a);k(b)}catch(a){q(a instanceof Error?a.message:"Failed to update data for date range"),console.error("Date range update failed:",a)}finally{o(!1)}},[]),A=i.kpis.totalRevenue.current,B=i.kpis.guestCount.current,C=i.liveOrders.filter(a=>["pending","preparing","ready"].includes(a.status)).length;return i.liveReservations.filter(a=>"confirmed"===a.status).length,(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsx)(a2.PageHeader,{title:l?.from&&l?.to?`Dashboard - ${function(a,b){let c=(0,j.format)(a,"MMM d"),d=(0,j.format)(b,"MMM d, yyyy");return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()?`${(0,j.format)(a,"MMM d")} - ${(0,j.format)(b,"d, yyyy")}`:`${c} - ${d}`}(l.from,l.to)}`:"Restaurant Dashboard",description:"Real-time analytics and operational insights",icon:(0,b.jsx)(a4,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(I.default,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)("span",{className:"font-medium",children:A.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(H.default,{className:"h-4 w-4 text-blue-600"}),(0,b.jsxs)("span",{className:"font-medium",children:[B," guests"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(M.default,{className:"h-4 w-4 text-orange-600"}),(0,b.jsxs)(h.Badge,{variant:"secondary",children:[C," active orders"]})]})]})]}),p&&(0,b.jsx)(a1,{isConnected:!1,onRetry:y,className:"border-red-200 bg-red-50"}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,b.jsx)(aT,{value:l,onChange:z,onRefresh:y,isLoading:n}),(0,b.jsx)(a0,{config:w,onConfigChange:x,isConnected:s,lastUpdate:t})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Performance Indicators"}),(0,b.jsx)(P,{data:i.kpis,isLoading:n})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sales Analytics"}),(0,b.jsx)(as,{data:i.salesTrend,isLoading:n,className:"w-full"})]}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Live Operations"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs",children:[i.liveOrders.length," orders"]}),(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs",children:[i.liveReservations.length," reservations"]})]})]}),(0,b.jsx)(aH,{orders:i.liveOrders,reservations:i.liveReservations,isLoading:n,onRefresh:v})]}),(0,b.jsx)("section",{children:(0,b.jsxs)(a3.Tabs,{defaultValue:"products",className:"w-full",children:[(0,b.jsxs)(a3.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsxs)(a3.TabsTrigger,{value:"products",className:"flex items-center gap-2",children:[(0,b.jsx)(a5.default,{className:"h-4 w-4"}),"Top Products"]}),(0,b.jsxs)(a3.TabsTrigger,{value:"staff",className:"flex items-center gap-2",children:[(0,b.jsx)(H.default,{className:"h-4 w-4"}),"Staff Performance"]})]}),(0,b.jsx)(a3.TabsContent,{value:"products",className:"mt-4",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(a5.default,{className:"h-5 w-5 text-yellow-600"}),"Top Selling Products"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:i.topProducts.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full text-sm font-medium",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.category})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"font-medium",children:[a.quantitySold," sold"]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.revenue.toLocaleString("en-US",{style:"currency",currency:"USD"})})]})]},a.id))})})]})}),(0,b.jsx)(a3.TabsContent,{value:"staff",className:"mt-4",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(H.default,{className:"h-5 w-5 text-green-600"}),"Staff Performance"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:i.staffPerformance.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-green-100 text-green-600 rounded-full text-sm font-medium",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.role})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"font-medium",children:a.salesAmount.toLocaleString("en-US",{style:"currency",currency:"USD"})}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:[a.ordersProcessed," orders • ",a.hoursWorked,"h"]})]})]},a.id))})})]})})]})})]})]})}}];

//# sourceMappingURL=app_dashboard_dashboard-content_tsx_0f2d0e45._.js.map