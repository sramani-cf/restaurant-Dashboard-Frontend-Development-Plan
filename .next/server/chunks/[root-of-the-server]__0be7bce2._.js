module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},61724,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},9588,(e,t,r)=>{},61370,e=>{"use strict";e.s(["handler",()=>b,"patchFetch",()=>_,"routeModule",()=>N,"serverHooks",()=>q,"workAsyncStorage",()=>P,"workUnitAsyncStorage",()=>S],61370);var t=e.i(47909),r=e.i(74017),a=e.i(96250),n=e.i(59756),s=e.i(61916),o=e.i(69741),i=e.i(16795),l=e.i(87718),u=e.i(95169),p=e.i(47587),d=e.i(66012),c=e.i(70101),h=e.i(26937),m=e.i(10372),w=e.i(93695);e.i(52474);var x=e.i(220);e.s(["GET",()=>E,"HEAD",()=>A,"POST",()=>k],57007);var v=e.i(89171);let R={requests:0,errors:0,totalResponseTime:0,lastReset:Date.now()};async function f(){let e=Date.now();try{return await new Promise(e=>setTimeout(e,10)),{status:"up",responseTime:Date.now()-e}}catch(t){return{status:"down",responseTime:Date.now()-e,error:t instanceof Error?t.message:"Unknown error"}}}async function y(){let e=Date.now();try{return Date.now().toString(),await new Promise(e=>setTimeout(e,5)),{status:"up",responseTime:Date.now()-e,hitRate:.85}}catch(t){return{status:"down",responseTime:Date.now()-e,error:t instanceof Error?t.message:"Unknown error"}}}async function g(){let e=[{name:"payment-gateway",url:process.env.PAYMENT_API_URL},{name:"notification-service",url:process.env.NOTIFICATION_API_URL},{name:"analytics-service",url:process.env.ANALYTICS_API_URL}],t=await Promise.allSettled(e.map(async e=>{if(!e.url)return{name:e.name,status:"down",responseTime:0,error:"Service URL not configured"};let t=Date.now();try{let r=await fetch(`${e.url}/health`,{method:"GET",timeout:5e3});return{name:e.name,status:r.ok?"up":"down",responseTime:Date.now()-t,error:r.ok?void 0:`HTTP ${r.status}`}}catch(r){return{name:e.name,status:"down",responseTime:Date.now()-t,error:r instanceof Error?r.message:"Network error"}}}));return{status:t.every(e=>"fulfilled"===e.status&&"up"===e.value.status)?"up":"down",services:t.map(e=>"fulfilled"===e.status?e.value:{name:"unknown",status:"down",responseTime:0,error:"Check failed"})}}function T(e,t=!1){R.requests++,R.totalResponseTime+=e,t&&R.errors++}function C(){let e=(Date.now()-R.lastReset)/1e3;return{avgResponseTime:R.requests>0?R.totalResponseTime/R.requests:0,requestsPerSecond:e>0?R.requests/e:0,errorRate:R.requests>0?R.errors/R.requests*100:0}}async function E(e){let t=Date.now();try{let[e,r,a]=await Promise.allSettled([f(),y(),g()]),n={database:"fulfilled"===e.status?e.value:{status:"down",responseTime:0,error:"Health check failed"},cache:"fulfilled"===r.status?r.value:{status:"down",responseTime:0,error:"Health check failed"},external:"fulfilled"===a.status?a.value:{status:"down",services:[]},memory:function(){if("undefined"==typeof process)return{used:0,free:0,total:0,usage:"0%"};let e=process.memoryUsage(),t=e.heapUsed,r=e.heapTotal,a=(t/r*100).toFixed(1)+"%";return{used:Math.round(t/1024/1024),free:Math.round((r-t)/1024/1024),total:Math.round(r/1024/1024),usage:a}}()},s=function(e){let t=[e.database],r=[e.cache,e.external];return t.some(e=>e?.status==="down")?"unhealthy":r.some(e=>e?.status==="down")?"degraded":"healthy"}(n),o={status:s,timestamp:new Date().toISOString(),uptime:process.uptime?process.uptime():0,version:process.env.npm_package_version||"1.0.0",environment:"production",checks:n,performance:C()},i=Date.now()-t;return T(i,!1),v.NextResponse.json(o,{status:{healthy:200,degraded:200,unhealthy:503}[s],headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Content-Type":"application/json","X-Health-Check":"true","X-Response-Time":`${i}ms`}})}catch(a){let e=Date.now()-t;T(e,!0),console.error("[Health Check] Error:",a);let r={status:"unhealthy",timestamp:new Date().toISOString(),uptime:process.uptime?process.uptime():0,version:process.env.npm_package_version||"1.0.0",environment:"production",checks:{},performance:C()};return v.NextResponse.json(r,{status:503,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Content-Type":"application/json","X-Health-Check":"true","X-Response-Time":`${e}ms`}})}}async function A(e){let t=Date.now();try{let e=await f(),r="up"===e.status,a=Date.now()-t;return T(a,!r),new v.NextResponse(null,{status:r?200:503,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","X-Health-Status":r?"healthy":"unhealthy","X-Response-Time":`${a}ms`}})}catch(r){let e=Date.now()-t;return T(e,!0),new v.NextResponse(null,{status:503,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","X-Health-Status":"unhealthy","X-Response-Time":`${e}ms`}})}}async function k(e){let t=e.headers.get("Authorization");return t&&t.startsWith("Bearer ")?(R={requests:0,errors:0,totalResponseTime:0,lastReset:Date.now()},v.NextResponse.json({message:"Metrics reset successfully",timestamp:new Date().toISOString()})):v.NextResponse.json({error:"Unauthorized"},{status:401})}var D=e.i(57007);let N=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/health/route",pathname:"/api/health",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/health/route.ts",nextConfigOutput:"standalone",userland:D}),{workAsyncStorage:P,workUnitAsyncStorage:S,serverHooks:q}=N;function _(){return(0,a.patchFetch)({workAsyncStorage:P,workUnitAsyncStorage:S})}async function b(e,t,a){var v;let R="/api/health/route";R=R.replace(/\/index$/,"")||"/";let f=await N.prepare(e,t,{srcPage:R,multiZoneDraftMode:!1});if(!f)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:y,params:g,nextConfig:T,isDraftMode:C,prerenderManifest:E,routerServerContext:A,isOnDemandRevalidate:k,revalidateOnlyGenerated:D,resolvedPathname:P}=f,S=(0,o.normalizeAppPath)(R),q=!!(E.dynamicRoutes[S]||E.routes[P]);if(q&&!C){let e=!!E.routes[P],t=E.dynamicRoutes[S];if(t&&!1===t.fallback&&!e)throw new w.NoFallbackError}let _=null;!q||N.isDev||C||(_="/index"===(_=P)?"/":_);let b=!0===N.isDev||!q,j=q&&!b,O=e.method||"GET",H=(0,s.getTracer)(),U=H.getActiveScopeSpan(),I={params:g,prerenderManifest:E,renderOpts:{experimental:{cacheComponents:!!T.experimental.cacheComponents,authInterrupts:!!T.experimental.authInterrupts},supportsDynamicResponse:b,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(v=T.experimental)?void 0:v.cacheLife,isRevalidate:j,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>N.onRequestError(e,t,a,A)},sharedContext:{buildId:y}},M=new i.NodeNextRequest(e),$=new i.NodeNextResponse(t),X=l.NextRequestAdapter.fromNodeNextRequest(M,(0,l.signalFromNodeResponse)(t));try{let o=async r=>N.handle(X,I).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=H.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=a.get("next.route");if(n){let e=`${O} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${O} ${e.url}`)}),i=async s=>{var i,l;let u=async({previousCacheEntry:r})=>{try{if(!(0,n.getRequestMeta)(e,"minimalMode")&&k&&D&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await o(s);e.fetchMetrics=I.renderOpts.fetchMetrics;let l=I.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let u=I.renderOpts.collectedTags;if(!q)return await (0,d.sendResponse)(M,$,i,I.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,c.toNodeOutgoingHttpHeaders)(i.headers);u&&(t[m.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==I.renderOpts.collectedRevalidate&&!(I.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&I.renderOpts.collectedRevalidate,a=void 0===I.renderOpts.collectedExpire||I.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:I.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await N.onRequestError(e,t,{routerKind:"App Router",routePath:R,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isRevalidate:j,isOnDemandRevalidate:k})},A),t}},w=await N.handleResponse({req:e,nextConfig:T,cacheKey:_,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:k,revalidateOnlyGenerated:D,responseGenerator:u,waitUntil:a.waitUntil});if(!q)return null;if((null==w||null==(i=w.value)?void 0:i.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==w||null==(l=w.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",k?"REVALIDATED":w.isMiss?"MISS":w.isStale?"STALE":"HIT"),C&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let v=(0,c.fromNodeOutgoingHttpHeaders)(w.value.headers);return(0,n.getRequestMeta)(e,"minimalMode")&&q||v.delete(m.NEXT_CACHE_TAGS_HEADER),!w.cacheControl||t.getHeader("Cache-Control")||v.get("Cache-Control")||v.set("Cache-Control",(0,h.getCacheControlHeader)(w.cacheControl)),await (0,d.sendResponse)(M,$,new Response(w.value.body,{headers:v,status:w.value.status||200})),null};U?await i(U):await H.withPropagatedContext(e.headers,()=>H.trace(u.BaseServerSpan.handleRequest,{spanName:`${O} ${e.url}`,kind:s.SpanKind.SERVER,attributes:{"http.method":O,"http.target":e.url}},i))}catch(t){if(U||t instanceof w.NoFallbackError||await N.onRequestError(e,t,{routerKind:"App Router",routePath:S,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isRevalidate:j,isOnDemandRevalidate:k})}),q)throw t;return await (0,d.sendResponse)(M,$,new Response(null,{status:500})),null}}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0be7bce2._.js.map