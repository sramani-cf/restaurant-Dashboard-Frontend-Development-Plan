@import "tailwindcss";

/* Critical CSS for initial render */
.loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

@media (prefers-color-scheme: dark) {
  .loading-screen {
    background: #0a0a0a;
  }
}

.loading-spinner {
  width: 32px;
  height: 32px;
  border: 2px solid #e5e7eb;
  border-top: 2px solid #f3890d;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Prevent layout shift */
html {
  scroll-behavior: smooth;
}

body {
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Accessibility Enhancement Styles */

/* Focus management */
.focus-visible {
  outline: 2px solid hsl(var(--ring, 210 100% 50%));
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 0%;
    --primary: 210 100% 25%;
    --primary-foreground: 0 0% 100%;
    --border: 0 0% 0%;
    --input: 0 0% 100%;
    --ring: 210 100% 50%;
  }
}

.high-contrast {
  --background: 0 0% 100%;
  --foreground: 0 0% 0%;
  --primary: 210 100% 25%;
  --primary-foreground: 0 0% 100%;
  --border: 0 0% 0%;
  --input: 0 0% 100%;
  --ring: 210 100% 50%;
  filter: contrast(150%);
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

.reduce-motion * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* Screen reader only content */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.sr-only.focus:not(.focus\:not-sr-only):focus,
.focus\:not-sr-only:focus {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: inherit !important;
  margin: inherit !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
}

/* Skip link styles */
.skip-link {
  transform: translateY(-100%);
  transition: transform 0.2s ease-in-out;
}

.skip-link:focus {
  transform: translateY(0);
}

/* Font size preferences */
.font-small { font-size: 0.875rem; line-height: 1.5; }
.font-medium { font-size: 1rem; line-height: 1.5; }
.font-large { font-size: 1.125rem; line-height: 1.6; }
.font-extra-large { font-size: 1.25rem; line-height: 1.6; }

/* Focus rings visibility */
.focus-rings-visible :focus {
  outline: 2px solid hsl(var(--ring, 210 100% 50%));
  outline-offset: 2px;
}

.focus-rings-visible :focus:not(:focus-visible) {
  outline: none;
}

/* Mobile accessibility improvements */
@media (max-width: 768px) {
  .mobile-a11y {
    --min-touch-size: 44px;
  }
  
  .mobile-a11y button,
  .mobile-a11y [role="button"],
  .mobile-a11y a {
    min-height: var(--min-touch-size);
    min-width: var(--min-touch-size);
    padding: 8px;
  }
  
  /* Larger text on mobile for better readability */
  .mobile-a11y {
    font-size: 1.125rem;
  }
}

/* Print accessibility */
@media print {
  .sr-only {
    position: static !important;
    width: auto !important;
    height: auto !important;
    margin: 0 !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
  }
  
  /* Show URLs for links in print */
  a[href]:after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666;
  }
  
  /* Ensure sufficient contrast in print */
  * {
    background: white !important;
    color: black !important;
  }
}

/* Windows High Contrast Mode support */
@media screen and (-ms-high-contrast: active) {
  * {
    border-color: windowText !important;
    color: windowText !important;
  }
  
  .focus-visible {
    outline: 2px solid highlight !important;
  }
}

/* Forced colors mode support (Windows) */
@media (forced-colors: active) {
  * {
    border-color: CanvasText !important;
    color: CanvasText !important;
    background: Canvas !important;
  }
  
  .focus-visible {
    outline: 2px solid Highlight !important;
    outline-offset: 2px;
  }
}

/* Restaurant Dashboard Design Tokens */
:root {
  /* Brand Colors */
  --color-primary-50: #fef3e7;
  --color-primary-100: #fde7cf;
  --color-primary-200: #fad09e;
  --color-primary-300: #f8b86e;
  --color-primary-400: #f5a13d;
  --color-primary-500: #f3890d;
  --color-primary-600: #c26e0a;
  --color-primary-700: #925208;
  --color-primary-800: #613705;
  --color-primary-900: #311b03;

  /* Success Colors */
  --color-success-50: #ecfdf5;
  --color-success-100: #d1fae5;
  --color-success-200: #a7f3d0;
  --color-success-300: #6ee7b7;
  --color-success-400: #34d399;
  --color-success-500: #10b981;
  --color-success-600: #059669;
  --color-success-700: #047857;
  --color-success-800: #065f46;
  --color-success-900: #064e3b;

  /* Warning Colors */
  --color-warning-50: #fffbeb;
  --color-warning-100: #fef3c7;
  --color-warning-200: #fde68a;
  --color-warning-300: #fcd34d;
  --color-warning-400: #fbbf24;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;
  --color-warning-700: #b45309;
  --color-warning-800: #92400e;
  --color-warning-900: #78350f;

  /* Error Colors */
  --color-error-50: #fef2f2;
  --color-error-100: #fee2e2;
  --color-error-200: #fecaca;
  --color-error-300: #fca5a5;
  --color-error-400: #f87171;
  --color-error-500: #ef4444;
  --color-error-600: #dc2626;
  --color-error-700: #b91c1c;
  --color-error-800: #991b1b;
  --color-error-900: #7f1d1d;

  /* Neutral Colors */
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;

  /* Light Mode */
  --background: #ffffff;
  --foreground: #111827;
  --card: #ffffff;
  --card-foreground: #111827;
  --popover: #ffffff;
  --popover-foreground: #111827;
  --primary: var(--color-primary-500);
  --primary-foreground: #ffffff;
  --secondary: #f3f4f6;
  --secondary-foreground: #111827;
  --muted: #f9fafb;
  --muted-foreground: #6b7280;
  --accent: #f3f4f6;
  --accent-foreground: #111827;
  --destructive: var(--color-error-500);
  --destructive-foreground: #ffffff;
  --border: #e5e7eb;
  --input: #e5e7eb;
  --ring: var(--color-primary-500);
  
  /* Chart Colors */
  --chart-1: #f3890d;
  --chart-2: #10b981;
  --chart-3: #3b82f6;
  --chart-4: #f59e0b;
  --chart-5: #8b5cf6;
  
  /* Spacing */
  --radius: 0.5rem;
  
  /* Dashboard Specific */
  --sidebar-width: 280px;
  --header-height: 64px;
  --kds-header-height: 80px;
}

@media (prefers-color-scheme: dark) {
  :root {
    /* Dark Mode */
    --background: #0a0a0a;
    --foreground: #f9fafb;
    --card: #111827;
    --card-foreground: #f9fafb;
    --popover: #111827;
    --popover-foreground: #f9fafb;
    --primary: var(--color-primary-400);
    --primary-foreground: #111827;
    --secondary: #1f2937;
    --secondary-foreground: #f9fafb;
    --muted: #1f2937;
    --muted-foreground: #9ca3af;
    --accent: #1f2937;
    --accent-foreground: #f9fafb;
    --destructive: var(--color-error-600);
    --destructive-foreground: #f9fafb;
    --border: #374151;
    --input: #374151;
    --ring: var(--color-primary-400);
    
    /* Chart Colors Dark */
    --chart-1: #f5a13d;
    --chart-2: #34d399;
    --chart-3: #60a5fa;
    --chart-4: #fbbf24;
    --chart-5: #a78bfa;
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  
  /* Typography */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  
  /* Animation */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
}

/* Base Styles */
body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans), Arial, Helvetica, sans-serif;
}

/* Animations */
@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

/* Utility Classes */
.container {
  @apply mx-auto px-4 sm:px-6 lg:px-8;
}

/* Dashboard Layout */
.dashboard-grid {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}

@media (min-width: 768px) {
  .dashboard-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .dashboard-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (min-width: 1280px) {
  .dashboard-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* KDS Specific Styles */
.kds-dark {
  --background: #000000;
  --foreground: #ffffff;
  --card: #0a0a0a;
  --border: #262626;
}

.kds-ticket {
  @apply bg-card border-2 rounded-lg p-4;
}

.kds-ticket-urgent {
  @apply border-destructive bg-destructive/20;
}

.kds-ticket-warning {
  @apply border-yellow-500 bg-yellow-500/20;
}

.kds-ticket-normal {
  @apply border-border;
}

/* Scrollbar Styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--muted);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--muted-foreground);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--foreground);
}

/* Focus Styles */
.focus-visible:focus {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* Transition Utilities */
.transition-base {
  @apply transition-all duration-200 ease-in-out;
}

.transition-fast {
  @apply transition-all duration-150 ease-in-out;
}

.transition-slow {
  @apply transition-all duration-300 ease-in-out;
}

/* Loading States */
.skeleton {
  @apply animate-pulse bg-muted rounded;
}

/* Status Indicators */
.status-online {
  @apply h-2 w-2 bg-green-500 rounded-full;
}

.status-busy {
  @apply h-2 w-2 bg-yellow-500 rounded-full;
}

.status-offline {
  @apply h-2 w-2 bg-gray-400 rounded-full;
}

/* Enhanced KDS Styles for Kitchen Display System */

/* KDS Theme Variables - High Contrast for Kitchen Visibility */
.kds-dark {
  --kds-bg-primary: #000000;
  --kds-bg-secondary: #0a0a0a;
  --kds-bg-tertiary: #111111;
  --kds-text-primary: #ffffff;
  --kds-text-secondary: #e5e5e5;
  --kds-text-muted: #a3a3a3;
  --kds-text-accent: #60a5fa;
  --kds-border-primary: #374151;
  --kds-border-secondary: #4b5563;
  --kds-border-accent: #3b82f6;
  
  /* Status Colors - High Contrast */
  --kds-success: #22c55e;
  --kds-warning: #fbbf24;
  --kds-error: #ef4444;
  --kds-urgent: #dc2626;
  --kds-fire: #b91c1c;
  
  /* Station Colors */
  --kds-grill: #dc2626;
  --kds-fryer: #d97706;
  --kds-salad: #059669;
  --kds-expo: #7c3aed;
  --kds-pantry: #0369a1;
  --kds-dessert: #be185d;
  --kds-beverage: #0891b2;
}

/* Kitchen Display Text - Optimized for Distance Reading */
.kds-text-kitchen {
  font-size: 1.125rem; /* 18px */
  line-height: 1.4;
  font-weight: 500;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  letter-spacing: 0.025em;
}

.kds-text-kitchen-large {
  font-size: 1.5rem; /* 24px */
  line-height: 1.3;
  font-weight: 600;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9);
  letter-spacing: 0.025em;
}

.kds-text-kitchen-xlarge {
  font-size: 2rem; /* 32px */
  line-height: 1.2;
  font-weight: 700;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9);
  letter-spacing: 0.05em;
}

/* High Contrast Text for Critical Information */
.kds-text-high-contrast {
  color: #ffffff;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
  font-weight: 600;
}

/* Touch-Optimized Buttons for Kitchen Environment */
.kds-button {
  min-height: 3.75rem; /* 60px */
  min-width: 3.75rem; /* 60px */
  padding: 0.75rem 1rem;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 0.5rem;
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  position: relative;
  overflow: hidden;
}

.kds-button:active {
  transform: scale(0.98);
}

.kds-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

/* Button feedback animation */
.kds-button::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.kds-button:active::before {
  width: 300px;
  height: 300px;
}

/* Large touch targets for mobile */
@media (max-width: 768px) {
  .kds-button {
    min-height: 5rem; /* 80px */
    min-width: 5rem; /* 80px */
    font-size: 1.125rem;
  }
}

/* Extra large displays */
@media (min-width: 1920px) {
  .kds-button {
    min-height: 5rem; /* 80px */
    font-size: 1.25rem;
  }
  
  .kds-text-kitchen {
    font-size: 1.25rem; /* 20px */
  }
  
  .kds-text-kitchen-large {
    font-size: 2rem; /* 32px */
  }
  
  .kds-text-kitchen-xlarge {
    font-size: 2.5rem; /* 40px */
  }
}

/* Ticket Urgency Animations - Attention Grabbing */
@keyframes kds-urgent-pulse {
  0%, 100% { 
    border-color: var(--kds-urgent);
    background-color: rgba(220, 38, 38, 0.1);
    box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7);
  }
  50% { 
    border-color: #f87171;
    background-color: rgba(248, 113, 113, 0.2);
    box-shadow: 0 0 0 10px rgba(220, 38, 38, 0);
  }
}

.kds-urgent {
  animation: kds-urgent-pulse 2s infinite;
}

@keyframes kds-warning-glow {
  0%, 100% { 
    border-color: var(--kds-warning);
    box-shadow: 0 0 5px rgba(251, 191, 36, 0.3);
  }
  50% { 
    border-color: #fde047;
    box-shadow: 0 0 15px rgba(253, 224, 71, 0.5);
  }
}

.kds-warning {
  animation: kds-warning-glow 3s infinite;
}

@keyframes kds-fire-flash {
  0%, 50%, 100% { 
    background-color: rgba(185, 28, 28, 0.3);
    border-color: var(--kds-fire);
  }
  25%, 75% { 
    background-color: rgba(239, 68, 68, 0.4);
    border-color: #ef4444;
  }
}

.kds-fire {
  animation: kds-fire-flash 1s infinite;
}

/* Ticket Status Colors */
.kds-ticket-normal {
  border-color: var(--kds-border-primary);
  background-color: var(--kds-bg-tertiary);
}

.kds-ticket-warning {
  border-color: var(--kds-warning);
  background-color: rgba(251, 191, 36, 0.1);
}

.kds-ticket-urgent {
  border-color: var(--kds-error);
  background-color: rgba(239, 68, 68, 0.1);
}

/* Grid Layouts for Tickets */
.kds-ticket-grid {
  display: grid;
  gap: 1rem;
  padding: 1rem;
  height: 100%;
  overflow-y: auto;
  scroll-behavior: smooth;
}

.kds-ticket-grid-1 { grid-template-columns: 1fr; }
.kds-ticket-grid-2 { grid-template-columns: repeat(2, 1fr); }
.kds-ticket-grid-3 { grid-template-columns: repeat(3, 1fr); }
.kds-ticket-grid-4 { grid-template-columns: repeat(4, 1fr); }
.kds-ticket-grid-5 { grid-template-columns: repeat(5, 1fr); }
.kds-ticket-grid-6 { grid-template-columns: repeat(6, 1fr); }

/* Auto-scroll behavior for new tickets */
.kds-auto-scroll {
  scroll-snap-type: y mandatory;
}

.kds-ticket {
  scroll-snap-align: start;
  scroll-margin-top: 1rem;
}

/* Station Color Indicators */
.kds-station-grill { border-left: 4px solid var(--kds-grill); }
.kds-station-fryer { border-left: 4px solid var(--kds-fryer); }
.kds-station-salad { border-left: 4px solid var(--kds-salad); }
.kds-station-expo { border-left: 4px solid var(--kds-expo); }
.kds-station-pantry { border-left: 4px solid var(--kds-pantry); }
.kds-station-dessert { border-left: 4px solid var(--kds-dessert); }
.kds-station-beverage { border-left: 4px solid var(--kds-beverage); }

/* Timer Displays */
.kds-timer {
  font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-variant-numeric: tabular-nums;
}

.kds-timer-urgent {
  color: var(--kds-urgent);
  animation: kds-timer-blink 1s infinite;
}

@keyframes kds-timer-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0.3; }
}

/* Loading States */
.kds-loading {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  background-size: 200% 100%;
  animation: kds-loading-shimmer 1.5s infinite;
}

@keyframes kds-loading-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Focus Styles for Keyboard Navigation */
.kds-dark *:focus-visible {
  outline: 2px solid var(--kds-border-accent);
  outline-offset: 2px;
  border-radius: 0.25rem;
}

/* Custom Scrollbar for Dark Theme */
.kds-dark ::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

.kds-dark ::-webkit-scrollbar-track {
  background: var(--kds-bg-secondary);
  border-radius: 6px;
}

.kds-dark ::-webkit-scrollbar-thumb {
  background: var(--kds-border-secondary);
  border-radius: 6px;
  border: 2px solid var(--kds-bg-secondary);
}

.kds-dark ::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Alert Styling for KDS */
.kds-alert-error {
  background: linear-gradient(135deg, rgba(185, 28, 28, 0.2), rgba(239, 68, 68, 0.1));
  border: 1px solid var(--kds-error);
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
}

.kds-alert-warning {
  background: linear-gradient(135deg, rgba(217, 119, 6, 0.2), rgba(251, 191, 36, 0.1));
  border: 1px solid var(--kds-warning);
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
}

.kds-alert-info {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(96, 165, 250, 0.1));
  border: 1px solid var(--kds-border-accent);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

/* Performance Optimizations */
.kds-performance-mode {
  will-change: transform, opacity;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .kds-urgent,
  .kds-warning,
  .kds-fire,
  .kds-timer-urgent,
  .kds-loading {
    animation: none !important;
  }
  
  .kds-button::before {
    display: none;
  }
}

/* Print Styles for Order Slips */
@media print {
  .kds-no-print {
    display: none !important;
  }
  
  .kds-ticket {
    background: white !important;
    color: black !important;
    border: 2px solid black !important;
    page-break-inside: avoid;
    margin-bottom: 20px;
    box-shadow: none !important;
  }
  
  .kds-text-kitchen,
  .kds-text-kitchen-large,
  .kds-text-kitchen-xlarge {
    text-shadow: none !important;
    color: black !important;
  }
  
  .kds-button {
    display: none !important;
  }
}

/* High DPI Display Adjustments */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .kds-text-high-contrast {
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
  }
}

/* Legacy Print Styles - Keep for compatibility */
@media print {
  .no-print {
    display: none !important;
  }
  
  .print-break {
    page-break-before: always;
  }
}